import{aw as A,bp as pt,d as se,a7 as u,bc as Me,bh as bt,aJ as z,r as C,af as yt,ap as wt,bn as kt,at as $e,df as Rt,dV as xt,aq as Ne,s as m,b0 as ce,cj as Ke,bf as St,cm as Ct,aP as he,m as qe,ca as We,b2 as Je,aC as Mt,co as Nt,cB as Tt,$ as Pt,cb as Ft,ce as Xe,ch as Ot,ay as fe,bq as je,az as xe,ax as U,c6 as Kt,c7 as Lt,c8 as De,c9 as Ce,aE as _t,aF as Ye,bi as Bt,aH as Ee,b4 as It,dW as At,E as Ue,aI as zt,bu as Vt,dX as $t,aN as jt,dY as Dt,ck as Et,aS as Q,dZ as Ut,C as Ht,ci as qt}from"./G6QKWTEq.js";import{N as Wt}from"./C7tXVBgH.js";import{N as Jt}from"./JmvYD4Wf.js";const Xt=A("base-menu-mask",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 padding: 14px;
 overflow: hidden;
`,[pt()]),Yt=se({name:"BaseMenuMask",props:{clsPrefix:{type:String,required:!0}},setup(t){bt("-base-menu-mask",Xt,z(t,"clsPrefix"));const r=C(null);let l=null;const a=C(!1);return yt(()=>{l!==null&&window.clearTimeout(l)}),Object.assign({message:r,show:a},{showOnce(g,w=1500){l&&window.clearTimeout(l),a.value=!0,r.value=g,l=window.setTimeout(()=>{a.value=!1,r.value=null},w)}})},render(){return u(Me,{name:"fade-in-transition"},{default:()=>this.show?u("div",{class:`${this.clsPrefix}-base-menu-mask`},this.message):null})}}),ve=wt("n-cascader"),He=se({name:"NCascaderOption",props:{tmNode:{type:Object,required:!0}},setup(t){const{expandTriggerRef:r,remoteRef:l,multipleRef:a,mergedValueRef:h,checkedKeysRef:g,indeterminateKeysRef:w,hoverKeyPathRef:v,keyboardKeyRef:b,loadingKeySetRef:O,cascadeRef:x,mergedCheckStrategyRef:_,onLoadRef:V,mergedClsPrefixRef:B,mergedThemeRef:H,labelFieldRef:q,showCheckboxRef:ee,renderPrefixRef:p,renderSuffixRef:S,updateHoverKey:N,updateKeyboardKey:M,addLoadingKey:I,deleteLoadingKey:$,closeMenu:te,doCheck:Y,doUncheck:me,renderLabelRef:d}=Ne(ve),y=m(()=>t.tmNode.key),P=m(()=>{const{value:T}=r,{value:E}=l;return!E&&T==="hover"}),K=m(()=>{if(P.value)return oe}),W=m(()=>{if(P.value)return ge}),j=ce(()=>{const{value:T}=a;return T?g.value.includes(y.value):h.value===y.value}),ne=ce(()=>a.value?w.value.includes(y.value):!1),Te=ce(()=>v.value.includes(y.value)),Pe=ce(()=>{const{value:T}=b;return T===null?!1:T===y.value}),J=ce(()=>l.value?O.value.has(y.value):!1),le=m(()=>t.tmNode.isLeaf),ae=m(()=>t.tmNode.disabled),D=m(()=>t.tmNode.rawNode[q.value]),X=m(()=>t.tmNode.shallowLoaded);function Z(T){if(ae.value)return;const{value:E}=l,{value:L}=O,{value:be}=V,{value:F}=y,{value:ye}=le,{value:we}=X;Ke(T,"checkbox")||(E&&!we&&!L.has(F)&&be&&(I(F),be(t.tmNode.rawNode).then(()=>{$(F)}).catch(()=>{$(F)})),N(F),M(F)),ye&&pe()}function oe(){if(!P.value||ae.value)return;const{value:T}=y;N(T),M(T)}function ge(){P.value&&oe()}function ue(){const{value:T}=le;T||pe()}function pe(){const{value:T}=a,{value:E}=y;T?ne.value||j.value?me(E):Y(E):(Y(E),te(!0))}return{checkStrategy:_,multiple:a,cascade:x,checked:j,indeterminate:ne,hoverPending:Te,keyboardPending:Pe,isLoading:J,showCheckbox:ee,isLeaf:le,disabled:ae,label:D,mergedClsPrefix:B,mergedTheme:H,handleClick:Z,handleCheckboxUpdateValue:ue,mergedHandleMouseEnter:K,mergedHandleMouseMove:W,renderLabel:d,renderPrefix:p,renderSuffix:S}},render(){const{mergedClsPrefix:t,showCheckbox:r,renderLabel:l,renderPrefix:a,renderSuffix:h}=this;let g=null;if(r||a){const b=this.showCheckbox?u(Wt,{focusable:!1,"data-checkbox":!0,disabled:this.disabled,checked:this.checked,indeterminate:this.indeterminate,theme:this.mergedTheme.peers.Checkbox,themeOverrides:this.mergedTheme.peerOverrides.Checkbox,onUpdateChecked:this.handleCheckboxUpdateValue}):null;g=u("div",{class:`${t}-cascader-option__prefix`},a?a({option:this.tmNode.rawNode,checked:this.checked,node:b}):b)}let w=null;const v=u("div",{class:`${t}-cascader-option-icon-placeholder`},this.isLeaf?this.checkStrategy==="child"&&!(this.multiple&&this.cascade)?u(Me,{name:"fade-in-scale-up-transition"},{default:()=>this.checked?u($e,{clsPrefix:t,class:`${t}-cascader-option-icon ${t}-cascader-option-icon--checkmark`},{default:()=>u(xt,null)}):null}):null:u(kt,{clsPrefix:t,scale:.85,strokeWidth:24,show:this.isLoading,class:`${t}-cascader-option-icon`},{default:()=>u($e,{clsPrefix:t,key:"arrow",class:`${t}-cascader-option-icon ${t}-cascader-option-icon--arrow`},{default:()=>u(Rt,null)})}));return w=u("div",{class:`${t}-cascader-option__suffix`},h?h({option:this.tmNode.rawNode,checked:this.checked,node:v}):v),u("div",{class:[`${t}-cascader-option`,this.keyboardPending||this.hoverPending&&`${t}-cascader-option--pending`,this.disabled&&`${t}-cascader-option--disabled`,this.showCheckbox&&`${t}-cascader-option--show-prefix`],onMouseenter:this.mergedHandleMouseEnter,onMousemove:this.mergedHandleMouseMove,onClick:this.handleClick},g,u("span",{class:`${t}-cascader-option__label`},l?l(this.tmNode.rawNode,this.checked):this.label),w)}}),Zt=se({name:"CascaderSubmenu",props:{depth:{type:Number,required:!0},tmNodes:{type:Array,required:!0}},setup(){const{virtualScrollRef:t,mergedClsPrefixRef:r,mergedThemeRef:l,optionHeightRef:a}=Ne(ve),h=C(null),g=C(null),w={scroll(v,b){var O,x;t.value?(O=g.value)===null||O===void 0||O.scrollTo({index:v}):(x=h.value)===null||x===void 0||x.scrollTo({index:v,elSize:b})}};return Object.assign({mergedClsPrefix:r,mergedTheme:l,scrollbarInstRef:h,vlInstRef:g,virtualScroll:t,itemSize:m(()=>he(a.value)),handleVlScroll:()=>{var v;(v=h.value)===null||v===void 0||v.sync()},getVlContainer:()=>{var v;return(v=g.value)===null||v===void 0?void 0:v.listElRef},getVlContent:()=>{var v;return(v=g.value)===null||v===void 0?void 0:v.itemsElRef}},w)},render(){const{mergedClsPrefix:t,mergedTheme:r,virtualScroll:l}=this;return u("div",{class:[l&&`${t}-cascader-submenu--virtual`,`${t}-cascader-submenu`]},u(St,{ref:"scrollbarInstRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,container:l?this.getVlContainer:void 0,content:l?this.getVlContent:void 0},{default:()=>l?u(Ct,{items:this.tmNodes,itemSize:this.itemSize,onScroll:this.handleVlScroll,showScrollbar:!1,ref:"vlInstRef"},{default:({item:a})=>u(He,{key:a.key,tmNode:a})}):this.tmNodes.map(a=>u(He,{key:a.key,tmNode:a}))}))}}),Gt=se({name:"NCascaderMenu",props:{value:[String,Number,Array],placement:{type:String,default:"bottom-start"},show:Boolean,menuModel:{type:Array,required:!0},loading:Boolean,onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0},onKeydown:{type:Function,required:!0},onMousedown:{type:Function,required:!0},onTabout:{type:Function,required:!0}},setup(t){const{localeRef:r,isMountedRef:l,mergedClsPrefixRef:a,syncCascaderMenuPosition:h,handleCascaderMenuClickOutside:g,mergedThemeRef:w,getColumnStyleRef:v}=Ne(ve),b=[],O=C(null),x=C(null);function _(){h()}Tt(x,_);function V(p){var S;const{value:{loadingRequiredMessage:N}}=r;(S=O.value)===null||S===void 0||S.showOnce(N(p))}function B(p){g(p)}function H(p){const{value:S}=x;S&&(S.contains(p.relatedTarget)||t.onFocus(p))}function q(p){const{value:S}=x;S&&(S.contains(p.relatedTarget)||t.onBlur(p))}return Object.assign({isMounted:l,mergedClsPrefix:a,selfElRef:x,submenuInstRefs:b,maskInstRef:O,mergedTheme:w,getColumnStyle:v,handleFocusin:H,handleFocusout:q,handleClickOutside:B},{scroll(p,S,N){const M=b[p];M&&M.scroll(S,N)},showErrorMessage:V})},render(){const{submenuInstRefs:t,mergedClsPrefix:r,mergedTheme:l}=this;return u(Me,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.show?qe(u("div",{tabindex:"0",ref:"selfElRef",class:`${r}-cascader-menu`,onMousedown:this.onMousedown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeydown:this.onKeydown},this.menuModel[0].length?u("div",{class:`${r}-cascader-submenu-wrapper`},this.menuModel.map((a,h)=>{var g;return u(Zt,{style:(g=this.getColumnStyle)===null||g===void 0?void 0:g.call(this,{level:h}),ref:w=>{w&&(t[h]=w)},key:h,tmNodes:a,depth:h+1})}),u(Yt,{clsPrefix:r,ref:"maskInstRef"})):u("div",{class:`${r}-cascader-menu__empty`},Je(this.$slots.empty,()=>[u(Pt,{theme:l.peers.Empty,themeOverrides:l.peerOverrides.Empty})])),Mt(this.$slots.action,a=>a&&u("div",{class:`${r}-cascader-menu-action`,"data-action":!0},a)),u(Nt,{onFocus:this.onTabout})),[[We,this.handleClickOutside,void 0,{capture:!0}]]):null})}});function Se(t){return t?t.map(r=>r.rawNode):null}function Qt(t,r,l,a){const h=[],g=[];function w(v){for(const b of v){if(b.disabled)continue;const{rawNode:O}=b;g.push(O),(b.isLeaf||!r)&&h.push({label:Le(b,a,l),value:b.key,rawNode:b.rawNode,path:Array.from(g)}),!b.isLeaf&&b.children&&w(b.children),g.pop()}}return w(t),h}function Le(t,r,l){const a=[];for(;t;)a.push(t.rawNode[l]),t=t.parent;return a.reverse().join(r)}const en=se({name:"NCascaderSelectMenu",props:{value:{type:[String,Number,Array],default:null},show:Boolean,pattern:{type:String,default:""},multiple:Boolean,tmNodes:{type:Array,default:()=>[]},filter:Function,labelField:{type:String,required:!0},separator:{type:String,required:!0}},setup(t){const{isMountedRef:r,mergedValueRef:l,mergedClsPrefixRef:a,mergedThemeRef:h,mergedCheckStrategyRef:g,slots:w,syncSelectMenuPosition:v,closeMenu:b,handleSelectMenuClickOutside:O,doUncheck:x,doCheck:_,clearPattern:V}=Ne(ve),B=C(null),H=m(()=>Qt(t.tmNodes,g.value==="child",t.labelField,t.separator)),q=m(()=>{const{filter:d}=t;if(d)return d;const{labelField:y}=t;return(P,K,W)=>W.some(j=>j[y]&&~j[y].toLowerCase().indexOf(P.toLowerCase()))}),ee=m(()=>{const{pattern:d}=t,{value:y}=q;return(d?H.value.filter(P=>y(d,P.rawNode,P.path)):H.value).map(P=>({value:P.value,label:P.label}))}),p=m(()=>Xe(ee.value,Ot("value","children")));function S(){v()}function N(d){M(d)}function M(d){if(t.multiple){const{value:y}=l;Array.isArray(y)?y.includes(d.key)?x(d.key):_(d.key):y===null&&_(d.key),V()}else _(d.key),b(!0)}function I(){var d;(d=B.value)===null||d===void 0||d.prev()}function $(){var d;(d=B.value)===null||d===void 0||d.next()}function te(){var d;if(B){const y=(d=B.value)===null||d===void 0?void 0:d.getPendingTmNode();return y&&M(y),!0}return!1}function Y(d){O(d)}return Object.assign({isMounted:r,mergedTheme:h,mergedClsPrefix:a,menuInstRef:B,selectTreeMate:p,handleResize:S,handleToggle:N,handleClickOutside:Y,cascaderSlots:w},{prev:I,next:$,enter:te})},render(){const{mergedClsPrefix:t,isMounted:r,mergedTheme:l,cascaderSlots:a}=this;return u(Me,{name:"fade-in-scale-up-transition",appear:r},{default:()=>this.show?qe(u(Ft,{ref:"menuInstRef",onResize:this.handleResize,clsPrefix:t,class:`${t}-cascader-menu`,autoPending:!0,themeOverrides:l.peerOverrides.InternalSelectMenu,theme:l.peers.InternalSelectMenu,treeMate:this.selectTreeMate,multiple:this.multiple,value:this.value,onToggle:this.handleToggle},{empty:()=>Je(a["not-found"],()=>[])}),[[We,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),tn=fe([A("cascader-menu",`
 outline: none;
 position: relative;
 margin: 4px 0;
 display: flex;
 flex-flow: column nowrap;
 border-radius: var(--n-menu-border-radius);
 overflow: hidden;
 box-shadow: var(--n-menu-box-shadow);
 color: var(--n-option-text-color);
 background-color: var(--n-menu-color);
 `,[je({transformOrigin:"inherit",duration:"0.2s"}),xe("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),A("scrollbar",`
 width: 100%;
 `),A("base-menu-mask",`
 background-color: var(--n-menu-mask-color);
 `),A("base-loading",`
 color: var(--n-loading-color);
 `),A("cascader-submenu-wrapper",`
 position: relative;
 display: flex;
 flex-wrap: nowrap;
 `),A("cascader-submenu",`
 height: var(--n-menu-height);
 min-width: var(--n-column-width);
 position: relative;
 `,[U("virtual",`
 width: var(--n-column-width);
 `),A("scrollbar-content",`
 position: relative;
 `),fe("&:first-child",`
 border-top-left-radius: var(--n-menu-border-radius);
 border-bottom-left-radius: var(--n-menu-border-radius);
 `),fe("&:last-child",`
 border-top-right-radius: var(--n-menu-border-radius);
 border-bottom-right-radius: var(--n-menu-border-radius);
 `),fe("&:not(:first-child)",`
 border-left: 1px solid var(--n-menu-divider-color);
 `)]),A("cascader-menu-action",`
 box-sizing: border-box;
 padding: 8px;
 border-top: 1px solid var(--n-menu-divider-color);
 `),A("cascader-option",`
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 padding: 0 0 0 18px;
 box-sizing: border-box;
 min-width: 182px;
 background-color: #0000;
 display: flex;
 align-items: center;
 white-space: nowrap;
 position: relative;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color 0.2s var(--n-bezier);
 `,[U("show-prefix",`
 padding-left: 0;
 `),xe("label",`
 flex: 1 0 0;
 overflow: hidden;
 text-overflow: ellipsis;
 `),xe("prefix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),xe("suffix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),A("cascader-option-icon-placeholder",`
 line-height: 0;
 position: relative;
 width: 16px;
 height: 16px;
 font-size: 16px;
 `,[A("cascader-option-icon",[U("checkmark",`
 color: var(--n-option-check-mark-color);
 `,[je({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})]),U("arrow",`
 color: var(--n-option-arrow-color);
 `)])]),U("selected",`
 color: var(--n-option-text-color-active);
 `),U("active",`
 color: var(--n-option-text-color-active);
 background-color: var(--n-option-color-hover);
 `),U("pending",`
 background-color: var(--n-option-color-hover);
 `),fe("&:hover",`
 background-color: var(--n-option-color-hover);
 `),U("disabled",`
 color: var(--n-option-text-color-disabled);
 background-color: #0000;
 cursor: not-allowed;
 `,[A("cascader-option-icon",[U("arrow",`
 color: var(--n-option-text-color-disabled);
 `)])])])]),A("cascader",`
 z-index: auto;
 position: relative;
 width: 100%;
 `)]),nn=Object.assign(Object.assign({},Ye.props),{allowCheckingNotLoaded:Boolean,to:Ce.propTo,bordered:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},value:[String,Number,Array],defaultValue:{type:[String,Number,Array],default:null},placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},disabledField:{type:String,default:"disabled"},expandTrigger:{type:String,default:"click"},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},remote:Boolean,onLoad:Function,separator:{type:String,default:" / "},filter:Function,placement:{type:String,default:"bottom-start"},cascade:{type:Boolean,default:!0},leafOnly:Boolean,showPath:{type:Boolean,default:!0},show:{type:Boolean,default:void 0},maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,menuProps:Object,filterMenuProps:Object,virtualScroll:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},valueField:{type:String,default:"value"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},renderLabel:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onBlur:Function,onFocus:Function,getColumnStyle:Function,renderPrefix:Function,renderSuffix:Function,onChange:[Function,Array]}),rn=se({name:"Cascader",props:nn,slots:Object,setup(t,{slots:r}){const{mergedBorderedRef:l,mergedClsPrefixRef:a,namespaceRef:h,inlineThemeDisabled:g}=_t(t),w=Ye("Cascader","-cascader",tn,Dt,t,a),{localeRef:v}=Bt("Cascader"),b=C(t.defaultValue),O=m(()=>t.value),x=Ee(O,b),_=m(()=>t.leafOnly?"child":t.checkStrategy),V=C(""),B=It(t),{mergedSizeRef:H,mergedDisabledRef:q,mergedStatusRef:ee}=B,p=C(null),S=C(null),N=C(null),M=C(null),I=C(null),$=C(new Set),te=C(null),Y=C(null),me=Ce(t),d=C(!1),y=e=>{$.value.add(e)},P=e=>{$.value.delete(e)},K=m(()=>{const{valueField:e,childrenField:n,disabledField:o}=t;return Xe(t.options,{getDisabled(c){return c[o]},getKey(c){return c[e]},getChildren(c){return c[n]}})}),W=m(()=>{const{cascade:e,multiple:n}=t;return n&&Array.isArray(x.value)?K.value.getCheckedKeys(x.value,{cascade:e,allowNotLoaded:t.allowCheckingNotLoaded}):{checkedKeys:[],indeterminateKeys:[]}}),j=m(()=>W.value.checkedKeys),ne=m(()=>W.value.indeterminateKeys),Te=m(()=>{const{treeNodePath:e,treeNode:n}=K.value.getPath(I.value);let o;return n===null?o=[K.value.treeNodes]:(o=e.map(c=>c.siblings),!n.isLeaf&&!$.value.has(n.key)&&n.children&&o.push(n.children)),o}),Pe=m(()=>{const{keyPath:e}=K.value.getPath(I.value);return e}),J=m(()=>w.value.self.optionHeight);At(t.options)&&Ue(t.options,(e,n)=>{e!==n&&(I.value=null,M.value=null)});const le=C(!1);function ae(e){const{onUpdateShow:n,"onUpdate:show":o}=t;n&&Q(n,e),o&&Q(o,e),le.value=e}function D(e,n,o){const{onUpdateValue:c,"onUpdate:value":i,onChange:k}=t,{nTriggerFormInput:s,nTriggerFormChange:R}=B;c&&Q(c,e,n,o),i&&Q(i,e,n,o),k&&Q(k,e,n,o),b.value=e,s(),R()}function X(e){M.value=e}function Z(e){I.value=e}function oe(e){const{value:{getNode:n}}=K;return e.map(o=>{var c;return((c=n(o))===null||c===void 0?void 0:c.rawNode)||null})}function ge(e){var n;const{cascade:o,multiple:c,filterable:i}=t,{value:{check:k,getNode:s,getPath:R}}=K;if(c)try{const{checkedKeys:f}=k(e,W.value.checkedKeys,{cascade:o,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded});D(f,oe(f),f.map(ie=>{var de;return Se((de=R(ie))===null||de===void 0?void 0:de.treeNodePath)})),i&&Fe(),M.value=e,I.value=e}catch(f){if(f instanceof Ut){if(p.value){const ie=s(e);ie!==null&&p.value.showErrorMessage(ie.rawNode[t.labelField])}}else throw f}else if(_.value==="child"){const f=s(e);if(f!=null&&f.isLeaf)D(e,f.rawNode,Se(R(e).treeNodePath));else return!1}else{const f=s(e);D(e,(f==null?void 0:f.rawNode)||null,Se((n=R(e))===null||n===void 0?void 0:n.treeNodePath))}return!0}function ue(e){const{cascade:n,multiple:o}=t;if(o){const{value:{uncheck:c,getNode:i,getPath:k}}=K,{checkedKeys:s}=c(e,W.value.checkedKeys,{cascade:n,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded});D(s,s.map(R=>{var f;return((f=i(R))===null||f===void 0?void 0:f.rawNode)||null}),s.map(R=>{var f;return Se((f=k(R))===null||f===void 0?void 0:f.treeNodePath)})),M.value=e,I.value=e}}const pe=m(()=>{if(t.multiple){const{showPath:e,separator:n,labelField:o,cascade:c}=t,{getCheckedKeys:i,getNode:k}=K.value;return i(j.value,{cascade:c,checkStrategy:_.value,allowNotLoaded:t.allowCheckingNotLoaded}).checkedKeys.map(R=>{const f=k(R);return f===null?{label:String(R),value:R}:{label:e?Le(f,n,o):f.rawNode[o],value:f.key}})}else return[]}),T=m(()=>{const{multiple:e,showPath:n,separator:o,labelField:c}=t,{value:i}=x;if(!e&&!Array.isArray(i)){const{getNode:k}=K.value;if(i===null)return null;const s=k(i);return s===null?{label:String(i),value:i}:{label:n?Le(s,o,c):s.rawNode[c],value:s.key}}else return null}),E=z(t,"show"),L=Ee(E,le),be=m(()=>{const{placeholder:e}=t;return e!==void 0?e:v.value.placeholder}),F=m(()=>!!(t.filterable&&V.value));Ue(L,e=>{if(!e||t.multiple)return;const{value:n}=x;!Array.isArray(n)&&n!==null?(M.value=n,I.value=n,Ht(()=>{var o;if(!L.value)return;const{value:c}=I;if(x.value!==null){const i=K.value.getNode(c);i&&((o=p.value)===null||o===void 0||o.scroll(i.level,i.index,he(J.value)))}})):(M.value=null,I.value=null)},{immediate:!0});function ye(e){const{onBlur:n}=t,{nTriggerFormBlur:o}=B;n&&Q(n,e),o()}function we(e){const{onFocus:n}=t,{nTriggerFormFocus:o}=B;n&&Q(n,e),o()}function Fe(){var e;(e=N.value)===null||e===void 0||e.focusInput()}function Ze(){var e;(e=N.value)===null||e===void 0||e.focus()}function ke(){q.value||(V.value="",ae(!0),t.filterable&&Fe())}function G(e=!1){e&&Ze(),ae(!1),V.value=""}function _e(e){var n;F.value||L.value&&(!((n=N.value)===null||n===void 0)&&n.$el.contains(qt(e))||G())}function Ge(e){F.value&&_e(e)}function Be(){t.clearFilterAfterSelect&&(V.value="")}function Re(e){var n,o,c;const{value:i}=M,{value:k}=K;switch(e){case"prev":if(i!==null){const s=k.getPrev(i,{loop:!0});s!==null&&(X(s.key),(n=p.value)===null||n===void 0||n.scroll(s.level,s.index,he(J.value)))}break;case"next":if(i===null){const s=k.getFirstAvailableNode();s!==null&&(X(s.key),(o=p.value)===null||o===void 0||o.scroll(s.level,s.index,he(J.value)))}else{const s=k.getNext(i,{loop:!0});s!==null&&(X(s.key),(c=p.value)===null||c===void 0||c.scroll(s.level,s.index,he(J.value)))}break;case"child":if(i!==null){const s=k.getNode(i);if(s!==null)if(s.shallowLoaded){const R=k.getChild(i);R!==null&&(Z(i),X(R.key))}else{const{value:R}=$;if(!R.has(i)){y(i),Z(i);const{onLoad:f}=t;f&&f(s.rawNode).then(()=>{P(i)}).catch(()=>{P(i)})}}}break;case"parent":if(i!==null){const s=k.getParent(i);if(s!==null){X(s.key);const R=s.getParent();Z(R===null?null:R.key)}}break}}function Ie(e){var n,o;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":if(t.filterable&&L.value)break;e.preventDefault();break}if(!Ke(e,"action"))switch(e.key){case" ":if(t.filterable)return;case"Enter":if(!L.value)ke();else{const{value:c}=F,{value:i}=M;if(c)S.value&&S.value.enter()&&Be();else if(i!==null)if(j.value.includes(i)||ne.value.includes(i))ue(i);else{const k=ge(i);!t.multiple&&k&&G(!0)}}break;case"ArrowUp":e.preventDefault(),L.value&&(F.value?(n=S.value)===null||n===void 0||n.prev():Re("prev"));break;case"ArrowDown":e.preventDefault(),L.value?F.value?(o=S.value)===null||o===void 0||o.next():Re("next"):ke();break;case"ArrowLeft":e.preventDefault(),L.value&&!F.value&&Re("parent");break;case"ArrowRight":e.preventDefault(),L.value&&!F.value&&Re("child");break;case"Escape":L.value&&(Et(e),G(!0))}}function Qe(e){Ie(e)}function et(e){e.stopPropagation(),t.multiple?D([],[],[]):D(null,null,null)}function tt(e){var n;!((n=p.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(d.value=!0,we(e))}function nt(e){var n;!((n=p.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(d.value=!1,ye(e),G())}function lt(e){var n;!((n=N.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(d.value=!0,we(e))}function at(e){var n;!((n=N.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(d.value=!1,ye(e))}function ot(e){Ke(e,"action")||t.multiple&&t.filter&&(e.preventDefault(),Fe())}function rt(){G(!0)}function it(){t.filterable?ke():L.value?G(!0):ke()}function st(e){V.value=e.target.value}function ut(e){const{multiple:n}=t,{value:o}=x;n&&Array.isArray(o)&&e.value!==void 0?ue(e.value):D(null,null,null)}function Ae(){var e;(e=te.value)===null||e===void 0||e.syncPosition()}function ze(){var e;(e=Y.value)===null||e===void 0||e.syncPosition()}function dt(){L.value&&(F.value?Ae():ze())}const Oe=m(()=>!!(t.multiple&&t.cascade||_.value!=="child"));zt(ve,{slots:r,mergedClsPrefixRef:a,mergedThemeRef:w,mergedValueRef:x,checkedKeysRef:j,indeterminateKeysRef:ne,hoverKeyPathRef:Pe,mergedCheckStrategyRef:_,showCheckboxRef:Oe,cascadeRef:z(t,"cascade"),multipleRef:z(t,"multiple"),keyboardKeyRef:M,hoverKeyRef:I,remoteRef:z(t,"remote"),loadingKeySetRef:$,expandTriggerRef:z(t,"expandTrigger"),isMountedRef:Vt(),onLoadRef:z(t,"onLoad"),virtualScrollRef:z(t,"virtualScroll"),optionHeightRef:J,localeRef:v,labelFieldRef:z(t,"labelField"),renderLabelRef:z(t,"renderLabel"),getColumnStyleRef:z(t,"getColumnStyle"),renderPrefixRef:z(t,"renderPrefix"),renderSuffixRef:z(t,"renderSuffix"),syncCascaderMenuPosition:ze,syncSelectMenuPosition:Ae,updateKeyboardKey:X,updateHoverKey:Z,addLoadingKey:y,deleteLoadingKey:P,doCheck:ge,doUncheck:ue,closeMenu:G,handleSelectMenuClickOutside:Ge,handleCascaderMenuClickOutside:_e,clearPattern:Be});const ct={focus:()=>{var e;(e=N.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=N.value)===null||e===void 0||e.blur()},getCheckedData:()=>{if(Oe.value){const e=j.value;return{keys:e,options:oe(e)}}return{keys:[],options:[]}},getIndeterminateData:()=>{if(Oe.value){const e=ne.value;return{keys:e,options:oe(e)}}return{keys:[],options:[]}}},Ve=m(()=>{const{self:{optionArrowColor:e,optionTextColor:n,optionTextColorActive:o,optionTextColorDisabled:c,optionCheckMarkColor:i,menuColor:k,menuBoxShadow:s,menuDividerColor:R,menuBorderRadius:f,menuHeight:ie,optionColorHover:de,optionHeight:ft,optionFontSize:ht,loadingColor:vt,columnWidth:mt},common:{cubicBezierEaseInOut:gt}}=w.value;return{"--n-bezier":gt,"--n-menu-border-radius":f,"--n-menu-box-shadow":s,"--n-menu-height":ie,"--n-column-width":mt,"--n-menu-color":k,"--n-menu-divider-color":R,"--n-option-height":ft,"--n-option-font-size":ht,"--n-option-text-color":n,"--n-option-text-color-disabled":c,"--n-option-text-color-active":o,"--n-option-color-hover":de,"--n-option-check-mark-color":i,"--n-option-arrow-color":e,"--n-menu-mask-color":$t(k,{alpha:.75}),"--n-loading-color":vt}}),re=g?jt("cascader",void 0,Ve,t):void 0;return Object.assign(Object.assign({},ct),{handleTriggerResize:dt,mergedStatus:ee,selectMenuFollowerRef:te,cascaderMenuFollowerRef:Y,triggerInstRef:N,selectMenuInstRef:S,cascaderMenuInstRef:p,mergedBordered:l,mergedClsPrefix:a,namespace:h,mergedValue:x,mergedShow:L,showSelectMenu:F,pattern:V,treeMate:K,mergedSize:H,mergedDisabled:q,localizedPlaceholder:be,selectedOption:T,selectedOptions:pe,adjustedTo:me,menuModel:Te,handleMenuTabout:rt,handleMenuFocus:lt,handleMenuBlur:at,handleMenuKeydown:Qe,handleMenuMousedown:ot,handleTriggerFocus:tt,handleTriggerBlur:nt,handleTriggerClick:it,handleClear:et,handleDeleteOption:ut,handlePatternInput:st,handleKeydown:Ie,focused:d,optionHeight:J,mergedTheme:w,cssVars:g?void 0:Ve,themeClass:re==null?void 0:re.themeClass,onRender:re==null?void 0:re.onRender})},render(){const{mergedClsPrefix:t}=this;return u("div",{class:`${t}-cascader`},u(Kt,null,{default:()=>[u(Lt,null,{default:()=>u(Jt,{onResize:this.handleTriggerResize,ref:"triggerInstRef",status:this.mergedStatus,clsPrefix:t,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,focused:this.focused,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onClear:this.handleClear,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onKeydown:this.handleKeydown},{arrow:()=>{var r,l;return(l=(r=this.$slots).arrow)===null||l===void 0?void 0:l.call(r)}})}),u(De,{key:"cascaderMenu",ref:"cascaderMenuFollowerRef",show:this.mergedShow&&!this.showSelectMenu,containerClass:this.namespace,placement:this.placement,width:this.options.length?void 0:"target",teleportDisabled:this.adjustedTo===Ce.tdkey,to:this.adjustedTo},{default:()=>{var r;(r=this.onRender)===null||r===void 0||r.call(this);const{menuProps:l}=this;return u(Gt,Object.assign({},l,{ref:"cascaderMenuInstRef",class:[this.themeClass,l==null?void 0:l.class],value:this.mergedValue,show:this.mergedShow&&!this.showSelectMenu,menuModel:this.menuModel,style:[this.cssVars,l==null?void 0:l.style],onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onMousedown:this.handleMenuMousedown,onTabout:this.handleMenuTabout}),{action:()=>{var a,h;return(h=(a=this.$slots).action)===null||h===void 0?void 0:h.call(a)},empty:()=>{var a,h;return(h=(a=this.$slots).empty)===null||h===void 0?void 0:h.call(a)}})}}),u(De,{key:"selectMenu",ref:"selectMenuFollowerRef",show:this.mergedShow&&this.showSelectMenu,containerClass:this.namespace,width:"target",placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ce.tdkey},{default:()=>{var r;(r=this.onRender)===null||r===void 0||r.call(this);const{filterMenuProps:l}=this;return u(en,Object.assign({},l,{ref:"selectMenuInstRef",class:[this.themeClass,l==null?void 0:l.class],value:this.mergedValue,show:this.mergedShow&&this.showSelectMenu,pattern:this.pattern,multiple:this.multiple,tmNodes:this.treeMate.treeNodes,filter:this.filter,labelField:this.labelField,separator:this.separator,style:[this.cssVars,l==null?void 0:l.style]}))}})]}))}});export{rn as N};
