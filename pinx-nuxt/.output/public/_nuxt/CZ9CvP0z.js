import{_ as y}from"./CXka4_Or.js";import{N as d}from"./Cx9GD3Vn.js";import{q as l,y as N,g as T,o as h,w as o,e as r,u as i,B as p,b as m}from"./CxJvYK31.js";import{N as v}from"./DQ25T0hU.js";import"./BRY1QPg9.js";import"./DMiUpVhH.js";import"./Bk_rJcZu.js";import"./C9eE4UE3.js";import"./DyOxm0pg.js";import"./BuExw2kF.js";import"./jV4_jsbP.js";import"./WHZHfYoQ.js";import"./OXOuhaQm.js";import"./DjswEDd8.js";import"./DAsOZhKZ.js";import"./BcvzFAvs.js";import"./NFmq_FRQ.js";import"./HS-i9Zhe.js";import"./BMwUx3Op.js";import"./B5nUqDz3.js";import"./CYXyEcsu.js";import"./B6gIYU75.js";import"./Be2Vs2B1.js";import"./CxN_fpha.js";import"./hVEDjhk5.js";import"./BDXvX1xU.js";import"./BjyUHhTu.js";import"./C2161hUv.js";const Z={__name:"Sorting",setup(S){const n=l(null),u=l([]),f=l({pageSize:10}),_=[{title:"Título",key:"title"},{title:"Inicio",key:"start"},{title:"Fin",key:"end"},{title:"Excursión",key:"excursion"}];function k(){n.value.sort("title","ascend")}function x(){n.value.filter(null)}function g(){n.value.sort(null)}return N(async()=>{try{const e=localStorage.getItem("auth_token");if(!e)throw new Error("No autenticado");const t=await $fetch("https://admin.triplotrip.com/api/users/me",{headers:{Authorization:`Bearer ${e}`}}),s=await $fetch(`https://admin.triplotrip.com/api/events?filters[user][documentId][$eq]=${t.documentId}&populate=*`,{headers:{Authorization:`Bearer ${e}`}});u.value=(s.data||[]).map(a=>{var c;return{key:a.id,title:a.Title,start:a.Start,end:a.End,excursion:((c=a.excursion)==null?void 0:c.Nombre)||"Sin info"}})}catch(e){console.error("Error al cargar eventos:",e)}}),(e,t)=>{const s=y;return h(),T(s,{title:"Próximas Reservas"},{default:o(()=>[r(i(d),{vertical:"",size:12},{default:o(()=>[r(i(d),null,{default:o(()=>[r(i(p),{onClick:k},{default:o(()=>t[0]||(t[0]=[m("Ordenar por Título (Ascendente)")])),_:1,__:[0]}),r(i(p),{onClick:x},{default:o(()=>t[1]||(t[1]=[m("Limpiar Filtros")])),_:1,__:[1]}),r(i(p),{onClick:g},{default:o(()=>t[2]||(t[2]=[m("Limpiar Ordenamiento")])),_:1,__:[2]})]),_:1}),r(i(v),{ref_key:"dataTableInst",ref:n,columns:_,data:u.value,pagination:f.value},null,8,["data","pagination"])]),_:1})]),_:1})}}};export{Z as default};
