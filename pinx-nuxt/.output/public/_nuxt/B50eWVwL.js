import{aB as ee,az as V,bv as te,d as ne,ac as u,c3 as ae,c4 as le,dp as oe,c5 as se,bZ as R,bg as re,k as ie,c6 as ue,aH as de,b7 as ce,s as m,aJ as me,aI as A,aL as fe,by as he,q as v,c7 as ve,aV as f,dq as pe,bX as ge,aU as be}from"./BboPWEKj.js";import{c as ye}from"./DxB_AnUS.js";import{N as Se}from"./DawznoV1.js";import{N as Te}from"./ChA4gcHA.js";const Ce=ee([V("auto-complete",`
 z-index: auto;
 position: relative;
 display: inline-flex;
 width: 100%;
 `),V("auto-complete-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[te({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]);function Fe(t){return t.map(_)}function _(t){var o,a;return typeof t=="string"?{label:t,value:t}:t.type==="group"?{type:"group",label:(o=t.label)!==null&&o!==void 0?o:t.name,value:(a=t.value)!==null&&a!==void 0?a:t.name,key:t.key||t.name,children:t.children.map(l=>_(l))}:t}const Re=Object.assign(Object.assign({},A.props),{to:R.propTo,menuProps:Object,append:Boolean,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,showEmpty:Boolean,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),xe=ne({name:"AutoComplete",props:Re,slots:Object,setup(t){const{mergedBorderedRef:o,namespaceRef:a,mergedClsPrefixRef:s,inlineThemeDisabled:l}=de(t),h=ce(t),{mergedSizeRef:z,mergedDisabledRef:M,mergedStatusRef:P}=h,S=m(null),p=m(null),T=m(t.defaultValue),k=be(t,"value"),g=me(k,T),d=m(!1),C=m(!1),w=A("AutoComplete","-auto-complete",Ce,pe,t,s),B=v(()=>Fe(t.options)),N=v(()=>{const{getShow:e}=t;return e?e(g.value||""):!!g.value}),E=v(()=>N.value&&d.value&&(t.showEmpty?!0:!!B.value.length)),j=v(()=>ge(B.value,ye("value","children")));function b(e){const{"onUpdate:value":n,onUpdateValue:r,onInput:i}=t,{nTriggerFormInput:y,nTriggerFormChange:Y}=h;r&&f(r,e),n&&f(n,e),i&&f(i,e),T.value=e,y(),Y()}function D(e){const{onSelect:n}=t,{nTriggerFormInput:r,nTriggerFormChange:i}=h;n&&f(n,e),r(),i()}function U(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=h;n&&f(n,e),r()}function $(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=h;n&&f(n,e),r()}function L(){C.value=!0}function K(){window.setTimeout(()=>{C.value=!1},0)}function q(e){var n,r,i;switch(e.key){case"Enter":if(!C.value){const y=(n=p.value)===null||n===void 0?void 0:n.getPendingTmNode();y&&(I(y.rawNode),e.preventDefault())}break;case"ArrowDown":(r=p.value)===null||r===void 0||r.next();break;case"ArrowUp":(i=p.value)===null||i===void 0||i.prev();break}}function I(e){e?.value!==void 0&&(D(e.value),t.clearAfterSelect?b(null):e.label!==void 0&&b(t.append?`${g.value}${e.label}`:e.label),d.value=!1,t.blurAfterSelect&&Q())}function H(){b(null)}function J(e){d.value=!0,$(e)}function W(e){d.value=!1,U(e)}function X(e){d.value=!0,b(e)}function Z(e){I(e.rawNode)}function G(e){var n;!((n=S.value)===null||n===void 0)&&n.contains(ve(e))||(d.value=!1)}function Q(){var e,n;!((e=S.value)===null||e===void 0)&&e.contains(document.activeElement)&&((n=document.activeElement)===null||n===void 0||n.blur())}const O=v(()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:n}}=w.value;return{"--n-menu-box-shadow":n,"--n-bezier":e}}),c=l?fe("auto-complete",void 0,O,t):void 0,F=m(null),x={focus:()=>{var e;(e=F.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=F.value)===null||e===void 0||e.blur()}};return{focus:x.focus,blur:x.blur,inputInstRef:F,uncontrolledValue:T,mergedValue:g,isMounted:he(),adjustedTo:R(t),menuInstRef:p,triggerElRef:S,treeMate:j,mergedSize:z,mergedDisabled:M,active:E,mergedStatus:P,handleClear:H,handleFocus:J,handleBlur:W,handleInput:X,handleToggle:Z,handleClickOutsideMenu:G,handleCompositionStart:L,handleCompositionEnd:K,handleKeyDown:q,mergedTheme:w,cssVars:l?void 0:O,themeClass:c?.themeClass,onRender:c?.onRender,mergedBordered:o,namespace:a,mergedClsPrefix:s}},render(){const{mergedClsPrefix:t}=this;return u("div",{class:`${t}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},u(ae,null,{default:()=>[u(le,null,{default:()=>{const o=this.$slots.default;if(o)return oe("default",o,{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:a}=this;return u(Se,{ref:"inputInstRef",status:this.mergedStatus,theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var s,l;return(l=(s=this.$slots).suffix)===null||l===void 0?void 0:l.call(s)},prefix:()=>{var s,l;return(l=(s=this.$slots).prefix)===null||l===void 0?void 0:l.call(s)}})}}),u(se,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===R.tdkey,placement:this.placement,width:"target"},{default:()=>u(re,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var o;if((o=this.onRender)===null||o===void 0||o.call(this),!this.active)return null;const{menuProps:a}=this;return ie(u(Te,Object.assign({},a,{clsPrefix:t,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${t}-auto-complete-menu`,this.themeClass,a?.class],style:[a?.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle}),{empty:()=>{var s,l;return(l=(s=this.$slots).empty)===null||l===void 0?void 0:l.call(s)}}),[[ue,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}});export{xe as N};
