import{ar as A,ay as U,bb as B,d as S,ab as y,as as I,aG as x,aH as P,c9 as j,p as O,bW as V,a1 as F,aL as L,aP as K,bQ as b,aU as f,J as C,ax as k,bO as z,q as D,ca as H,cb as E,cc as T,aK as q}from"./BF1SYJr_.js";import{a as G}from"./BMwUx3Op.js";import{N as J,m as N}from"./CpPhwJ1c.js";const $=A("n-popselect"),Q=U("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),w={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},R=B(w),W=S({name:"PopselectPanel",props:w,setup(t){const o=I($),{mergedClsPrefixRef:e,inlineThemeDisabled:l}=x(t),m=P("Popselect","-pop-select",Q,j,o.props,e),h=O(()=>V(t.options,G("value","children")));function p(s,d){const{onUpdateValue:i,"onUpdate:value":c,onChange:u}=t;i&&f(i,s,d),c&&f(c,s,d),u&&f(u,s,d)}function a(s){r(s.key)}function n(s){!b(s,"action")&&!b(s,"empty")&&!b(s,"header")&&s.preventDefault()}function r(s){const{value:{getNode:d}}=h;if(t.multiple)if(Array.isArray(t.value)){const i=[],c=[];let u=!0;t.value.forEach(_=>{if(_===s){u=!1;return}const g=d(_);g&&(i.push(g.key),c.push(g.rawNode))}),u&&(i.push(s),c.push(d(s).rawNode)),p(i,c)}else{const i=d(s);i&&p([s],[i.rawNode])}else if(t.value===s&&t.cancelable)p(null,null);else{const i=d(s);i&&p(s,i.rawNode);const{"onUpdate:show":c,onUpdateShow:u}=o.props;c&&f(c,!1),u&&f(u,!1),o.setShow(!1)}C(()=>{o.syncPosition()})}F(L(t,"options"),()=>{C(()=>{o.syncPosition()})});const M=O(()=>{const{self:{menuBoxShadow:s}}=m.value;return{"--n-menu-box-shadow":s}}),v=l?K("select",void 0,M,o.props):void 0;return{mergedTheme:o.mergedThemeRef,mergedClsPrefix:e,treeMate:h,handleToggle:a,handleMenuMousedown:n,cssVars:l?void 0:M,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var t;return(t=this.onRender)===null||t===void 0||t.call(this),y(J,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var o,e;return((e=(o=this.$slots).header)===null||e===void 0?void 0:e.call(o))||[]},action:()=>{var o,e;return((e=(o=this.$slots).action)===null||e===void 0?void 0:e.call(o))||[]},empty:()=>{var o,e;return((e=(o=this.$slots).empty)===null||e===void 0?void 0:e.call(o))||[]}})}}),X=Object.assign(Object.assign(Object.assign(Object.assign({},P.props),k(T,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},T.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),w),se=S({name:"Popselect",props:X,slots:Object,inheritAttrs:!1,__popover__:!0,setup(t){const{mergedClsPrefixRef:o}=x(t),e=P("Popselect","-popselect",void 0,j,t,o),l=D(null);function m(){var a;(a=l.value)===null||a===void 0||a.syncPosition()}function h(a){var n;(n=l.value)===null||n===void 0||n.setShow(a)}return q($,{props:t,mergedThemeRef:e,syncPosition:m,setShow:h}),Object.assign(Object.assign({},{syncPosition:m,setShow:h}),{popoverInstRef:l,mergedTheme:e})},render(){const{mergedTheme:t}=this,o={theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(e,l,m,h,p)=>{const{$attrs:a}=this;return y(W,Object.assign({},a,{class:[a.class,e],style:[a.style,...m]},H(this.$props,R),{ref:E(l),onMouseenter:N([h,a.onMouseenter]),onMouseleave:N([p,a.onMouseleave])}),{header:()=>{var n,r;return(r=(n=this.$slots).header)===null||r===void 0?void 0:r.call(n)},action:()=>{var n,r;return(r=(n=this.$slots).action)===null||r===void 0?void 0:r.call(n)},empty:()=>{var n,r;return(r=(n=this.$slots).empty)===null||r===void 0?void 0:r.call(n)}})}};return y(z,Object.assign({},k(this.$props,R),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var e,l;return(l=(e=this.$slots).default)===null||l===void 0?void 0:l.call(e)}})}});export{se as N};
