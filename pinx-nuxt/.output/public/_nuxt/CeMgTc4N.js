import{d as gn,aC as Ua,e as _t,q as jt,F as Po,y as zo,ae as Bo,ax as Oo,Y as Fo,g as Qa,o as ti,u as er,f as Ro,w as Ya,c as Do,a as Sn,b as $o,_ as Ho,N as Wo}from"./jbHnS89g.js";import{Y as Mn,f as jo,c as qo,P as Ze,b as Xe,N as Vo,e as Ko,k as Ga,a as Uo,E as Qo,h as Yo,g as Go,Z as Ja,r as Jo,I as Zo,K as Xo,_ as el,$ as ni,d as ri,m as dn,i as ii,S as Za,s as tl,u as Xa,a0 as nl,W as ga,V as ka,R as rl,a1 as il,F as al}from"./D__n0o_4.js";const ai=Symbol("editorInfoCtxKey");function sl(){const{dom:e,loading:n,editor:t,editorFactory:r}=Ua(ai,{}),i=jt();return zo(()=>{if(!e.value)return;const a=r.value(e.value);a&&(n.value=!0,i.value=a,a.create().then(s=>{t.value=s}).finally(()=>{n.value=!1}).catch(console.error))}),Bo(()=>{var a;(a=i.value)==null||a.destroy().catch(console.error)}),e}const ol=gn({name:"Milkdown",setup:()=>{const e=sl();return()=>_t("div",{"data-milkdown-root":!0,ref:e},null)}}),ll=gn({name:"MilkdownProvider",setup:(e,{slots:n})=>{const t=jt(null),r=jt(void 0),i=jt(void 0),a=jt(!0);return Oo(ai,{loading:a,dom:t,editor:i,editorFactory:r}),()=>{var s;return _t(Po,null,[(s=n.default)==null?void 0:s.call(n)])}}});function ul(e){const{editorFactory:n,loading:t,editor:r}=Ua(ai);return n.value=e,{loading:t,get:()=>r.value}}var ue=(e=>(e.docTypeError="docTypeError",e.contextNotFound="contextNotFound",e.timerNotFound="timerNotFound",e.ctxCallOutOfScope="ctxCallOutOfScope",e.createNodeInParserFail="createNodeInParserFail",e.stackOverFlow="stackOverFlow",e.parserMatchError="parserMatchError",e.serializerMatchError="serializerMatchError",e.getAtomFromSchemaFail="getAtomFromSchemaFail",e.expectDomTypeError="expectDomTypeError",e.callCommandBeforeEditorView="callCommandBeforeEditorView",e.missingRootElement="missingRootElement",e.missingNodeInSchema="missingNodeInSchema",e.missingMarkInSchema="missingMarkInSchema",e.ctxNotBind="ctxNotBind",e.missingYjsDoc="missingYjsDoc",e))(ue||{});class pe extends Error{constructor(n,t){super(t),this.name="MilkdownError",this.code=n}}const cl=(e,n)=>typeof n=="function"?"[Function]":n,ir=e=>JSON.stringify(e,cl);function hl(e){return new pe(ue.docTypeError,`Doc type error, unsupported type: ${ir(e)}`)}function pl(e){return new pe(ue.contextNotFound,`Context "${e}" not found, do you forget to inject it?`)}function dl(e){return new pe(ue.timerNotFound,`Timer "${e}" not found, do you forget to record it?`)}function si(){return new pe(ue.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function fl(e,n,t){const i=`Cannot create node for ${"name"in e?e.name:e}`,a=c=>{if(c==null)return"null";if(Array.isArray(c))return`[${c.map(a).join(", ")}]`;if(typeof c=="object")return"toJSON"in c&&typeof c.toJSON=="function"?JSON.stringify(c.toJSON()):"spec"in c?JSON.stringify(c.spec):JSON.stringify(c);if(typeof c=="string"||typeof c=="number"||typeof c=="boolean")return JSON.stringify(c);if(typeof c=="function")return`[Function: ${c.name||"anonymous"}]`;try{return String(c)}catch{return"[Unserializable]"}},s=["[Description]",i],o=["[Attributes]",n],u=["[Content]",(t??[]).map(c=>c?typeof c=="object"&&"type"in c?`${c}`:a(c):"null")],l=[s,o,u].reduce((c,[h,d])=>{const p=`${h}: ${a(d)}.`;return c.concat(p)},[]);return new pe(ue.createNodeInParserFail,l.join(`
`))}function es(){return new pe(ue.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function ml(e){return new pe(ue.parserMatchError,`Cannot match target parser for node: ${ir(e)}.`)}function gl(e){return new pe(ue.serializerMatchError,`Cannot match target serializer for node: ${ir(e)}.`)}function dt(e){return new pe(ue.expectDomTypeError,`Expect to be a dom, but get: ${ir(e)}.`)}function pr(){return new pe(ue.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function kl(e){return new pe(ue.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${e}" in schema.`)}function yl(e){return new pe(ue.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${e}" in schema.`)}var ts=e=>{throw TypeError(e)},ns=(e,n,t)=>n.has(e)||ts("Cannot "+t),S=(e,n,t)=>(ns(e,n,"read from private field"),t?t.call(e):n.get(e)),Y=(e,n,t)=>n.has(e)?ts("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),B=(e,n,t,r)=>(ns(e,n,"write to private field"),n.set(e,t),t),ve,$e,qt,_n,Nn,En,xt,Vt,ot,Kt,Ut,Qt,He,We,Tn,ke,bt,lt,Yt,je,Gt,An;class rs{constructor(){this.sliceMap=new Map,this.get=n=>{const t=typeof n=="string"?[...this.sliceMap.values()].find(r=>r.type.name===n):this.sliceMap.get(n.id);if(!t){const r=typeof n=="string"?n:n.name;throw pl(r)}return t},this.remove=n=>{const t=typeof n=="string"?[...this.sliceMap.values()].find(r=>r.type.name===n):this.sliceMap.get(n.id);t&&this.sliceMap.delete(t.type.id)},this.has=n=>typeof n=="string"?[...this.sliceMap.values()].some(t=>t.type.name===n):this.sliceMap.has(n.id)}}class wl{constructor(n,t,r){Y(this,ve),Y(this,$e),Y(this,qt),B(this,ve,[]),B(this,qt,()=>{S(this,ve).forEach(i=>i(S(this,$e)))}),this.set=i=>{B(this,$e,i),S(this,qt).call(this)},this.get=()=>S(this,$e),this.update=i=>{B(this,$e,i(S(this,$e))),S(this,qt).call(this)},this.type=r,B(this,$e,t),n.set(r.id,this)}on(n){return S(this,ve).push(n),()=>{B(this,ve,S(this,ve).filter(t=>t!==n))}}once(n){const t=this.on(r=>{n(r),t()});return t}off(n){B(this,ve,S(this,ve).filter(t=>t!==n))}offAll(){B(this,ve,[])}}ve=new WeakMap;$e=new WeakMap;qt=new WeakMap;class xl{constructor(n,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=n,this._typeInfo=()=>{throw si()}}create(n,t=this._defaultValue){return new wl(n,t,this)}}const F=(e,n)=>new xl(e,n);class bl{constructor(n,t,r){Y(this,_n),Y(this,Nn),Y(this,En),Y(this,xt),Y(this,Vt),Y(this,ot),Y(this,Kt),Y(this,Ut),Y(this,Qt),B(this,xt,new Set),B(this,Vt,new Set),B(this,ot,new Map),B(this,Kt,new Map),this.read=()=>({metadata:S(this,_n),injectedSlices:[...S(this,xt)].map(i=>({name:typeof i=="string"?i:i.name,value:S(this,Ut).call(this,i)})),consumedSlices:[...S(this,Vt)].map(i=>({name:typeof i=="string"?i:i.name,value:S(this,Ut).call(this,i)})),recordedTimers:[...S(this,ot)].map(([i,{duration:a}])=>({name:i.name,duration:a,status:S(this,Qt).call(this,i)})),waitTimers:[...S(this,Kt)].map(([i,{duration:a}])=>({name:i.name,duration:a,status:S(this,Qt).call(this,i)}))}),this.onRecord=i=>{S(this,ot).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{S(this,ot).delete(i)},this.onDone=i=>{const a=S(this,ot).get(i);a&&(a.duration=Date.now()-a.start)},this.onWait=(i,a)=>{const s=Date.now();a.finally(()=>{S(this,Kt).set(i,{duration:Date.now()-s})}).catch(console.error)},this.onInject=i=>{S(this,xt).add(i)},this.onRemove=i=>{S(this,xt).delete(i)},this.onUse=i=>{S(this,Vt).add(i)},B(this,Ut,i=>S(this,Nn).get(i).get()),B(this,Qt,i=>S(this,En).get(i).status),B(this,Nn,n),B(this,En,t),B(this,_n,r)}}_n=new WeakMap;Nn=new WeakMap;En=new WeakMap;xt=new WeakMap;Vt=new WeakMap;ot=new WeakMap;Kt=new WeakMap;Ut=new WeakMap;Qt=new WeakMap;const Cl=class is{constructor(n,t,r){Y(this,He),Y(this,We),Y(this,Tn),Y(this,ke),this.produce=i=>i&&Object.keys(i).length?new is(S(this,He),S(this,We),{...i}):this,this.inject=(i,a)=>{var s;const o=i.create(S(this,He).sliceMap);return a!=null&&o.set(a),(s=S(this,ke))==null||s.onInject(i),this},this.remove=i=>{var a;return S(this,He).remove(i),(a=S(this,ke))==null||a.onRemove(i),this},this.record=i=>{var a;return i.create(S(this,We).store),(a=S(this,ke))==null||a.onRecord(i),this},this.clearTimer=i=>{var a;return S(this,We).remove(i),(a=S(this,ke))==null||a.onClear(i),this},this.isInjected=i=>S(this,He).has(i),this.isRecorded=i=>S(this,We).has(i),this.use=i=>{var a;return(a=S(this,ke))==null||a.onUse(i),S(this,He).get(i)},this.get=i=>this.use(i).get(),this.set=(i,a)=>this.use(i).set(a),this.update=(i,a)=>this.use(i).update(a),this.timer=i=>S(this,We).get(i),this.done=i=>{var a;this.timer(i).done(),(a=S(this,ke))==null||a.onDone(i)},this.wait=i=>{var a;const s=this.timer(i).start();return(a=S(this,ke))==null||a.onWait(i,s),s},this.waitTimers=async i=>{await Promise.all(this.get(i).map(a=>this.wait(a)))},B(this,He,n),B(this,We,t),B(this,Tn,r),r&&B(this,ke,new bl(n,t,r))}get meta(){return S(this,Tn)}get inspector(){return S(this,ke)}};He=new WeakMap;We=new WeakMap;Tn=new WeakMap;ke=new WeakMap;let Il=Cl;class Sl{constructor(){this.store=new Map,this.get=n=>{const t=this.store.get(n.id);if(!t)throw dl(n.name);return t},this.remove=n=>{this.store.delete(n.id)},this.has=n=>this.store.has(n.id)}}class vl{constructor(n,t){Y(this,bt),Y(this,lt),Y(this,Yt),Y(this,je),Y(this,Gt),Y(this,An),B(this,bt,null),B(this,lt,null),B(this,je,"pending"),this.start=()=>(S(this,bt)??B(this,bt,new Promise((r,i)=>{B(this,lt,a=>{a instanceof CustomEvent&&a.detail.id===S(this,Yt)&&(B(this,je,"resolved"),S(this,Gt).call(this),a.stopImmediatePropagation(),r())}),S(this,An).call(this,()=>{S(this,je)==="pending"&&B(this,je,"rejected"),S(this,Gt).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),B(this,je,"pending"),addEventListener(this.type.name,S(this,lt))})),S(this,bt)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:S(this,Yt)}});dispatchEvent(r)},B(this,Gt,()=>{S(this,lt)&&removeEventListener(this.type.name,S(this,lt))}),B(this,An,r=>{setTimeout(()=>{r()},this.type.timeout)}),B(this,Yt,Symbol(t.name)),this.type=t,n.set(t.id,this)}get status(){return S(this,je)}}bt=new WeakMap;lt=new WeakMap;Yt=new WeakMap;je=new WeakMap;Gt=new WeakMap;An=new WeakMap;class Ml{constructor(n,t=3e3){this.create=r=>new vl(r,this),this.id=Symbol(`Timer-${n}`),this.name=n,this.timeout=t}}const et=(e,n=3e3)=>new Ml(e,n),_l={};function oi(e,n){const t=_l,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return as(e,r,i)}function as(e,n,t){if(Nl(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ya(e.children,n,t)}return Array.isArray(e)?ya(e,n,t):""}function ya(e,n,t){const r=[];let i=-1;for(;++i<e.length;)r[i]=as(e[i],n,t);return r.join("")}function Nl(e){return!!(e&&typeof e=="object")}const wa=document.createElement("i");function li(e){const n="&"+e+";";wa.innerHTML=n;const t=wa.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}function Te(e,n,t,r){const i=e.length;let a=0,s;if(n<0?n=-n>i?0:i+n:n=n>i?i:n,t=t>0?t:0,r.length<1e4)s=Array.from(r),s.unshift(n,t),e.splice(...s);else for(t&&e.splice(n,t);a<r.length;)s=r.slice(a,a+1e4),s.unshift(n,0),e.splice(...s),a+=1e4,n+=1e4}function he(e,n){return e.length>0?(Te(e,e.length,0,n),e):n}const xa={}.hasOwnProperty;function El(e){const n={};let t=-1;for(;++t<e.length;)Tl(n,e[t]);return n}function Tl(e,n){let t;for(t in n){const i=(xa.call(e,t)?e[t]:void 0)||(e[t]={}),a=n[t];let s;if(a)for(s in a){xa.call(i,s)||(i[s]=[]);const o=a[s];Al(i[s],Array.isArray(o)?o:o?[o]:[])}}}function Al(e,n){let t=-1;const r=[];for(;++t<n.length;)(n[t].add==="after"?e:r).push(n[t]);Te(e,0,0,r)}function ss(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Nt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ne=tt(/[A-Za-z]/),we=tt(/[\dA-Za-z]/),Ll=tt(/[#-'*+\--9=?A-Z^-~]/);function zr(e){return e!==null&&(e<32||e===127)}const Br=tt(/\d/),Pl=tt(/[\dA-Fa-f]/),zl=tt(/[!-/:-@[-`{-~]/);function N(e){return e!==null&&e<-2}function ae(e){return e!==null&&(e<0||e===32)}function O(e){return e===-2||e===-1||e===32}const Bl=tt(new RegExp("\\p{P}|\\p{S}","u")),Ol=tt(/\s/);function tt(e){return n;function n(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function j(e,n,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return O(u)?(e.enter(t),o(u)):n(u)}function o(u){return O(u)&&a++<i?(e.consume(u),o):(e.exit(t),n(u))}}const Fl={tokenize:Rl};function Rl(e){const n=e.attempt(this.parser.constructs.contentInitial,r,i);let t;return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),j(e,n,"linePrefix")}function i(o){return e.enter("paragraph"),a(o)}function a(o){const u=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,s(o)}function s(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return N(o)?(e.consume(o),e.exit("chunkText"),a):(e.consume(o),s)}}const Dl={tokenize:$l},ba={tokenize:Hl};function $l(e){const n=this,t=[];let r=0,i,a,s;return o;function o(I){if(r<t.length){const R=t[r];return n.containerState=R[1],e.attempt(R[0].continuation,u,l)(I)}return l(I)}function u(I){if(r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,i&&z();const R=n.events.length;let W=R,y;for(;W--;)if(n.events[W][0]==="exit"&&n.events[W][1].type==="chunkFlow"){y=n.events[W][1].end;break}w(r);let D=R;for(;D<n.events.length;)n.events[D][1].end={...y},D++;return Te(n.events,W+1,0,n.events.slice(R)),n.events.length=D,l(I)}return o(I)}function l(I){if(r===t.length){if(!i)return d(I);if(i.currentConstruct&&i.currentConstruct.concrete)return x(I);n.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(ba,c,h)(I)}function c(I){return i&&z(),w(r),d(I)}function h(I){return n.parser.lazy[n.now().line]=r!==t.length,s=n.now().offset,x(I)}function d(I){return n.containerState={},e.attempt(ba,p,x)(I)}function p(I){return r++,t.push([n.currentConstruct,n.containerState]),d(I)}function x(I){if(I===null){i&&z(),w(0),e.consume(I);return}return i=i||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),C(I)}function C(I){if(I===null){A(e.exit("chunkFlow"),!0),w(0),e.consume(I);return}return N(I)?(e.consume(I),A(e.exit("chunkFlow")),r=0,n.interrupt=void 0,o):(e.consume(I),C)}function A(I,R){const W=n.sliceStream(I);if(R&&W.push(null),I.previous=a,a&&(a.next=I),a=I,i.defineSkip(I.start),i.write(W),n.parser.lazy[I.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<s&&(!i.events[y][1].end||i.events[y][1].end.offset>s))return;const D=n.events.length;let J=D,$,q;for(;J--;)if(n.events[J][0]==="exit"&&n.events[J][1].type==="chunkFlow"){if($){q=n.events[J][1].end;break}$=!0}for(w(r),y=D;y<n.events.length;)n.events[y][1].end={...q},y++;Te(n.events,J+1,0,n.events.slice(D)),n.events.length=y}}function w(I){let R=t.length;for(;R-- >I;){const W=t[R];n.containerState=W[1],W[0].exit.call(n,e)}t.length=I}function z(){i.write([null]),a=void 0,i=void 0,n.containerState._closeFlow=void 0}}function Hl(e,n,t){return j(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tr(e){if(e===null||ae(e)||Ol(e))return 1;if(Bl(e))return 2}function ui(e,n,t){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(n=a(n,t),r.push(a))}return n}const Or={name:"attention",resolveAll:Wl,tokenize:jl};function Wl(e,n){let t=-1,r,i,a,s,o,u,l,c;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(r=t;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&n.sliceSerialize(e[r][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[r][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const h={...e[r][1].end},d={...e[t][1].start};Ca(h,-u),Ca(d,u),s={type:u>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},o={type:u>1?"strongSequence":"emphasisSequence",start:{...e[t][1].start},end:d},a={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[t][1].start}},i={type:u>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},e[r][1].end={...s.start},e[t][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=he(l,[["enter",e[r][1],n],["exit",e[r][1],n]])),l=he(l,[["enter",i,n],["enter",s,n],["exit",s,n],["enter",a,n]]),l=he(l,ui(n.parser.constructs.insideSpan.null,e.slice(r+1,t),n)),l=he(l,[["exit",a,n],["enter",o,n],["exit",o,n],["exit",i,n]]),e[t][1].end.offset-e[t][1].start.offset?(c=2,l=he(l,[["enter",e[t][1],n],["exit",e[t][1],n]])):c=0,Te(e,r-1,t-r+3,l),t=r+l.length-c-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function jl(e,n){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tr(r);let a;return s;function s(u){return a=u,e.enter("attentionSequence"),o(u)}function o(u){if(u===a)return e.consume(u),o;const l=e.exit("attentionSequence"),c=tr(u),h=!c||c===2&&i||t.includes(u),d=!i||i===2&&c||t.includes(r);return l._open=!!(a===42?h:h&&(i||!d)),l._close=!!(a===42?d:d&&(c||!h)),n(u)}}function Ca(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const ql={name:"autolink",tokenize:Vl};function Vl(e,n,t){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(p){return Ne(p)?(e.consume(p),s):p===64?t(p):l(p)}function s(p){return p===43||p===45||p===46||we(p)?(r=1,o(p)):l(p)}function o(p){return p===58?(e.consume(p),r=0,u):(p===43||p===45||p===46||we(p))&&r++<32?(e.consume(p),o):(r=0,l(p))}function u(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),n):p===null||p===32||p===60||zr(p)?t(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),c):Ll(p)?(e.consume(p),l):t(p)}function c(p){return we(p)?h(p):t(p)}function h(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),n):d(p)}function d(p){if((p===45||we(p))&&r++<63){const x=p===45?d:h;return e.consume(p),x}return t(p)}}const ar={partial:!0,tokenize:Kl};function Kl(e,n,t){return r;function r(a){return O(a)?j(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||N(a)?n(a):t(a)}}const os={continuation:{tokenize:Ql},exit:Yl,name:"blockQuote",tokenize:Ul};function Ul(e,n,t){const r=this;return i;function i(s){if(s===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),a}return t(s)}function a(s){return O(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(s))}}function Ql(e,n,t){const r=this;return i;function i(s){return O(s)?j(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return e.attempt(os,n,t)(s)}}function Yl(e){e.exit("blockQuote")}const ls={name:"characterEscape",tokenize:Gl};function Gl(e,n,t){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return zl(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(a)}}const us={name:"characterReference",tokenize:Jl};function Jl(e,n,t){const r=this;let i=0,a,s;return o;function o(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),u}function u(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,s=we,c(h))}function l(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,s=Pl,c):(e.enter("characterReferenceValue"),a=7,s=Br,c(h))}function c(h){if(h===59&&i){const d=e.exit("characterReferenceValue");return s===we&&!li(r.sliceSerialize(d))?t(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return s(h)&&i++<a?(e.consume(h),c):t(h)}}const Ia={partial:!0,tokenize:Xl},Sa={concrete:!0,name:"codeFenced",tokenize:Zl};function Zl(e,n,t){const r=this,i={partial:!0,tokenize:W};let a=0,s=0,o;return u;function u(y){return l(y)}function l(y){const D=r.events[r.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,o=y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(y)}function c(y){return y===o?(s++,e.consume(y),c):s<3?t(y):(e.exit("codeFencedFenceSequence"),O(y)?j(e,h,"whitespace")(y):h(y))}function h(y){return y===null||N(y)?(e.exit("codeFencedFence"),r.interrupt?n(y):e.check(Ia,C,R)(y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||N(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(y)):O(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),j(e,p,"whitespace")(y)):y===96&&y===o?t(y):(e.consume(y),d)}function p(y){return y===null||N(y)?h(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(y))}function x(y){return y===null||N(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(y)):y===96&&y===o?t(y):(e.consume(y),x)}function C(y){return e.attempt(i,R,A)(y)}function A(y){return e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),w}function w(y){return a>0&&O(y)?j(e,z,"linePrefix",a+1)(y):z(y)}function z(y){return y===null||N(y)?e.check(Ia,C,R)(y):(e.enter("codeFlowValue"),I(y))}function I(y){return y===null||N(y)?(e.exit("codeFlowValue"),z(y)):(e.consume(y),I)}function R(y){return e.exit("codeFenced"),n(y)}function W(y,D,J){let $=0;return q;function q(P){return y.enter("lineEnding"),y.consume(P),y.exit("lineEnding"),_}function _(P){return y.enter("codeFencedFence"),O(P)?j(y,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):M(P)}function M(P){return P===o?(y.enter("codeFencedFenceSequence"),U(P)):J(P)}function U(P){return P===o?($++,y.consume(P),U):$>=s?(y.exit("codeFencedFenceSequence"),O(P)?j(y,Z,"whitespace")(P):Z(P)):J(P)}function Z(P){return P===null||N(P)?(y.exit("codeFencedFence"),D(P)):J(P)}}}function Xl(e,n,t){const r=this;return i;function i(s){return s===null?t(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}const dr={name:"codeIndented",tokenize:tu},eu={partial:!0,tokenize:nu};function tu(e,n,t){const r=this;return i;function i(l){return e.enter("codeIndented"),j(e,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):t(l)}function s(l){return l===null?u(l):N(l)?e.attempt(eu,s,u)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||N(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),o)}function u(l){return e.exit("codeIndented"),n(l)}}function nu(e,n,t){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?t(s):N(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):j(e,a,"linePrefix",5)(s)}function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(s):N(s)?i(s):t(s)}}const ru={name:"codeText",previous:au,resolve:iu,tokenize:su};function iu(e){let n=e.length-4,t=3,r,i;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(r=t;++r<n;)if(e[r][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(r=t-1,n++;++r<=n;)i===void 0?r!==n&&e[r][1].type!=="lineEnding"&&(i=r):(r===n||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),n-=r-i-2,r=i+2),i=void 0);return e}function au(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function su(e,n,t){let r=0,i,a;return s;function s(h){return e.enter("codeText"),e.enter("codeTextSequence"),o(h)}function o(h){return h===96?(e.consume(h),r++,o):(e.exit("codeTextSequence"),u(h))}function u(h){return h===null?t(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),u):h===96?(a=e.enter("codeTextSequence"),i=0,c(h)):N(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(h))}function l(h){return h===null||h===32||h===96||N(h)?(e.exit("codeTextData"),u(h)):(e.consume(h),l)}function c(h){return h===96?(e.consume(h),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),n(h)):(a.type="codeTextData",l(h))}}class ou{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(n,r):n>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(n,t,r){const i=t||0;this.setCursor(Math.trunc(n));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Wt(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Wt(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Wt(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const t=this.left.splice(n,Number.POSITIVE_INFINITY);Wt(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Wt(this.left,t.reverse())}}}function Wt(e,n){let t=0;if(n.length<1e4)e.push(...n);else for(;t<n.length;)e.push(...n.slice(t,t+1e4)),t+=1e4}function cs(e){const n={};let t=-1,r,i,a,s,o,u,l;const c=new ou(e);for(;++t<c.length;){for(;t in n;)t=n[t];if(r=c.get(t),t&&r[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,lu(c,t)),t=n[t],l=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(s=c.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},o=c.slice(i,t),o.unshift(r),c.splice(i,t-i+1,o))}}return Te(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function lu(e,n){const t=e.get(n)[1],r=e.get(n)[2];let i=n-1;const a=[];let s=t._tokenizer;s||(s=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const o=s.events,u=[],l={};let c,h,d=-1,p=t,x=0,C=0;const A=[C];for(;p;){for(;e.get(++i)[1]!==p;);a.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),h&&s.defineSkip(p.start),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=t;++d<o.length;)o[d][0]==="exit"&&o[d-1][0]==="enter"&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(C=d+1,A.push(C),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(s.events=[],p?(p._tokenizer=void 0,p.previous=void 0):A.pop(),d=A.length;d--;){const w=o.slice(A[d],A[d+1]),z=a.pop();u.push([z,z+w.length-1]),e.splice(z,2,w)}for(u.reverse(),d=-1;++d<u.length;)l[x+u[d][0]]=x+u[d][1],x+=u[d][1]-u[d][0]-1;return l}const uu={resolve:hu,tokenize:pu},cu={partial:!0,tokenize:du};function hu(e){return cs(e),e}function pu(e,n){let t;return r;function r(o){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):N(o)?e.check(cu,s,a)(o):(e.consume(o),i)}function a(o){return e.exit("chunkContent"),e.exit("content"),n(o)}function s(o){return e.consume(o),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function du(e,n,t){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),j(e,a,"linePrefix")}function a(s){if(s===null||N(s))return t(s);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(s):e.interrupt(r.parser.constructs.flow,t,n)(s)}}function hs(e,n,t,r,i,a,s,o,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return h;function h(w){return w===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(w),e.exit(a),d):w===null||w===32||w===41||zr(w)?t(w):(e.enter(r),e.enter(s),e.enter(o),e.enter("chunkString",{contentType:"string"}),C(w))}function d(w){return w===62?(e.enter(a),e.consume(w),e.exit(a),e.exit(i),e.exit(r),n):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===62?(e.exit("chunkString"),e.exit(o),d(w)):w===null||w===60||N(w)?t(w):(e.consume(w),w===92?x:p)}function x(w){return w===60||w===62||w===92?(e.consume(w),p):p(w)}function C(w){return!c&&(w===null||w===41||ae(w))?(e.exit("chunkString"),e.exit(o),e.exit(s),e.exit(r),n(w)):c<l&&w===40?(e.consume(w),c++,C):w===41?(e.consume(w),c--,C):w===null||w===32||w===40||zr(w)?t(w):(e.consume(w),w===92?A:C)}function A(w){return w===40||w===41||w===92?(e.consume(w),C):C(w)}}function ps(e,n,t,r,i,a){const s=this;let o=0,u;return l;function l(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(a),c}function c(p){return o>999||p===null||p===91||p===93&&!u||p===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?t(p):p===93?(e.exit(a),e.enter(i),e.consume(p),e.exit(i),e.exit(r),n):N(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||N(p)||o++>999?(e.exit("chunkString"),c(p)):(e.consume(p),u||(u=!O(p)),p===92?d:h)}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}}function ds(e,n,t,r,i,a){let s;return o;function o(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),s=d===40?41:d,u):t(d)}function u(d){return d===s?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),n):(e.enter(a),l(d))}function l(d){return d===s?(e.exit(a),u(s)):d===null?t(d):N(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),j(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===s||d===null||N(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?h:c)}function h(d){return d===s||d===92?(e.consume(d),c):c(d)}}function un(e,n){let t;return r;function r(i){return N(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t=!0,r):O(i)?j(e,r,t?"linePrefix":"lineSuffix")(i):n(i)}}const fu={name:"definition",tokenize:gu},mu={partial:!0,tokenize:ku};function gu(e,n,t){const r=this;let i;return a;function a(p){return e.enter("definition"),s(p)}function s(p){return ps.call(r,e,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return i=Nt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),u):t(p)}function u(p){return ae(p)?un(e,l)(p):l(p)}function l(p){return hs(e,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function c(p){return e.attempt(mu,h,h)(p)}function h(p){return O(p)?j(e,d,"whitespace")(p):d(p)}function d(p){return p===null||N(p)?(e.exit("definition"),r.parser.defined.push(i),n(p)):t(p)}}function ku(e,n,t){return r;function r(o){return ae(o)?un(e,i)(o):t(o)}function i(o){return ds(e,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return O(o)?j(e,s,"whitespace")(o):s(o)}function s(o){return o===null||N(o)?n(o):t(o)}}const yu={name:"hardBreakEscape",tokenize:wu};function wu(e,n,t){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return N(a)?(e.exit("hardBreakEscape"),n(a)):t(a)}}const xu={name:"headingAtx",resolve:bu,tokenize:Cu};function bu(e,n){let t=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),t-2>r&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&e[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[t][1].end},a={type:"chunkText",start:e[r][1].start,end:e[t][1].end,contentType:"text"},Te(e,r,t-r+1,[["enter",i,n],["enter",a,n],["exit",a,n],["exit",i,n]])),e}function Cu(e,n,t){let r=0;return i;function i(c){return e.enter("atxHeading"),a(c)}function a(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||ae(c)?(e.exit("atxHeadingSequence"),o(c)):t(c)}function o(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||N(c)?(e.exit("atxHeading"),n(c)):O(c)?j(e,o,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),o(c))}function l(c){return c===null||c===35||ae(c)?(e.exit("atxHeadingText"),o(c)):(e.consume(c),l)}}const Iu=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],va=["pre","script","style","textarea"],Su={concrete:!0,name:"htmlFlow",resolveTo:_u,tokenize:Nu},vu={partial:!0,tokenize:Tu},Mu={partial:!0,tokenize:Eu};function _u(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function Nu(e,n,t){const r=this;let i,a,s,o,u;return l;function l(m){return c(m)}function c(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),h}function h(m){return m===33?(e.consume(m),d):m===47?(e.consume(m),a=!0,C):m===63?(e.consume(m),i=3,r.interrupt?n:f):Ne(m)?(e.consume(m),s=String.fromCharCode(m),A):t(m)}function d(m){return m===45?(e.consume(m),i=2,p):m===91?(e.consume(m),i=5,o=0,x):Ne(m)?(e.consume(m),i=4,r.interrupt?n:f):t(m)}function p(m){return m===45?(e.consume(m),r.interrupt?n:f):t(m)}function x(m){const me="CDATA[";return m===me.charCodeAt(o++)?(e.consume(m),o===me.length?r.interrupt?n:M:x):t(m)}function C(m){return Ne(m)?(e.consume(m),s=String.fromCharCode(m),A):t(m)}function A(m){if(m===null||m===47||m===62||ae(m)){const me=m===47,it=s.toLowerCase();return!me&&!a&&va.includes(it)?(i=1,r.interrupt?n(m):M(m)):Iu.includes(s.toLowerCase())?(i=6,me?(e.consume(m),w):r.interrupt?n(m):M(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(m):a?z(m):I(m))}return m===45||we(m)?(e.consume(m),s+=String.fromCharCode(m),A):t(m)}function w(m){return m===62?(e.consume(m),r.interrupt?n:M):t(m)}function z(m){return O(m)?(e.consume(m),z):q(m)}function I(m){return m===47?(e.consume(m),q):m===58||m===95||Ne(m)?(e.consume(m),R):O(m)?(e.consume(m),I):q(m)}function R(m){return m===45||m===46||m===58||m===95||we(m)?(e.consume(m),R):W(m)}function W(m){return m===61?(e.consume(m),y):O(m)?(e.consume(m),W):I(m)}function y(m){return m===null||m===60||m===61||m===62||m===96?t(m):m===34||m===39?(e.consume(m),u=m,D):O(m)?(e.consume(m),y):J(m)}function D(m){return m===u?(e.consume(m),u=null,$):m===null||N(m)?t(m):(e.consume(m),D)}function J(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||ae(m)?W(m):(e.consume(m),J)}function $(m){return m===47||m===62||O(m)?I(m):t(m)}function q(m){return m===62?(e.consume(m),_):t(m)}function _(m){return m===null||N(m)?M(m):O(m)?(e.consume(m),_):t(m)}function M(m){return m===45&&i===2?(e.consume(m),re):m===60&&i===1?(e.consume(m),ee):m===62&&i===4?(e.consume(m),fe):m===63&&i===3?(e.consume(m),f):m===93&&i===5?(e.consume(m),Ae):N(m)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(vu,Le,U)(m)):m===null||N(m)?(e.exit("htmlFlowData"),U(m)):(e.consume(m),M)}function U(m){return e.check(Mu,Z,Le)(m)}function Z(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),P}function P(m){return m===null||N(m)?U(m):(e.enter("htmlFlowData"),M(m))}function re(m){return m===45?(e.consume(m),f):M(m)}function ee(m){return m===47?(e.consume(m),s="",de):M(m)}function de(m){if(m===62){const me=s.toLowerCase();return va.includes(me)?(e.consume(m),fe):M(m)}return Ne(m)&&s.length<8?(e.consume(m),s+=String.fromCharCode(m),de):M(m)}function Ae(m){return m===93?(e.consume(m),f):M(m)}function f(m){return m===62?(e.consume(m),fe):m===45&&i===2?(e.consume(m),f):M(m)}function fe(m){return m===null||N(m)?(e.exit("htmlFlowData"),Le(m)):(e.consume(m),fe)}function Le(m){return e.exit("htmlFlow"),n(m)}}function Eu(e,n,t){const r=this;return i;function i(s){return N(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):t(s)}function a(s){return r.parser.lazy[r.now().line]?t(s):n(s)}}function Tu(e,n,t){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ar,n,t)}}const Au={name:"htmlText",tokenize:Lu};function Lu(e,n,t){const r=this;let i,a,s;return o;function o(f){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(f),u}function u(f){return f===33?(e.consume(f),l):f===47?(e.consume(f),W):f===63?(e.consume(f),I):Ne(f)?(e.consume(f),J):t(f)}function l(f){return f===45?(e.consume(f),c):f===91?(e.consume(f),a=0,x):Ne(f)?(e.consume(f),z):t(f)}function c(f){return f===45?(e.consume(f),p):t(f)}function h(f){return f===null?t(f):f===45?(e.consume(f),d):N(f)?(s=h,ee(f)):(e.consume(f),h)}function d(f){return f===45?(e.consume(f),p):h(f)}function p(f){return f===62?re(f):f===45?d(f):h(f)}function x(f){const fe="CDATA[";return f===fe.charCodeAt(a++)?(e.consume(f),a===fe.length?C:x):t(f)}function C(f){return f===null?t(f):f===93?(e.consume(f),A):N(f)?(s=C,ee(f)):(e.consume(f),C)}function A(f){return f===93?(e.consume(f),w):C(f)}function w(f){return f===62?re(f):f===93?(e.consume(f),w):C(f)}function z(f){return f===null||f===62?re(f):N(f)?(s=z,ee(f)):(e.consume(f),z)}function I(f){return f===null?t(f):f===63?(e.consume(f),R):N(f)?(s=I,ee(f)):(e.consume(f),I)}function R(f){return f===62?re(f):I(f)}function W(f){return Ne(f)?(e.consume(f),y):t(f)}function y(f){return f===45||we(f)?(e.consume(f),y):D(f)}function D(f){return N(f)?(s=D,ee(f)):O(f)?(e.consume(f),D):re(f)}function J(f){return f===45||we(f)?(e.consume(f),J):f===47||f===62||ae(f)?$(f):t(f)}function $(f){return f===47?(e.consume(f),re):f===58||f===95||Ne(f)?(e.consume(f),q):N(f)?(s=$,ee(f)):O(f)?(e.consume(f),$):re(f)}function q(f){return f===45||f===46||f===58||f===95||we(f)?(e.consume(f),q):_(f)}function _(f){return f===61?(e.consume(f),M):N(f)?(s=_,ee(f)):O(f)?(e.consume(f),_):$(f)}function M(f){return f===null||f===60||f===61||f===62||f===96?t(f):f===34||f===39?(e.consume(f),i=f,U):N(f)?(s=M,ee(f)):O(f)?(e.consume(f),M):(e.consume(f),Z)}function U(f){return f===i?(e.consume(f),i=void 0,P):f===null?t(f):N(f)?(s=U,ee(f)):(e.consume(f),U)}function Z(f){return f===null||f===34||f===39||f===60||f===61||f===96?t(f):f===47||f===62||ae(f)?$(f):(e.consume(f),Z)}function P(f){return f===47||f===62||ae(f)?$(f):t(f)}function re(f){return f===62?(e.consume(f),e.exit("htmlTextData"),e.exit("htmlText"),n):t(f)}function ee(f){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),de}function de(f){return O(f)?j(e,Ae,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):Ae(f)}function Ae(f){return e.enter("htmlTextData"),s(f)}}const ci={name:"labelEnd",resolveAll:Ou,resolveTo:Fu,tokenize:Ru},Pu={tokenize:Du},zu={tokenize:$u},Bu={tokenize:Hu};function Ou(e){let n=-1;const t=[];for(;++n<e.length;){const r=e[n][1];if(t.push(e[n]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",n+=i}}return e.length!==t.length&&Te(e,0,e.length,t),e}function Fu(e,n){let t=e.length,r=0,i,a,s,o;for(;t--;)if(i=e[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=t);const u={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[a][1].start},end:{...e[s][1].end}},c={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[s-2][1].start}};return o=[["enter",u,n],["enter",l,n]],o=he(o,e.slice(a+1,a+r+3)),o=he(o,[["enter",c,n]]),o=he(o,ui(n.parser.constructs.insideSpan.null,e.slice(a+r+4,s-3),n)),o=he(o,[["exit",c,n],e[s-2],e[s-1],["exit",l,n]]),o=he(o,e.slice(s+1)),o=he(o,[["exit",u,n]]),Te(e,a,e.length,o),e}function Ru(e,n,t){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(d){return a?a._inactive?h(d):(s=r.parser.defined.includes(Nt(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):t(d)}function u(d){return d===40?e.attempt(Pu,c,s?c:h)(d):d===91?e.attempt(zu,c,s?l:h)(d):s?c(d):h(d)}function l(d){return e.attempt(Bu,c,h)(d)}function c(d){return n(d)}function h(d){return a._balanced=!0,t(d)}}function Du(e,n,t){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return ae(h)?un(e,a)(h):a(h)}function a(h){return h===41?c(h):hs(e,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return ae(h)?un(e,u)(h):c(h)}function o(h){return t(h)}function u(h){return h===34||h===39||h===40?ds(e,l,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function l(h){return ae(h)?un(e,c)(h):c(h)}function c(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),n):t(h)}}function $u(e,n,t){const r=this;return i;function i(o){return ps.call(r,e,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(Nt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(o):t(o)}function s(o){return t(o)}}function Hu(e,n,t){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),n):t(a)}}const Wu={name:"labelStartImage",resolveAll:ci.resolveAll,tokenize:ju};function ju(e,n,t){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),a}function a(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),s):t(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):n(o)}}const qu={name:"labelStartLink",resolveAll:ci.resolveAll,tokenize:Vu};function Vu(e,n,t){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):n(s)}}const fr={name:"lineEnding",tokenize:Ku};function Ku(e,n){return t;function t(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),j(e,n,"linePrefix")}}const Ln={name:"thematicBreak",tokenize:Uu};function Uu(e,n,t){let r=0,i;return a;function a(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||N(l))?(e.exit("thematicBreak"),n(l)):t(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),O(l)?j(e,o,"whitespace")(l):o(l))}}const ie={continuation:{tokenize:Ju},exit:Xu,name:"list",tokenize:Gu},Qu={partial:!0,tokenize:ec},Yu={partial:!0,tokenize:Zu};function Gu(e,n,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(p){const x=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Br(p)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(Ln,t,l)(p):l(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(p)}return t(p)}function u(p){return Br(p)&&++s<10?(e.consume(p),u):(!r.interrupt||s<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):t(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(ar,r.interrupt?t:c,e.attempt(Qu,d,h))}function c(p){return r.containerState.initialBlankLine=!0,a++,d(p)}function h(p){return O(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),d):t(p)}function d(p){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(p)}}function Ju(e,n,t){const r=this;return r.containerState._closeFlow=void 0,e.check(ar,i,a);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,j(e,n,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!O(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Yu,n,s)(o))}function s(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,j(e,e.attempt(ie,n,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Zu(e,n,t){const r=this;return j(e,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?n(a):t(a)}}function Xu(e){e.exit(this.containerState.type)}function ec(e,n,t){const r=this;return j(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!O(a)&&s&&s[1].type==="listItemPrefixWhitespace"?n(a):t(a)}}const Ma={name:"setextUnderline",resolveTo:tc,tokenize:nc};function tc(e,n){let t=e.length,r,i,a;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){r=t;break}e[t][1].type==="paragraph"&&(i=t)}else e[t][1].type==="content"&&e.splice(t,1),!a&&e[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",s,n]),e.splice(a+1,0,["exit",e[r][1],n]),e[r][1].end={...e[a][1].end}):e[r][1]=s,e.push(["exit",s,n]),e}function nc(e,n,t){const r=this;let i;return a;function a(l){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=l,s(l)):t(l)}function s(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),O(l)?j(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||N(l)?(e.exit("setextHeadingLine"),n(l)):t(l)}}const rc={tokenize:ic};function ic(e){const n=this,t=e.attempt(ar,r,e.attempt(this.parser.constructs.flowInitial,i,j(e,e.attempt(this.parser.constructs.flow,i,e.attempt(uu,i)),"linePrefix")));return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const ac={resolveAll:ms()},sc=fs("string"),oc=fs("text");function fs(e){return{resolveAll:ms(e==="text"?lc:void 0),tokenize:n};function n(t){const r=this,i=this.parser.constructs[e],a=t.attempt(i,s,o);return s;function s(c){return l(c)?a(c):o(c)}function o(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),u}function u(c){return l(c)?(t.exit("data"),a(c)):(t.consume(c),u)}function l(c){if(c===null)return!0;const h=i[c];let d=-1;if(h)for(;++d<h.length;){const p=h[d];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function ms(e){return n;function n(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(t,r):t}}function lc(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const r=e[t-1][1],i=n.sliceStream(r);let a=i.length,s=-1,o=0,u;for(;a--;){const l=i[a];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(l===-2)u=!0,o++;else if(l!==-1){a++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(o=0),o){const l={type:t===e.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...l.start},r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(t,0,["enter",l,n],["exit",l,n]),t+=2)}t++}return e}const uc={42:ie,43:ie,45:ie,48:ie,49:ie,50:ie,51:ie,52:ie,53:ie,54:ie,55:ie,56:ie,57:ie,62:os},cc={91:fu},hc={[-2]:dr,[-1]:dr,32:dr},pc={35:xu,42:Ln,45:[Ma,Ln],60:Su,61:Ma,95:Ln,96:Sa,126:Sa},dc={38:us,92:ls},fc={[-5]:fr,[-4]:fr,[-3]:fr,33:Wu,38:us,42:Or,60:[ql,Au],91:qu,92:[yu,ls],93:ci,95:Or,96:ru},mc={null:[Or,ac]},gc={null:[42,95]},kc={null:[]},yc=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:gc,contentInitial:cc,disable:kc,document:uc,flow:pc,flowInitial:hc,insideSpan:mc,string:dc,text:fc},Symbol.toStringTag,{value:"Module"}));function wc(e,n,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],o=[];const u={attempt:D(W),check:D(y),consume:z,enter:I,exit:R,interrupt:D(y,{interrupt:!0})},l={code:null,containerState:{},defineSkip:C,events:[],now:x,parser:e,previous:null,sliceSerialize:d,sliceStream:p,write:h};let c=n.tokenize.call(l,u);return n.resolveAll&&a.push(n),l;function h(_){return s=he(s,_),A(),s[s.length-1]!==null?[]:(J(n,0),l.events=ui(a,l.events,l),l.events)}function d(_,M){return bc(p(_),M)}function p(_){return xc(s,_)}function x(){const{_bufferIndex:_,_index:M,line:U,column:Z,offset:P}=r;return{_bufferIndex:_,_index:M,line:U,column:Z,offset:P}}function C(_){i[_.line]=_.column,q()}function A(){let _;for(;r._index<s.length;){const M=s[r._index];if(typeof M=="string")for(_=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===_&&r._bufferIndex<M.length;)w(M.charCodeAt(r._bufferIndex));else w(M)}}function w(_){c=c(_)}function z(_){N(_)?(r.line++,r.column=1,r.offset+=_===-3?2:1,q()):_!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=_}function I(_,M){const U=M||{};return U.type=_,U.start=x(),l.events.push(["enter",U,l]),o.push(U),U}function R(_){const M=o.pop();return M.end=x(),l.events.push(["exit",M,l]),M}function W(_,M){J(_,M.from)}function y(_,M){M.restore()}function D(_,M){return U;function U(Z,P,re){let ee,de,Ae,f;return Array.isArray(Z)?Le(Z):"tokenize"in Z?Le([Z]):fe(Z);function fe(te){return Dt;function Dt(Re){const kt=Re!==null&&te[Re],yt=Re!==null&&te.null,In=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(yt)?yt:yt?[yt]:[]];return Le(In)(Re)}}function Le(te){return ee=te,de=0,te.length===0?re:m(te[de])}function m(te){return Dt;function Dt(Re){return f=$(),Ae=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?it():te.tokenize.call(M?Object.assign(Object.create(l),M):l,u,me,it)(Re)}}function me(te){return _(Ae,f),P}function it(te){return f.restore(),++de<ee.length?m(ee[de]):re}}}function J(_,M){_.resolveAll&&!a.includes(_)&&a.push(_),_.resolve&&Te(l.events,M,l.events.length-M,_.resolve(l.events.slice(M),l)),_.resolveTo&&(l.events=_.resolveTo(l.events,l))}function $(){const _=x(),M=l.previous,U=l.currentConstruct,Z=l.events.length,P=Array.from(o);return{from:Z,restore:re};function re(){r=_,l.previous=M,l.currentConstruct=U,l.events.length=Z,o=P,q()}}function q(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function xc(e,n){const t=n.start._index,r=n.start._bufferIndex,i=n.end._index,a=n.end._bufferIndex;let s;if(t===i)s=[e[t].slice(r,a)];else{if(s=e.slice(t,i),r>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(r):s.shift()}a>0&&s.push(e[i].slice(0,a))}return s}function bc(e,n){let t=-1;const r=[];let i;for(;++t<e.length;){const a=e[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=n?" ":"	";break}case-1:{if(!n&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}function Cc(e){const r={constructs:El([yc,...(e||{}).extensions||[]]),content:i(Fl),defined:[],document:i(Dl),flow:i(rc),lazy:{},string:i(sc),text:i(oc)};return r;function i(a){return s;function s(o){return wc(r,a,o)}}}function Ic(e){for(;!cs(e););return e}const _a=/[\0\t\n\r]/g;function Sc(){let e=1,n="",t=!0,r;return i;function i(a,s,o){const u=[];let l,c,h,d,p;for(a=n+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),h=0,n="",t&&(a.charCodeAt(0)===65279&&h++,t=void 0);h<a.length;){if(_a.lastIndex=h,l=_a.exec(a),d=l&&l.index!==void 0?l.index:a.length,p=a.charCodeAt(d),!l){n=a.slice(h);break}if(p===10&&h===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),h<d&&(u.push(a.slice(h,d)),e+=d-h),p){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}h=d+1}return o&&(r&&u.push(-5),n&&u.push(n),u.push(null)),u}}const vc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gs(e){return e.replace(vc,Mc)}function Mc(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return ss(t.slice(a?2:1),a?16:10)}return li(t)||e}function cn(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Na(e.position):"start"in e||"end"in e?Na(e):"line"in e||"column"in e?Fr(e):""}function Fr(e){return Ea(e&&e.line)+":"+Ea(e&&e.column)}function Na(e){return Fr(e&&e.start)+"-"+Fr(e&&e.end)}function Ea(e){return e&&typeof e=="number"?e:1}const ks={}.hasOwnProperty;function _c(e,n,t){return typeof n!="string"&&(t=n,n=void 0),Nc(t)(Ic(Cc(t).document().write(Sc()(e,n,!0))))}function Nc(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(fa),autolinkProtocol:$,autolinkEmail:$,atxHeading:a(ha),blockQuote:a(yt),characterEscape:$,characterReference:$,codeFenced:a(In),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(In,s),codeText:a(So,s),codeTextData:$,data:$,codeFlowValue:$,definition:a(vo),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Mo),hardBreakEscape:a(pa),hardBreakTrailing:a(pa),htmlFlow:a(da,s),htmlFlowData:$,htmlText:a(da,s),htmlTextData:$,image:a(_o),label:s,link:a(fa),listItem:a(No),listItemValue:d,listOrdered:a(ma,h),listUnordered:a(ma),paragraph:a(Eo),reference:m,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(ha),strong:a(To),thematicBreak:a(Lo)},exit:{atxHeading:u(),atxHeadingSequence:W,autolink:u(),autolinkEmail:kt,autolinkProtocol:Re,blockQuote:u(),characterEscapeValue:q,characterReferenceMarkerHexadecimal:it,characterReferenceMarkerNumeric:it,characterReferenceValue:te,characterReference:Dt,codeFenced:u(A),codeFencedFence:C,codeFencedFenceInfo:p,codeFencedFenceMeta:x,codeFlowValue:q,codeIndented:u(w),codeText:u(P),codeTextData:q,data:q,definition:u(),definitionDestinationString:R,definitionLabelString:z,definitionTitleString:I,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(U),htmlFlowData:q,htmlText:u(Z),htmlTextData:q,image:u(ee),label:Ae,labelText:de,lineEnding:_,link:u(re),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:me,resourceDestinationString:f,resourceTitleString:fe,resource:Le,setextHeading:u(J),setextHeadingLineSequence:D,setextHeadingText:y,strong:u(),thematicBreak:u()}};ys(n,(e||{}).mdastExtensions||[]);const t={};return r;function r(k){let b={type:"root",children:[]};const E={stack:[b],tokenStack:[],config:n,enter:o,exit:l,buffer:s,resume:c,data:t},L=[];let H=-1;for(;++H<k.length;)if(k[H][1].type==="listOrdered"||k[H][1].type==="listUnordered")if(k[H][0]==="enter")L.push(H);else{const ge=L.pop();H=i(k,ge,H)}for(H=-1;++H<k.length;){const ge=n[k[H][0]];ks.call(ge,k[H][1].type)&&ge[k[H][1].type].call(Object.assign({sliceSerialize:k[H][2].sliceSerialize},E),k[H][1])}if(E.tokenStack.length>0){const ge=E.tokenStack[E.tokenStack.length-1];(ge[1]||Ta).call(E,void 0,ge[0])}for(b.position={start:De(k.length>0?k[0][1].start:{line:1,column:1,offset:0}),end:De(k.length>0?k[k.length-2][1].end:{line:1,column:1,offset:0})},H=-1;++H<n.transforms.length;)b=n.transforms[H](b)||b;return b}function i(k,b,E){let L=b-1,H=-1,ge=!1,at,Pe,$t,Ht;for(;++L<=E;){const oe=k[L];switch(oe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{oe[0]==="enter"?H++:H--,Ht=void 0;break}case"lineEndingBlank":{oe[0]==="enter"&&(at&&!Ht&&!H&&!$t&&($t=L),Ht=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ht=void 0}if(!H&&oe[0]==="enter"&&oe[1].type==="listItemPrefix"||H===-1&&oe[0]==="exit"&&(oe[1].type==="listUnordered"||oe[1].type==="listOrdered")){if(at){let wt=L;for(Pe=void 0;wt--;){const ze=k[wt];if(ze[1].type==="lineEnding"||ze[1].type==="lineEndingBlank"){if(ze[0]==="exit")continue;Pe&&(k[Pe][1].type="lineEndingBlank",ge=!0),ze[1].type="lineEnding",Pe=wt}else if(!(ze[1].type==="linePrefix"||ze[1].type==="blockQuotePrefix"||ze[1].type==="blockQuotePrefixWhitespace"||ze[1].type==="blockQuoteMarker"||ze[1].type==="listItemIndent"))break}$t&&(!Pe||$t<Pe)&&(at._spread=!0),at.end=Object.assign({},Pe?k[Pe][1].start:oe[1].end),k.splice(Pe||L,0,["exit",at,oe[2]]),L++,E++}if(oe[1].type==="listItemPrefix"){const wt={type:"listItem",_spread:!1,start:Object.assign({},oe[1].start),end:void 0};at=wt,k.splice(L,0,["enter",wt,oe[2]]),L++,E++,$t=void 0,Ht=!0}}}return k[b][1]._spread=ge,E}function a(k,b){return E;function E(L){o.call(this,k(L),L),b&&b.call(this,L)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(k,b,E){this.stack[this.stack.length-1].children.push(k),this.stack.push(k),this.tokenStack.push([b,E||void 0]),k.position={start:De(b.start),end:void 0}}function u(k){return b;function b(E){k&&k.call(this,E),l.call(this,E)}}function l(k,b){const E=this.stack.pop(),L=this.tokenStack.pop();if(L)L[0].type!==k.type&&(b?b.call(this,k,L[0]):(L[1]||Ta).call(this,k,L[0]));else throw new Error("Cannot close `"+k.type+"` ("+cn({start:k.start,end:k.end})+"): it’s not open");E.position.end=De(k.end)}function c(){return oi(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(k){if(this.data.expectingFirstListItemValue){const b=this.stack[this.stack.length-2];b.start=Number.parseInt(this.sliceSerialize(k),10),this.data.expectingFirstListItemValue=void 0}}function p(){const k=this.resume(),b=this.stack[this.stack.length-1];b.lang=k}function x(){const k=this.resume(),b=this.stack[this.stack.length-1];b.meta=k}function C(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const k=this.resume(),b=this.stack[this.stack.length-1];b.value=k.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const k=this.resume(),b=this.stack[this.stack.length-1];b.value=k.replace(/(\r?\n|\r)$/g,"")}function z(k){const b=this.resume(),E=this.stack[this.stack.length-1];E.label=b,E.identifier=Nt(this.sliceSerialize(k)).toLowerCase()}function I(){const k=this.resume(),b=this.stack[this.stack.length-1];b.title=k}function R(){const k=this.resume(),b=this.stack[this.stack.length-1];b.url=k}function W(k){const b=this.stack[this.stack.length-1];if(!b.depth){const E=this.sliceSerialize(k).length;b.depth=E}}function y(){this.data.setextHeadingSlurpLineEnding=!0}function D(k){const b=this.stack[this.stack.length-1];b.depth=this.sliceSerialize(k).codePointAt(0)===61?1:2}function J(){this.data.setextHeadingSlurpLineEnding=void 0}function $(k){const E=this.stack[this.stack.length-1].children;let L=E[E.length-1];(!L||L.type!=="text")&&(L=Ao(),L.position={start:De(k.start),end:void 0},E.push(L)),this.stack.push(L)}function q(k){const b=this.stack.pop();b.value+=this.sliceSerialize(k),b.position.end=De(k.end)}function _(k){const b=this.stack[this.stack.length-1];if(this.data.atHardBreak){const E=b.children[b.children.length-1];E.position.end=De(k.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(b.type)&&($.call(this,k),q.call(this,k))}function M(){this.data.atHardBreak=!0}function U(){const k=this.resume(),b=this.stack[this.stack.length-1];b.value=k}function Z(){const k=this.resume(),b=this.stack[this.stack.length-1];b.value=k}function P(){const k=this.resume(),b=this.stack[this.stack.length-1];b.value=k}function re(){const k=this.stack[this.stack.length-1];if(this.data.inReference){const b=this.data.referenceType||"shortcut";k.type+="Reference",k.referenceType=b,delete k.url,delete k.title}else delete k.identifier,delete k.label;this.data.referenceType=void 0}function ee(){const k=this.stack[this.stack.length-1];if(this.data.inReference){const b=this.data.referenceType||"shortcut";k.type+="Reference",k.referenceType=b,delete k.url,delete k.title}else delete k.identifier,delete k.label;this.data.referenceType=void 0}function de(k){const b=this.sliceSerialize(k),E=this.stack[this.stack.length-2];E.label=gs(b),E.identifier=Nt(b).toLowerCase()}function Ae(){const k=this.stack[this.stack.length-1],b=this.resume(),E=this.stack[this.stack.length-1];if(this.data.inReference=!0,E.type==="link"){const L=k.children;E.children=L}else E.alt=b}function f(){const k=this.resume(),b=this.stack[this.stack.length-1];b.url=k}function fe(){const k=this.resume(),b=this.stack[this.stack.length-1];b.title=k}function Le(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function me(k){const b=this.resume(),E=this.stack[this.stack.length-1];E.label=b,E.identifier=Nt(this.sliceSerialize(k)).toLowerCase(),this.data.referenceType="full"}function it(k){this.data.characterReferenceType=k.type}function te(k){const b=this.sliceSerialize(k),E=this.data.characterReferenceType;let L;E?(L=ss(b,E==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):L=li(b);const H=this.stack[this.stack.length-1];H.value+=L}function Dt(k){const b=this.stack.pop();b.position.end=De(k.end)}function Re(k){q.call(this,k);const b=this.stack[this.stack.length-1];b.url=this.sliceSerialize(k)}function kt(k){q.call(this,k);const b=this.stack[this.stack.length-1];b.url="mailto:"+this.sliceSerialize(k)}function yt(){return{type:"blockquote",children:[]}}function In(){return{type:"code",lang:null,meta:null,value:""}}function So(){return{type:"inlineCode",value:""}}function vo(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Mo(){return{type:"emphasis",children:[]}}function ha(){return{type:"heading",depth:0,children:[]}}function pa(){return{type:"break"}}function da(){return{type:"html",value:""}}function _o(){return{type:"image",title:null,url:"",alt:null}}function fa(){return{type:"link",title:null,url:"",children:[]}}function ma(k){return{type:"list",ordered:k.type==="listOrdered",start:null,spread:k._spread,children:[]}}function No(k){return{type:"listItem",spread:k._spread,checked:null,children:[]}}function Eo(){return{type:"paragraph",children:[]}}function To(){return{type:"strong",children:[]}}function Ao(){return{type:"text",value:""}}function Lo(){return{type:"thematicBreak"}}}function De(e){return{line:e.line,column:e.column,offset:e.offset}}function ys(e,n){let t=-1;for(;++t<n.length;){const r=n[t];Array.isArray(r)?ys(e,r):Ec(e,r)}}function Ec(e,n){let t;for(t in n)if(ks.call(n,t))switch(t){case"canContainEols":{const r=n[t];r&&e[t].push(...r);break}case"transforms":{const r=n[t];r&&e[t].push(...r);break}case"enter":case"exit":{const r=n[t];r&&Object.assign(e[t],r);break}}}function Ta(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+cn({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+cn({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+cn({start:n.start,end:n.end})+") is still open")}function Rr(e){const n=this;n.parser=t;function t(r){return _c(r,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}const Aa={}.hasOwnProperty;function Tc(e,n){const t=n||{};function r(i,...a){let s=r.invalid;const o=r.handlers;if(i&&Aa.call(i,e)){const u=String(i[e]);s=Aa.call(o,u)?o[u]:r.unknown}if(s)return s.call(this,i,...a)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const Ac={}.hasOwnProperty;function ws(e,n){let t=-1,r;if(n.extensions)for(;++t<n.extensions.length;)ws(e,n.extensions[t]);for(r in n)if(Ac.call(n,r))switch(r){case"extensions":break;case"unsafe":{La(e[r],n[r]);break}case"join":{La(e[r],n[r]);break}case"handlers":{Lc(e[r],n[r]);break}default:e.options[r]=n[r]}return e}function La(e,n){n&&e.push(...n)}function Lc(e,n){n&&Object.assign(e,n)}function Pc(e,n,t,r){const i=t.enter("blockquote"),a=t.createTracker(r);a.move("> "),a.shift(2);const s=t.indentLines(t.containerFlow(e,a.current()),zc);return i(),s}function zc(e,n,t){return">"+(t?"":" ")+e}function xs(e,n){return Pa(e,n.inConstruct,!0)&&!Pa(e,n.notInConstruct,!1)}function Pa(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let r=-1;for(;++r<n.length;)if(e.includes(n[r]))return!0;return!1}function za(e,n,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&xs(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Bc(e,n){const t=String(e);let r=t.indexOf(n),i=r,a=0,s=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>s&&(s=a):a=1,i=r+n.length,r=t.indexOf(n,i);return s}function Dr(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Oc(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function Fc(e,n,t,r){const i=Oc(t),a=e.value||"",s=i==="`"?"GraveAccent":"Tilde";if(Dr(e,t)){const h=t.enter("codeIndented"),d=t.indentLines(a,Rc);return h(),d}const o=t.createTracker(r),u=i.repeat(Math.max(Bc(a,i)+1,3)),l=t.enter("codeFenced");let c=o.move(u);if(e.lang){const h=t.enter(`codeFencedLang${s}`);c+=o.move(t.safe(e.lang,{before:c,after:" ",encode:["`"],...o.current()})),h()}if(e.lang&&e.meta){const h=t.enter(`codeFencedMeta${s}`);c+=o.move(" "),c+=o.move(t.safe(e.meta,{before:c,after:`
`,encode:["`"],...o.current()})),h()}return c+=o.move(`
`),a&&(c+=o.move(a+`
`)),c+=o.move(u),l(),c}function Rc(e,n,t){return(t?"":"    ")+e}function hi(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function Dc(e,n,t,r){const i=hi(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("definition");let o=t.enter("label");const u=t.createTracker(r);let l=u.move("[");return l+=u.move(t.safe(t.associationId(e),{before:l,after:"]",...u.current()})),l+=u.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=t.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(t.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(o=t.enter("destinationRaw"),l+=u.move(t.safe(e.url,{before:l,after:e.title?" ":`
`,...u.current()}))),o(),e.title&&(o=t.enter(`title${a}`),l+=u.move(" "+i),l+=u.move(t.safe(e.title,{before:l,after:i,...u.current()})),l+=u.move(i),o()),s(),l}function $c(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function Ge(e){return"&#x"+e.toString(16).toUpperCase()+";"}function nr(e,n,t){const r=tr(e),i=tr(n);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}bs.peek=Hc;function bs(e,n,t,r){const i=$c(t),a=t.enter("emphasis"),s=t.createTracker(r),o=s.move(i);let u=s.move(t.containerPhrasing(e,{after:i,before:o,...s.current()}));const l=u.charCodeAt(0),c=nr(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=Ge(l)+u.slice(1));const h=u.charCodeAt(u.length-1),d=nr(r.after.charCodeAt(0),h,i);d.inside&&(u=u.slice(0,-1)+Ge(h));const p=s.move(i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},o+u+p}function Hc(e,n,t){return t.options.emphasis||"*"}const pi=function(e){if(e==null)return Vc;if(typeof e=="function")return sr(e);if(typeof e=="object")return Array.isArray(e)?Wc(e):jc(e);if(typeof e=="string")return qc(e);throw new Error("Expected function, string, or object as test")};function Wc(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=pi(e[t]);return sr(r);function r(...i){let a=-1;for(;++a<n.length;)if(n[a].apply(this,i))return!0;return!1}}function jc(e){const n=e;return sr(t);function t(r){const i=r;let a;for(a in e)if(i[a]!==n[a])return!1;return!0}}function qc(e){return sr(n);function n(t){return t&&t.type===e}}function sr(e){return n;function n(t,r,i){return!!(Kc(t)&&e.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Vc(){return!0}function Kc(e){return e!==null&&typeof e=="object"&&"type"in e}const Cs=[],Uc=!0,$r=!1,Hr="skip";function Is(e,n,t,r){let i;typeof n=="function"&&typeof t!="function"?(r=t,t=n):i=n;const a=pi(i),s=r?-1:1;o(e,void 0,[])();function o(u,l,c){const h=u&&typeof u=="object"?u:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(p?"<"+p+">":""))+")"})}return d;function d(){let p=Cs,x,C,A;if((!n||a(u,l,c[c.length-1]||void 0))&&(p=Qc(t(u,c)),p[0]===$r))return p;if("children"in u&&u.children){const w=u;if(w.children&&p[0]!==Hr)for(C=(r?w.children.length:-1)+s,A=c.concat(w);C>-1&&C<w.children.length;){const z=w.children[C];if(x=o(z,C,A)(),x[0]===$r)return x;C=typeof x[1]=="number"?x[1]:C+s}}return p}}}function Qc(e){return Array.isArray(e)?e:typeof e=="number"?[Uc,e]:e==null?Cs:[e]}function Pt(e,n,t,r){let i,a,s;typeof n=="function"&&typeof t!="function"?(a=void 0,s=n,i=t):(a=n,s=t,i=r),Is(e,a,o,i);function o(u,l){const c=l[l.length-1],h=c?c.children.indexOf(u):void 0;return s(u,h,c)}}function Ss(e,n){let t=!1;return Pt(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,$r}),!!((!e.depth||e.depth<3)&&oi(e)&&(n.options.setext||t))}function Yc(e,n,t,r){const i=Math.max(Math.min(6,e.depth||1),1),a=t.createTracker(r);if(Ss(e,t)){const c=t.enter("headingSetext"),h=t.enter("phrasing"),d=t.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return h(),c(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const s="#".repeat(i),o=t.enter("headingAtx"),u=t.enter("phrasing");a.move(s+" ");let l=t.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(l)&&(l=Ge(l.charCodeAt(0))+l.slice(1)),l=l?s+" "+l:s,t.options.closeAtx&&(l+=" "+s),u(),o(),l}vs.peek=Gc;function vs(e){return e.value||""}function Gc(){return"<"}Ms.peek=Jc;function Ms(e,n,t,r){const i=hi(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("image");let o=t.enter("label");const u=t.createTracker(r);let l=u.move("![");return l+=u.move(t.safe(e.alt,{before:l,after:"]",...u.current()})),l+=u.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=t.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(t.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(o=t.enter("destinationRaw"),l+=u.move(t.safe(e.url,{before:l,after:e.title?" ":")",...u.current()}))),o(),e.title&&(o=t.enter(`title${a}`),l+=u.move(" "+i),l+=u.move(t.safe(e.title,{before:l,after:i,...u.current()})),l+=u.move(i),o()),l+=u.move(")"),s(),l}function Jc(){return"!"}_s.peek=Zc;function _s(e,n,t,r){const i=e.referenceType,a=t.enter("imageReference");let s=t.enter("label");const o=t.createTracker(r);let u=o.move("![");const l=t.safe(e.alt,{before:u,after:"]",...o.current()});u+=o.move(l+"]["),s();const c=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(e),{before:u,after:"]",...o.current()});return s(),t.stack=c,a(),i==="full"||!l||l!==h?u+=o.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function Zc(){return"!"}Ns.peek=Xc;function Ns(e,n,t){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<t.unsafe.length;){const s=t.unsafe[a],o=t.compilePattern(s);let u;if(s.atBreak)for(;u=o.exec(r);){let l=u.index;r.charCodeAt(l)===10&&r.charCodeAt(l-1)===13&&l--,r=r.slice(0,l)+" "+r.slice(u.index+1)}}return i+r+i}function Xc(){return"`"}function Es(e,n){const t=oi(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Ts.peek=eh;function Ts(e,n,t,r){const i=hi(t),a=i==='"'?"Quote":"Apostrophe",s=t.createTracker(r);let o,u;if(Es(e,t)){const c=t.stack;t.stack=[],o=t.enter("autolink");let h=s.move("<");return h+=s.move(t.containerPhrasing(e,{before:h,after:">",...s.current()})),h+=s.move(">"),o(),t.stack=c,h}o=t.enter("link"),u=t.enter("label");let l=s.move("[");return l+=s.move(t.containerPhrasing(e,{before:l,after:"](",...s.current()})),l+=s.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=t.enter("destinationLiteral"),l+=s.move("<"),l+=s.move(t.safe(e.url,{before:l,after:">",...s.current()})),l+=s.move(">")):(u=t.enter("destinationRaw"),l+=s.move(t.safe(e.url,{before:l,after:e.title?" ":")",...s.current()}))),u(),e.title&&(u=t.enter(`title${a}`),l+=s.move(" "+i),l+=s.move(t.safe(e.title,{before:l,after:i,...s.current()})),l+=s.move(i),u()),l+=s.move(")"),o(),l}function eh(e,n,t){return Es(e,t)?"<":"["}As.peek=th;function As(e,n,t,r){const i=e.referenceType,a=t.enter("linkReference");let s=t.enter("label");const o=t.createTracker(r);let u=o.move("[");const l=t.containerPhrasing(e,{before:u,after:"]",...o.current()});u+=o.move(l+"]["),s();const c=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(e),{before:u,after:"]",...o.current()});return s(),t.stack=c,a(),i==="full"||!l||l!==h?u+=o.move(h+"]"):i==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function th(){return"["}function di(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function nh(e){const n=di(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function rh(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function Ls(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function ih(e,n,t,r){const i=t.enter("list"),a=t.bulletCurrent;let s=e.ordered?rh(t):di(t);const o=e.ordered?s==="."?")":".":nh(t);let u=n&&t.bulletLastUsed?s===t.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&c&&(!c.children||!c.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(u=!0),Ls(t)===s&&c){let h=-1;for(;++h<e.children.length;){const d=e.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=o),t.bulletCurrent=s;const l=t.containerFlow(e,r);return t.bulletLastUsed=s,t.bulletCurrent=a,i(),l}function ah(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function sh(e,n,t,r){const i=ah(t);let a=t.bulletCurrent||di(t);n&&n.type==="list"&&n.ordered&&(a=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+a);let s=a.length+1;(i==="tab"||i==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(s=Math.ceil(s/4)*4);const o=t.createTracker(r);o.move(a+" ".repeat(s-a.length)),o.shift(s);const u=t.enter("listItem"),l=t.indentLines(t.containerFlow(e,o.current()),c);return u(),l;function c(h,d,p){return d?(p?"":" ".repeat(s))+h:(p?a:a+" ".repeat(s-a.length))+h}}function oh(e,n,t,r){const i=t.enter("paragraph"),a=t.enter("phrasing"),s=t.containerPhrasing(e,r);return a(),i(),s}const lh=pi(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function uh(e,n,t,r){return(e.children.some(function(s){return lh(s)})?t.containerPhrasing:t.containerFlow).call(t,e,r)}function ch(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}Ps.peek=hh;function Ps(e,n,t,r){const i=ch(t),a=t.enter("strong"),s=t.createTracker(r),o=s.move(i+i);let u=s.move(t.containerPhrasing(e,{after:i,before:o,...s.current()}));const l=u.charCodeAt(0),c=nr(r.before.charCodeAt(r.before.length-1),l,i);c.inside&&(u=Ge(l)+u.slice(1));const h=u.charCodeAt(u.length-1),d=nr(r.after.charCodeAt(0),h,i);d.inside&&(u=u.slice(0,-1)+Ge(h));const p=s.move(i+i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},o+u+p}function hh(e,n,t){return t.options.strong||"*"}function ph(e,n,t,r){return t.safe(e.value,r)}function dh(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function fh(e,n,t){const r=(Ls(t)+(t.options.ruleSpaces?" ":"")).repeat(dh(t));return t.options.ruleSpaces?r.slice(0,-1):r}const mh={blockquote:Pc,break:za,code:Fc,definition:Dc,emphasis:bs,hardBreak:za,heading:Yc,html:vs,image:Ms,imageReference:_s,inlineCode:Ns,link:Ts,linkReference:As,list:ih,listItem:sh,paragraph:oh,root:uh,strong:Ps,text:ph,thematicBreak:fh},gh=[kh];function kh(e,n,t,r){if(n.type==="code"&&Dr(n,r)&&(e.type==="list"||e.type===n.type&&Dr(e,r)))return!1;if("spread"in t&&typeof t.spread=="boolean")return e.type==="paragraph"&&(e.type===n.type||n.type==="definition"||n.type==="heading"&&Ss(n,r))?void 0:t.spread?1:0}const st=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],yh=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:st},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:st},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:st},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:st},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:st},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:st},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:st},{atBreak:!0,character:"~"}];function wh(e){return e.label||!e.identifier?e.label||"":gs(e.identifier)}function xh(e){if(!e._compiled){const n=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function bh(e,n,t){const r=n.indexStack,i=e.children||[],a=[];let s=-1,o=t.before,u;r.push(-1);let l=n.createTracker(t);for(;++s<i.length;){const c=i[s];let h;if(r[r.length-1]=s,s+1<i.length){let x=n.handle.handlers[i[s+1].type];x&&x.peek&&(x=x.peek),h=x?x(i[s+1],e,n,{before:"",after:"",...l.current()}).charAt(0):""}else h=t.after;a.length>0&&(o==="\r"||o===`
`)&&c.type==="html"&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),o=" ",l=n.createTracker(t),l.move(a.join("")));let d=n.handle(c,e,n,{...l.current(),after:h,before:o});u&&u===d.slice(0,1)&&(d=Ge(u.charCodeAt(0))+d.slice(1));const p=n.attentionEncodeSurroundingInfo;n.attentionEncodeSurroundingInfo=void 0,u=void 0,p&&(a.length>0&&p.before&&o===a[a.length-1].slice(-1)&&(a[a.length-1]=a[a.length-1].slice(0,-1)+Ge(o.charCodeAt(0))),p.after&&(u=h)),l.move(d),a.push(d),o=d.slice(-1)}return r.pop(),a.join("")}function Ch(e,n,t){const r=n.indexStack,i=e.children||[],a=n.createTracker(t),s=[];let o=-1;for(r.push(-1);++o<i.length;){const u=i[o];r[r.length-1]=o,s.push(a.move(n.handle(u,e,n,{before:`
`,after:`
`,...a.current()}))),u.type!=="list"&&(n.bulletLastUsed=void 0),o<i.length-1&&s.push(a.move(Ih(u,i[o+1],e,n)))}return r.pop(),s.join("")}function Ih(e,n,t,r){let i=r.join.length;for(;i--;){const a=r.join[i](e,n,t,r);if(a===!0||a===1)break;if(typeof a=="number")return`
`.repeat(1+a);if(a===!1)return`

<!---->

`}return`

`}const Sh=/\r?\n|\r/g;function vh(e,n){const t=[];let r=0,i=0,a;for(;a=Sh.exec(e);)s(e.slice(r,a.index)),t.push(a[0]),r=a.index+a[0].length,i++;return s(e.slice(r)),t.join("");function s(o){t.push(n(o,i,!o))}}function Mh(e,n,t){const r=(t.before||"")+(n||"")+(t.after||""),i=[],a=[],s={};let o=-1;for(;++o<e.unsafe.length;){const c=e.unsafe[o];if(!xs(e.stack,c))continue;const h=e.compilePattern(c);let d;for(;d=h.exec(r);){const p="before"in c||!!c.atBreak,x="after"in c,C=d.index+(p?d[1].length:0);i.includes(C)?(s[C].before&&!p&&(s[C].before=!1),s[C].after&&!x&&(s[C].after=!1)):(i.push(C),s[C]={before:p,after:x})}}i.sort(_h);let u=t.before?t.before.length:0;const l=r.length-(t.after?t.after.length:0);for(o=-1;++o<i.length;){const c=i[o];c<u||c>=l||c+1<l&&i[o+1]===c+1&&s[c].after&&!s[c+1].before&&!s[c+1].after||i[o-1]===c-1&&s[c].before&&!s[c-1].before&&!s[c-1].after||(u!==c&&a.push(Ba(r.slice(u,c),"\\")),u=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!t.encode||!t.encode.includes(r.charAt(c)))?a.push("\\"):(a.push(Ge(r.charCodeAt(c))),u++))}return a.push(Ba(r.slice(u,l),t.after)),a.join("")}function _h(e,n){return e-n}function Ba(e,n){const t=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],a=e+n;let s=-1,o=0,u;for(;u=t.exec(a);)r.push(u.index);for(;++s<r.length;)o!==r[s]&&i.push(e.slice(o,r[s])),i.push("\\"),o=r[s];return i.push(e.slice(o)),i.join("")}function Nh(e){const n=e||{},t=n.now||{};let r=n.lineShift||0,i=t.line||1,a=t.column||1;return{move:u,current:s,shift:o};function s(){return{now:{line:i,column:a},lineShift:r}}function o(l){r+=l}function u(l){const c=l||"",h=c.split(/\r?\n|\r/g),d=h[h.length-1];return i+=h.length-1,a=h.length===1?a+d.length:1+d.length+r,c}}function Eh(e,n){const t=n||{},r={associationId:wh,containerPhrasing:Ph,containerFlow:zh,createTracker:Nh,compilePattern:xh,enter:a,handlers:{...mh},handle:void 0,indentLines:vh,indexStack:[],join:[...gh],options:{},safe:Bh,stack:[],unsafe:[...yh]};ws(r,t),r.options.tightDefinitions&&r.join.push(Lh),r.handle=Tc("type",{invalid:Th,unknown:Ah,handlers:r.handlers});let i=r.handle(e,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function a(s){return r.stack.push(s),o;function o(){r.stack.pop()}}}function Th(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function Ah(e){const n=e;throw new Error("Cannot handle unknown node `"+n.type+"`")}function Lh(e,n){if(e.type==="definition"&&e.type===n.type)return 0}function Ph(e,n){return bh(e,this,n)}function zh(e,n){return Ch(e,this,n)}function Bh(e,n){return Mh(this,e,n)}function Wr(e){const n=this;n.compiler=t;function t(r){return Eh(r,{...n.data("settings"),...e,extensions:n.data("toMarkdownExtensions")||[]})}}function Oa(e){if(e)throw e}var mr,Fa;function Oh(){if(Fa)return mr;Fa=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):n.call(l)==="[object Array]"},a=function(l){if(!l||n.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),h=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!h)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},s=function(l,c){t&&c.name==="__proto__"?t(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},o=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return mr=function u(){var l,c,h,d,p,x,C=arguments[0],A=1,w=arguments.length,z=!1;for(typeof C=="boolean"&&(z=C,C=arguments[1]||{},A=2),(C==null||typeof C!="object"&&typeof C!="function")&&(C={});A<w;++A)if(l=arguments[A],l!=null)for(c in l)h=o(C,c),d=o(l,c),C!==d&&(z&&d&&(a(d)||(p=i(d)))?(p?(p=!1,x=h&&i(h)?h:[]):x=h&&a(h)?h:{},s(C,{name:c,newValue:u(z,x,d)})):typeof d<"u"&&s(C,{name:c,newValue:d}));return C},mr}var Fh=Oh();const gr=Fo(Fh);function jr(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Rh(){const e=[],n={run:t,use:r};return n;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(u,...l){const c=e[++a];let h=-1;if(u){s(u);return}for(;++h<i.length;)(l[h]===null||l[h]===void 0)&&(l[h]=i[h]);i=l,c?Dh(c,o)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),n}}function Dh(e,n){let t;return r;function r(...s){const o=e.length>s.length;let u;o&&s.push(i);try{u=e.apply(this,s)}catch(l){const c=l;if(o&&t)throw c;return i(c)}o||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(s,...o){t||(t=!0,n(s,...o))}function a(s){i(null,s)}}class se extends Error{constructor(n,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof n=="string"?i=n:!a.cause&&n&&(s=!0,i=n.message,a.cause=n),!a.ruleId&&!a.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?a.ruleId=r:(a.source=r.slice(0,u),a.ruleId=r.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=cn(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}se.prototype.file="";se.prototype.name="";se.prototype.reason="";se.prototype.message="";se.prototype.stack="";se.prototype.column=void 0;se.prototype.line=void 0;se.prototype.ancestors=void 0;se.prototype.cause=void 0;se.prototype.fatal=void 0;se.prototype.place=void 0;se.prototype.ruleId=void 0;se.prototype.source=void 0;const _e={basename:$h,dirname:Hh,extname:Wh,join:jh,sep:"/"};function $h(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');kn(e);let t=0,r=-1,i=e.length,a;if(n===void 0||n.length===0||n.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(t,r)}if(n===e)return"";let s=-1,o=n.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(e.codePointAt(i)===n.codePointAt(o--)?o<0&&(r=i):(o=-1,r=s));return t===r?r=s:r<0&&(r=e.length),e.slice(t,r)}function Hh(e){if(kn(e),e.length===0)return".";let n=-1,t=e.length,r;for(;--t;)if(e.codePointAt(t)===47){if(r){n=t;break}}else r||(r=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function Wh(e){kn(e);let n=e.length,t=-1,r=0,i=-1,a=0,s;for(;n--;){const o=e.codePointAt(n);if(o===47){if(s){r=n+1;break}continue}t<0&&(s=!0,t=n+1),o===46?i<0?i=n:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":e.slice(i,t)}function jh(...e){let n=-1,t;for(;++n<e.length;)kn(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":qh(t)}function qh(e){kn(e);const n=e.codePointAt(0)===47;let t=Vh(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.codePointAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function Vh(e,n){let t="",r=0,i=-1,a=0,s=-1,o,u;for(;++s<=e.length;){if(s<e.length)o=e.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",r=0):(t=t.slice(0,u),r=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",r=0,i=s,a=0;continue}}n&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+e.slice(i+1,s):t=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return t}function kn(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Kh={cwd:Uh};function Uh(){return"/"}function qr(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Qh(e){if(typeof e=="string")e=new URL(e);else if(!qr(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return Yh(e)}function Yh(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.codePointAt(t)===37&&n.codePointAt(t+1)===50){const r=n.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(n)}const kr=["history","path","basename","stem","extname","dirname"];class Gh{constructor(n){let t;n?qr(n)?t={path:n}:typeof n=="string"||Jh(n)?t={value:n}:t=n:t={},this.cwd="cwd"in t?"":Kh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<kr.length;){const a=kr[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)kr.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?_e.basename(this.path):void 0}set basename(n){wr(n,"basename"),yr(n,"basename"),this.path=_e.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?_e.dirname(this.path):void 0}set dirname(n){Ra(this.basename,"dirname"),this.path=_e.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?_e.extname(this.path):void 0}set extname(n){if(yr(n,"extname"),Ra(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_e.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){qr(n)&&(n=Qh(n)),wr(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?_e.basename(this.path,this.extname):void 0}set stem(n){wr(n,"stem"),yr(n,"stem"),this.path=_e.join(this.dirname||"",n+(this.extname||""))}fail(n,t,r){const i=this.message(n,t,r);throw i.fatal=!0,i}info(n,t,r){const i=this.message(n,t,r);return i.fatal=void 0,i}message(n,t,r){const i=new se(n,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function yr(e,n){if(e&&e.includes(_e.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+_e.sep+"`")}function wr(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function Ra(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function Jh(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Zh=function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},Xh={}.hasOwnProperty;class fi extends Zh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Rh()}copy(){const n=new fi;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];n.use(...r)}return n.data(gr(!0,{},this.namespace)),n}data(n,t){return typeof n=="string"?arguments.length===2?(Cr("data",this.frozen),this.namespace[n]=t,this):Xh.call(this.namespace,n)&&this.namespace[n]||void 0:n?(Cr("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(n,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const t=vn(n),r=this.parser||this.Parser;return xr("parse",r),r(String(t),t)}process(n,t){const r=this;return this.freeze(),xr("process",this.parser||this.Parser),br("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const o=vn(n),u=r.parse(o);r.run(u,o,function(c,h,d){if(c||!h||!d)return l(c);const p=h,x=r.stringify(p,d);tp(x)?d.value=x:d.result=x,l(c,d)});function l(c,h){c||!h?s(c):a?a(h):t(void 0,h)}}}processSync(n){let t=!1,r;return this.freeze(),xr("processSync",this.parser||this.Parser),br("processSync",this.compiler||this.Compiler),this.process(n,i),$a("processSync","process",t),r;function i(a,s){t=!0,Oa(a),r=s}}run(n,t,r){Da(n),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(s,o){const u=vn(t);i.run(n,u,l);function l(c,h,d){const p=h||n;c?o(c):s?s(p):r(void 0,p,d)}}}runSync(n,t){let r=!1,i;return this.run(n,t,a),$a("runSync","run",r),i;function a(s,o){Oa(s),i=o,r=!0}}stringify(n,t){this.freeze();const r=vn(t),i=this.compiler||this.Compiler;return br("stringify",i),Da(n),i(n,r)}use(n,...t){const r=this.attachers,i=this.namespace;if(Cr("use",this.frozen),n!=null)if(typeof n=="function")u(n,t);else if(typeof n=="object")Array.isArray(n)?o(n):s(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function a(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...h]=l;u(c,h)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=gr(!0,i.settings,l.settings))}function o(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const h=l[c];a(h)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===l){d=h;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[p,...x]=c;const C=r[d][1];jr(C)&&jr(p)&&(p=gr(!0,C,p)),r[d]=[l,p,...x]}}}}const Vr=new fi().freeze();function xr(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function br(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Cr(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Da(e){if(!jr(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function $a(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function vn(e){return ep(e)?e:new Gh(e)}function ep(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function tp(e){return typeof e=="string"||np(e)}function np(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var zs=e=>{throw TypeError(e)},Bs=(e,n,t)=>n.has(e)||zs("Cannot "+t),T=(e,n,t)=>(Bs(e,n,"read from private field"),t?t.call(e):n.get(e)),X=(e,n,t)=>n.has(e)?zs("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),V=(e,n,t,r)=>(Bs(e,n,"write to private field"),n.set(e,t),t),Me,Jt,Pn,zn,Bn,Zt,Xt,Be,en,On,Fn,tn,Rn,nn,Dn,$n,Ct,ut,Hn,rn;class Os{}class Fs{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=n=>{var t;(t=this.top())==null||t.push(n)},this.open=n=>{this.elements.push(n)},this.close=()=>{const n=this.elements.pop();if(!n)throw es();return n}}}class mi extends Os{constructor(n,t,r){super(),this.type=n,this.content=t,this.attrs=r}push(n,...t){this.content.push(n,...t)}pop(){return this.content.pop()}static create(n,t,r){return new mi(n,t,r)}}const Kr=class extends Fs{constructor(n){super(),X(this,Me),X(this,Jt),X(this,Pn),X(this,zn),X(this,Bn),X(this,Zt),X(this,Xt),V(this,Me,Mn.none),V(this,Jt,t=>t.isText),V(this,Pn,(t,r)=>{if(T(this,Jt).call(this,t)&&T(this,Jt).call(this,r)&&Mn.sameSet(t.marks,r.marks))return this.schema.text(t.text+r.text,t.marks)}),V(this,zn,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(t));if(!r)throw ml(t);return r}),V(this,Bn,t=>{const r=T(this,zn).call(this,t);r.spec.parseMarkdown.runner(this,t,r)}),this.injectRoot=(t,r,i)=>(this.openNode(r,i),this.next(t.children),this),this.openNode=(t,r)=>(this.open(mi.create(t,[],r)),this),V(this,Zt,()=>{V(this,Me,Mn.none);const t=this.close();return T(this,Xt).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>{try{T(this,Zt).call(this)}catch(t){console.error(t)}return this},V(this,Xt,(t,r,i)=>{const a=t.createAndFill(r,i,T(this,Me));if(!a)throw fl(t,r,i);return this.push(a),a}),this.addNode=(t,r,i)=>{try{T(this,Xt).call(this,t,r,i)}catch(a){console.error(a)}return this},this.openMark=(t,r)=>{const i=t.create(r);return V(this,Me,i.addToSet(T(this,Me))),this},this.closeMark=t=>(V(this,Me,t.removeFromSet(T(this,Me))),this),this.addText=t=>{try{const r=this.top();if(!r)throw es();const i=r.pop(),a=this.schema.text(t,T(this,Me));if(!i)return r.push(a),this;const s=T(this,Pn).call(this,i,a);return s?(r.push(s),this):(r.push(i,a),this)}catch(r){return console.error(r),this}},this.build=()=>{let t;do t=T(this,Zt).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(r=>T(this,Bn).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(t,r)=>{const i=t.runSync(t.parse(r),r);return this.next(i),this},this.schema=n}};Me=new WeakMap;Jt=new WeakMap;Pn=new WeakMap;zn=new WeakMap;Bn=new WeakMap;Zt=new WeakMap;Xt=new WeakMap;Kr.create=(e,n)=>{const t=new Kr(e);return r=>(t.run(n,r),t.toDoc())};let rp=Kr;const Ur=class extends Os{constructor(n,t,r,i={}){super(),this.type=n,this.children=t,this.value=r,this.props=i,this.push=(a,...s)=>{this.children||(this.children=[]),this.children.push(a,...s)},this.pop=()=>{var a;return(a=this.children)==null?void 0:a.pop()}}};Ur.create=(e,n,t,r={})=>new Ur(e,n,t,r);let Ha=Ur;const ip=e=>Object.prototype.hasOwnProperty.call(e,"size"),Qr=class extends Fs{constructor(n){super(),X(this,Be),X(this,en),X(this,On),X(this,Fn),X(this,tn),X(this,Rn),X(this,nn),X(this,Dn),X(this,$n),X(this,Ct),X(this,ut),X(this,Hn),X(this,rn),V(this,Be,Mn.none),V(this,en,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(t));if(!r)throw gl(t.type);return r}),V(this,On,t=>T(this,en).call(this,t).spec.toMarkdown.runner(this,t)),V(this,Fn,(t,r)=>T(this,en).call(this,t).spec.toMarkdown.runner(this,t,r)),V(this,tn,t=>{const{marks:r}=t,i=o=>o.type.spec.priority??50;[...r].sort((o,u)=>i(o)-i(u)).every(o=>!T(this,Fn).call(this,o,t))&&T(this,On).call(this,t),r.forEach(o=>T(this,rn).call(this,o))}),V(this,Rn,(t,r)=>{var i;if(t.type===r||((i=t.children)==null?void 0:i.length)!==1)return t;const a=l=>{var c;if(l.type===r)return l;if(((c=l.children)==null?void 0:c.length)!==1)return null;const[h]=l.children;return h?a(h):null},s=a(t);if(!s)return t;const o=s.children?[...s.children]:void 0,u={...t,children:o};return u.children=o,s.children=[u],s}),V(this,nn,t=>{const{children:r}=t;return r&&(t.children=r.reduce((i,a,s)=>{if(s===0)return[a];const o=i.at(-1);if(o&&o.isMark&&a.isMark){a=T(this,Rn).call(this,a,o.type);const{children:u,...l}=a,{children:c,...h}=o;if(a.type===o.type&&u&&c&&JSON.stringify(l)===JSON.stringify(h)){const d={...h,children:[...c,...u]};return i.slice(0,-1).concat(T(this,nn).call(this,d))}}return i.concat(a)},[])),t}),V(this,Dn,t=>{const r={...t.props,type:t.type};return t.children&&(r.children=t.children),t.value&&(r.value=t.value),r}),this.openNode=(t,r,i)=>(this.open(Ha.create(t,void 0,r,i)),this),V(this,$n,(t,r)=>{let i="",a="";const s=t.children;let o=-1,u=-1;const l=h=>{h&&h.forEach((d,p)=>{d.type==="text"&&d.value&&(o<0&&(o=p),u=p)})};if(s){l(s);const h=s==null?void 0:s[u],d=s==null?void 0:s[o];h&&h.value.endsWith(" ")&&(a=h.value.match(/ +$/)[0],h.value=h.value.trimEnd()),d&&d.value.startsWith(" ")&&(i=d.value.match(/^ +/)[0],d.value=d.value.trimStart())}i.length&&T(this,ut).call(this,"text",void 0,i);const c=r();return a.length&&T(this,ut).call(this,"text",void 0,a),c}),V(this,Ct,(t=!1)=>{const r=this.close(),i=()=>T(this,ut).call(this,r.type,r.children,r.value,r.props);return t?T(this,$n).call(this,r,i):i()}),this.closeNode=()=>(T(this,Ct).call(this),this),V(this,ut,(t,r,i,a)=>{const s=Ha.create(t,r,i,a),o=T(this,nn).call(this,T(this,Dn).call(this,s));return this.push(o),o}),this.addNode=(t,r,i,a)=>(T(this,ut).call(this,t,r,i,a),this),V(this,Hn,(t,r,i,a)=>t.isInSet(T(this,Be))?this:(V(this,Be,t.addToSet(T(this,Be))),this.openNode(r,i,{...a,isMark:!0}))),V(this,rn,t=>{t.isInSet(T(this,Be))&&(V(this,Be,t.type.removeFromSet(T(this,Be))),T(this,Ct).call(this,!0))}),this.withMark=(t,r,i,a)=>(T(this,Hn).call(this,t,r,i,a),this),this.closeMark=t=>(T(this,rn).call(this,t),this),this.build=()=>{let t=null;do t=T(this,Ct).call(this);while(this.size());return t},this.next=t=>ip(t)?(t.forEach(r=>{T(this,tn).call(this,r)}),this):(T(this,tn).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=n}};Be=new WeakMap;en=new WeakMap;On=new WeakMap;Fn=new WeakMap;tn=new WeakMap;Rn=new WeakMap;nn=new WeakMap;Dn=new WeakMap;$n=new WeakMap;Ct=new WeakMap;ut=new WeakMap;Hn=new WeakMap;rn=new WeakMap;Qr.create=(e,n)=>{const t=new Qr(e);return r=>(t.run(r),t.toString(n))};let ap=Qr;class xe{constructor(n,t,r={}){this.match=n,this.match=n,this.handler=typeof t=="string"?sp(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function sp(e){return function(n,t,r,i){let a=e;if(t[1]){let s=t[0].lastIndexOf(t[1]);a+=t[0].slice(s+t[1].length),r+=s;let o=r-i;o>0&&(a=t[0].slice(s-o,s)+a,r=i)}return n.tr.insertText(a,r,i)}}const op=(e,n)=>{let t=e.plugins;for(let r=0;r<t.length;r++){let i=t[r],a;if(i.spec.isInputRules&&(a=i.getState(e))){if(n){let s=e.tr,o=a.transform;for(let u=o.steps.length-1;u>=0;u--)s.step(o.steps[u].invert(o.docs[u]));if(a.text){let u=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,u))}else s.delete(a.from,a.to);n(s)}return!0}}return!1};new xe(/--$/,"—",{inCodeMark:!1});new xe(/\.\.\.$/,"…",{inCodeMark:!1});new xe(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1});new xe(/"$/,"”",{inCodeMark:!1});new xe(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1});new xe(/'$/,"’",{inCodeMark:!1});function gi(e,n,t=null,r){return new xe(e,(i,a,s,o)=>{let u=t instanceof Function?t(a):t,l=i.tr.delete(s,o),c=l.doc.resolve(s),h=c.blockRange(),d=h&&jo(h,n,u);if(!d)return null;l.wrap(h,d);let p=l.doc.resolve(s-1).nodeBefore;return p&&p.type==n&&qo(l.doc,s-1)&&(!r||r(a,p))&&l.join(s-1),l})}function Rs(e,n,t=null){return new xe(e,(r,i,a,s)=>{let o=r.doc.resolve(a),u=t instanceof Function?t(i):t;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n)?r.tr.delete(a,s).setBlockType(a,a,n,u):null})}const Je=typeof navigator<"u"?navigator:null,Wa=typeof document<"u"?document:null,ft=Je&&Je.userAgent||"",Yr=/Edge\/(\d+)/.exec(ft),Ds=/MSIE \d/.exec(ft),Gr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ft),ki=!!(Ds||Gr||Yr);Ds?document.documentMode:Gr?+Gr[1]:Yr&&+Yr[1];const lp=!ki&&/gecko\/(\d+)/i.test(ft);lp&&+(/Firefox\/(\d+)/.exec(ft)||[0,0])[1];const ja=!ki&&/Chrome\/(\d+)/.exec(ft);ja&&+ja[1];const up=!ki&&!!Je&&/Apple Computer/.test(Je.vendor),cp=up&&(/Mobile\/\w+/.test(ft)||!!Je&&Je.maxTouchPoints>2);cp||Je&&/Mac/.test(Je.platform);const hp=!!Wa&&"webkitFontSmoothing"in Wa.documentElement.style;hp&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];function Ir(e,n,t,r,i,a){if(e.composing)return!1;const s=e.state,o=s.doc.resolve(n);if(o.parent.type.spec.code)return!1;const u=o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"￼")+r;for(let l of i){const c=l,h=c.match.exec(u),d=h&&h[0]&&c.handler(s,h,n-(h[0].length-r.length),t);if(d)return c.undoable!==!1&&d.setMeta(a,{transform:d,from:n,to:t,text:r}),e.dispatch(d),!0}return!1}const pp=new Xe("MILKDOWN_CUSTOM_INPUTRULES");function dp({rules:e}){const n=new Ze({key:pp,isInputRules:!0,state:{init(){return null},apply(t,r){const i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,a){return Ir(t,r,i,a,e,n)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:r}=t.state.selection;r&&Ir(t,r.pos,r.pos,"",e,n)}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;const{$cursor:i}=t.state.selection;return i?Ir(t,i.pos,i.pos,`
`,e,n):!1}}});return n}function or(e,n,t={}){return new xe(e,(r,i,a,s)=>{var o,u,l,c;const{tr:h}=r,d=i.length;let p=i[d-1],x=i[0],C=[],A=s;const w={group:p,fullMatch:x,start:a,end:s},z=(o=t.updateCaptured)==null?void 0:o.call(t,w);if(Object.assign(w,z),{group:p,fullMatch:x,start:a,end:s}=w,x===null||(p==null?void 0:p.trim())==="")return null;if(p){const I=x.search(/\S/),R=a+x.indexOf(p),W=R+p.length;C=(u=h.storedMarks)!=null?u:[],W<s&&h.delete(W,s),R>a&&h.delete(a+I,R),A=a+I+p.length;const y=(l=t.getAttr)==null?void 0:l.call(t,i);h.addMark(a,A,n.create(y)),h.setStoredMarks(C),(c=t.beforeDispatch)==null||c.call(t,{match:i,start:a,end:s,tr:h})}return h})}function fp(e,n){return Array.isArray(e)&&e.includes(n.type)||n.type===e}function mp(e,n){if(!(e instanceof Vo))return;const{node:t,$from:r}=e;if(fp(n,t))return{node:t,pos:r.pos,start:r.start(r.depth),depth:r.depth}}var $s=e=>{throw TypeError(e)},Hs=(e,n,t)=>n.has(e)||$s("Cannot "+t),v=(e,n,t)=>(Hs(e,n,"read from private field"),t?t.call(e):n.get(e)),ne=(e,n,t)=>n.has(e)?$s("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),Q=(e,n,t,r)=>(Hs(e,n,"write to private field"),n.set(e,t),t),It,ye,St,ce,qe,an,Wn,jn,le,Ve,vt,qn,Mt,sn,Vn,ct,on;function nt(e,n){return e.meta={package:"@milkdown/core",group:"System",...n},e}const Ws={strong:(e,n,t,r)=>{const i=e.marker||t.options.strong||"*",a=t.enter("strong"),s=t.createTracker(r);let o=s.move(i+i);return o+=s.move(t.containerPhrasing(e,{before:o,after:i,...s.current()})),o+=s.move(i+i),a(),o},emphasis:(e,n,t,r)=>{const i=e.marker||t.options.emphasis||"*",a=t.enter("emphasis"),s=t.createTracker(r);let o=s.move(i);return o+=s.move(t.containerPhrasing(e,{before:o,after:i,...s.current()})),o+=s.move(i),a(),o}},Qe=F({},"editorView"),ln=F({},"editorState"),Sr=F([],"initTimer"),qa=F({},"editor"),fn=F([],"inputRules"),Oe=F([],"prosePlugins"),mn=F([],"remarkPlugins"),Jr=F([],"nodeView"),Zr=F([],"markView"),ht=F(Vr().use(Rr).use(Wr),"remark"),hn=F({handlers:Ws},"remarkStringifyOptions"),Kn=et("ConfigReady");function gp(e){const n=t=>(t.record(Kn),async()=>(await e(t),t.done(Kn),()=>{t.clearTimer(Kn)}));return nt(n,{displayName:"Config"}),n}const Et=et("InitReady");function kp(e){const n=t=>(t.inject(qa,e).inject(Oe,[]).inject(mn,[]).inject(fn,[]).inject(Jr,[]).inject(Zr,[]).inject(hn,{handlers:Ws}).inject(ht,Vr().use(Rr).use(Wr)).inject(Sr,[Kn]).record(Et),async()=>{await t.waitTimers(Sr);const r=t.get(hn);return t.set(ht,Vr().use(Rr).use(Wr,r)),t.done(Et),()=>{t.remove(qa).remove(Oe).remove(mn).remove(fn).remove(Jr).remove(Zr).remove(hn).remove(ht).remove(Sr).clearTimer(Et)}});return nt(n,{displayName:"Init"}),n}const Ee=et("SchemaReady"),vr=F([],"schemaTimer"),Ye=F({},"schema"),Tt=F([],"nodes"),At=F([],"marks");function Va(e){var n;return{...e,parseDOM:(n=e.parseDOM)==null?void 0:n.map(t=>({priority:e.priority,...t}))}}const js=e=>(e.inject(Ye,{}).inject(Tt,[]).inject(At,[]).inject(vr,[Et]).record(Ee),async()=>{await e.waitTimers(vr);const n=e.get(ht),r=e.get(mn).reduce((o,u)=>o.use(u.plugin,u.options),n);e.set(ht,r);const i=Object.fromEntries(e.get(Tt).map(([o,u])=>[o,Va(u)])),a=Object.fromEntries(e.get(At).map(([o,u])=>[o,Va(u)])),s=new Ko({nodes:i,marks:a});return e.set(Ye,s),e.done(Ee),()=>{e.remove(Ye).remove(Tt).remove(At).remove(vr).clearTimer(Ee)}});nt(js,{displayName:"Schema"});class qs{constructor(){ne(this,It),ne(this,ye),Q(this,It,new rs),Q(this,ye,null),this.setCtx=n=>{Q(this,ye,n)},this.chain=()=>{if(v(this,ye)==null)throw pr();const n=v(this,ye),t=[],r=this.get,i={run:()=>{const s=Ja(...t),o=n.get(Qe);return s(o.state,o.dispatch,o)},inline:s=>(t.push(s),i),pipe:a};function a(s,o){const u=r(s);return t.push(u(o)),i}return i}}get ctx(){return v(this,ye)}create(n,t){const r=n.create(v(this,It).sliceMap);return r.set(t),r}get(n){return v(this,It).get(n).get()}remove(n){return v(this,It).remove(n)}call(n,t){if(v(this,ye)==null)throw pr();const i=this.get(n)(t),a=v(this,ye).get(Qe);return i(a.state,a.dispatch,a)}inline(n){if(v(this,ye)==null)throw pr();const t=v(this,ye).get(Qe);return n(t.state,t.dispatch,t)}}It=new WeakMap;ye=new WeakMap;function yp(e="cmdKey"){return F(()=>()=>!1,e)}const K=F(new qs,"commands"),Mr=F([Ee],"commandsTimer"),pn=et("CommandsReady"),Vs=e=>{const n=new qs;return n.setCtx(e),e.inject(K,n).inject(Mr,[Ee]).record(pn),async()=>(await e.waitTimers(Mr),e.done(pn),()=>{e.remove(K).remove(Mr).clearTimer(pn)})};nt(Vs,{displayName:"Commands"});const Un=et("ParserReady"),Ks=()=>{throw si()},Qn=F(Ks,"parser"),_r=F([],"parserTimer"),Us=e=>(e.inject(Qn,Ks).inject(_r,[Ee]).record(Un),async()=>{await e.waitTimers(_r);const n=e.get(ht),t=e.get(Ye);return e.set(Qn,rp.create(t,n)),e.done(Un),()=>{e.remove(Qn).remove(_r).clearTimer(Un)}});nt(Us,{displayName:"Parser"});const Yn=et("SerializerReady"),Nr=F([],"serializerTimer"),Qs=()=>{throw si()},Er=F(Qs,"serializer"),Ys=e=>(e.inject(Er,Qs).inject(Nr,[Ee]).record(Yn),async()=>{await e.waitTimers(Nr);const n=e.get(ht),t=e.get(Ye);return e.set(Er,ap.create(t,n)),e.done(Yn),()=>{e.remove(Er).remove(Nr).clearTimer(Yn)}});nt(Ys,{displayName:"Serializer"});const Gn=F("","defaultValue"),Tr=F(e=>e,"stateOptions"),Ar=F([],"editorStateTimer"),Jn=et("EditorStateReady");function wp(e,n,t){if(typeof e=="string")return n(e);if(e.type==="html")return Yo.fromSchema(t).parse(e.dom);if(e.type==="json")return Go.fromJSON(t,e.value);throw hl(e)}const xp=new Xe("MILKDOWN_STATE_TRACKER");function bp(e){const n=Ja(op,Xo,Zo,Jo);return e.Backspace=n,e}const Gs=e=>(e.inject(Gn,"").inject(ln,{}).inject(Tr,n=>n).inject(Ar,[Un,Yn,pn]).record(Jn),async()=>{await e.waitTimers(Ar);const n=e.get(Ye),t=e.get(Qn),r=e.get(fn),i=e.get(Tr),a=e.get(Oe),s=e.get(Gn),o=wp(s,t,n),u=[...a,new Ze({key:xp,state:{init:()=>{},apply:(h,d,p,x)=>{e.set(ln,x)}}}),dp({rules:r}),Ga(bp(el))];e.set(Oe,u);const l=i({schema:n,doc:o,plugins:u}),c=Uo.create(l);return e.set(ln,c),e.done(Jn),()=>{e.remove(Gn).remove(ln).remove(Tr).remove(Ar).clearTimer(Jn)}});nt(Gs,{displayName:"EditorState"});const Lr=et("EditorViewReady"),Pr=F([],"editorViewTimer"),Zn=F({},"editorViewOptions"),Xn=F(null,"root"),Xr=F(null,"rootDOM"),ei=F({},"rootAttrs");function Cp(e,n){const t=document.createElement("div");t.className="milkdown",e.appendChild(t),n.set(Xr,t);const r=n.get(ei);return Object.entries(r).forEach(([i,a])=>t.setAttribute(i,a)),t}function Ip(e){e.classList.add("editor"),e.setAttribute("role","textbox")}const Sp=new Xe("MILKDOWN_VIEW_CLEAR"),Js=e=>(e.inject(Xn,document.body).inject(Qe,{}).inject(Zn,{}).inject(Xr,null).inject(ei,{}).inject(Pr,[Jn]).record(Lr),async()=>{await e.wait(Et);const n=e.get(Xn)||document.body,t=typeof n=="string"?document.querySelector(n):n;e.update(Oe,u=>[new Ze({key:Sp,view:l=>{const c=t?Cp(t,e):void 0;return(()=>{if(c&&t){const d=l.dom;t.replaceChild(c,d),c.appendChild(d)}})(),{destroy:()=>{c!=null&&c.parentNode&&(c==null||c.parentNode.replaceChild(l.dom,c)),c==null||c.remove()}}}}),...u]),await e.waitTimers(Pr);const r=e.get(ln),i=e.get(Zn),a=Object.fromEntries(e.get(Jr)),s=Object.fromEntries(e.get(Zr)),o=new Qo(t,{state:r,nodeViews:a,markViews:s,...i});return Ip(o.dom),e.set(Qe,o),e.done(Lr),()=>{o==null||o.destroy(),e.remove(Xn).remove(Qe).remove(Zn).remove(Xr).remove(ei).remove(Pr).clearTimer(Lr)}});nt(Js,{displayName:"EditorView"});const vp=class Zs{constructor(){ne(this,St),ne(this,ce),ne(this,qe),ne(this,an),ne(this,Wn),ne(this,jn),ne(this,le),ne(this,Ve),ne(this,vt),ne(this,qn),ne(this,Mt),ne(this,sn),ne(this,Vn),ne(this,ct),ne(this,on),Q(this,St,!1),Q(this,ce,"Idle"),Q(this,qe,[]),Q(this,an,()=>{}),Q(this,Wn,new rs),Q(this,jn,new Sl),Q(this,le,new Map),Q(this,Ve,new Map),Q(this,vt,new Il(v(this,Wn),v(this,jn))),Q(this,qn,()=>{const n=gp(async r=>{await Promise.all(v(this,qe).map(i=>i(r)))}),t=[js,Us,Ys,Vs,Gs,Js,kp(this),n];v(this,Mt).call(this,t,v(this,Ve))}),Q(this,Mt,(n,t)=>{n.forEach(r=>{const i=v(this,vt).produce(v(this,St)?r.meta:void 0),a=r(i);t.set(r,{ctx:i,handler:a,cleanup:void 0})})}),Q(this,sn,(n,t=!1)=>Promise.all([n].flat().map(r=>{const i=v(this,le).get(r),a=i==null?void 0:i.cleanup;return t?v(this,le).delete(r):v(this,le).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof a=="function"?a():a}))),Q(this,Vn,async()=>{await Promise.all([...v(this,Ve).entries()].map(([n,{cleanup:t}])=>typeof t=="function"?t():t)),v(this,Ve).clear()}),Q(this,ct,n=>{Q(this,ce,n),v(this,an).call(this,n)}),Q(this,on,n=>[...n.entries()].map(async([t,r])=>{const{ctx:i,handler:a}=r;if(!a)return;const s=await a();n.set(t,{ctx:i,handler:a,cleanup:s})})),this.enableInspector=(n=!0)=>(Q(this,St,n),this),this.onStatusChange=n=>(Q(this,an,n),this),this.config=n=>(v(this,qe).push(n),this),this.removeConfig=n=>(Q(this,qe,v(this,qe).filter(t=>t!==n)),this),this.use=n=>{const t=[n].flat();return t.flat().forEach(r=>{v(this,le).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),v(this,ce)==="Created"&&v(this,Mt).call(this,t,v(this,le)),this},this.remove=async n=>v(this,ce)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(n))},50)})):(await v(this,sn).call(this,[n].flat(),!0),this),this.create=async()=>v(this,ce)==="OnCreate"?this:(v(this,ce)==="Created"&&await this.destroy(),v(this,ct).call(this,"OnCreate"),v(this,qn).call(this),v(this,Mt).call(this,[...v(this,le).keys()],v(this,le)),await Promise.all([v(this,on).call(this,v(this,Ve)),v(this,on).call(this,v(this,le))].flat()),v(this,ct).call(this,"Created"),this),this.destroy=async(n=!1)=>v(this,ce)==="Destroyed"||v(this,ce)==="OnDestroy"?this:v(this,ce)==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(n))},50)}):(n&&Q(this,qe,[]),v(this,ct).call(this,"OnDestroy"),await v(this,sn).call(this,[...v(this,le).keys()],n),await v(this,Vn).call(this),v(this,ct).call(this,"Destroyed"),this),this.action=n=>n(v(this,vt)),this.inspect=()=>v(this,St)?[...v(this,Ve).values(),...v(this,le).values()].map(({ctx:n})=>{var t;return(t=n==null?void 0:n.inspector)==null?void 0:t.read()}).filter(n=>!!n):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new Zs}get ctx(){return v(this,vt)}get status(){return v(this,ce)}};St=new WeakMap;ce=new WeakMap;qe=new WeakMap;an=new WeakMap;Wn=new WeakMap;jn=new WeakMap;le=new WeakMap;Ve=new WeakMap;vt=new WeakMap;qn=new WeakMap;Mt=new WeakMap;sn=new WeakMap;Vn=new WeakMap;ct=new WeakMap;on=new WeakMap;let Mp=vp;function G(e,n){const t=yp(e),r=i=>async()=>{r.key=t,await i.wait(pn);const a=n(i);return i.get(K).create(t,a),r.run=s=>i.get(K).call(e,s),()=>{i.get(K).remove(t)}};return r}function be(e){const n=t=>async()=>{await t.wait(Ee);const r=e(t);return t.update(fn,i=>[...i,r]),n.inputRule=r,()=>{t.update(fn,i=>i.filter(a=>a!==r))}};return n}function _p(e,n){const t=r=>async()=>{const i=n(r);return r.update(At,a=>[...a.filter(s=>s[0]!==e),[e,i]]),t.id=e,t.schema=i,()=>{r.update(At,a=>a.filter(([s])=>s!==e))}};return t.type=r=>{const i=r.get(Ye).marks[e];if(!i)throw yl(e);return i},t}function yi(e,n){const t=r=>async()=>{const i=n(r);return r.update(Tt,a=>[...a.filter(s=>s[0]!==e),[e,i]]),t.id=e,t.schema=i,()=>{r.update(Tt,a=>a.filter(([s])=>s!==e))}};return t.type=r=>{const i=r.get(Ye).nodes[e];if(!i)throw kl(e);return i},t}function yn(e){let n;const t=r=>async()=>(await r.wait(Ee),n=e(r),r.update(Oe,i=>[...i,n]),()=>{r.update(Oe,i=>i.filter(a=>a!==n))});return t.plugin=()=>n,t.key=()=>n.spec.key,t}function Np(e){const n=t=>async()=>{await t.wait(Ee);const r=e(t),i=Ga(r);return t.update(Oe,a=>[...a,i]),n.keymap=r,()=>{t.update(Oe,a=>a.filter(s=>s!==i))}};return n}function rt(e,n){const t=F(e,n),r=i=>(i.inject(t),()=>()=>{i.remove(t)});return r.key=t,r}function Ce(e,n){const t=rt(n,e),r=yi(e,a=>a.get(t.key)(a)),i=[t,r];return i.id=r.id,i.node=r,i.type=a=>r.type(a),i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=a=>s=>()=>{const o=s.get(t.key),l=a(o)(s);s.update(Tt,c=>[...c.filter(h=>h[0]!==e),[e,l]]),i.schema=l},i}function lr(e,n){const t=rt(n,e),r=_p(e,a=>a.get(t.key)(a)),i=[t,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=a=>s=>()=>{const o=s.get(t.key),l=a(o)(s);s.update(At,c=>[...c.filter(h=>h[0]!==e),[e,l]]),i.schema=l},i}function Ie(e,n){const t=Object.fromEntries(Object.entries(n).map(([s,{shortcuts:o}])=>[s,o])),r=rt(t,`${e}Keymap`),i=Np(s=>{const o=s.get(r.key),u=Object.entries(n).flatMap(([l,{command:c}])=>[o[l]].flat().map(d=>[d,c(s)]));return Object.fromEntries(u)}),a=[r,i];return a.ctx=r,a.shortcuts=i,a.key=r.key,a.keymap=i.keymap,a}const Se=(e,n=()=>({}))=>rt(n,`${e}Attr`),ur=(e,n=()=>({}))=>rt(n,`${e}Attr`);function zt(e,n,t){const r=rt({},e),i=s=>async()=>{await s.wait(Et);const u={plugin:n(s),options:s.get(r.key)};return s.update(mn,l=>[...l,u]),()=>{s.update(mn,l=>l.filter(c=>c!==u))}},a=[r,i];return a.id=e,a.plugin=i,a.options=r,a}function Ep(e){const n=new Map;if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Pt(e,"definition",function(r){const i=Ka(r.identifier);i&&!n.get(i)&&n.set(i,r)}),t;function t(r){const i=Ka(r);return n.get(i)}}function Ka(e){return String(e||"").toUpperCase()}function Tp(){return function(e){const n=Ep(e);Pt(e,function(t,r,i){if(t.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[Hr,r];if(t.type==="imageReference"||t.type==="linkReference"){const a=n(t.identifier);if(a&&i&&typeof r=="number")return i.children[r]=t.type==="imageReference"?{type:"image",url:a.url,title:a.title,alt:t.alt}:{type:"link",url:a.url,title:a.title,children:t.children},[Hr,r]}})}}function Xs(e,n){var t;if(!(n.childCount>=1&&((t=n.lastChild)==null?void 0:t.type.name)==="hardbreak")){e.next(n.content);return}const i=[];n.content.forEach((a,s,o)=>{o!==n.childCount-1&&i.push(a)}),e.next(al.fromArray(i))}function g(e,n){return Object.assign(e,{meta:{package:"@milkdown/preset-commonmark",...n}}),e}const wi=ur("emphasis");g(wi,{displayName:"Attr<emphasis>",group:"Emphasis"});const Bt=lr("emphasis",e=>({attrs:{marker:{default:e.get(hn).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:n=>n==="italic"}],toDOM:n=>["em",e.get(wi.key)(n)],parseMarkdown:{match:n=>n.type==="emphasis",runner:(n,t,r)=>{n.openMark(r,{marker:t.marker}),n.next(t.children),n.closeMark(r)}},toMarkdown:{match:n=>n.type.name==="emphasis",runner:(n,t)=>{n.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));g(Bt.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});g(Bt.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const xi=G("ToggleEmphasis",e=>()=>ni(Bt.type(e)));g(xi,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const eo=be(e=>or(/(?:^|[^*])\*([^*]+)\*$/,Bt.type(e),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:n,start:t})=>n.startsWith("*")?{}:{fullMatch:n.slice(1),start:t+1}}));g(eo,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const to=be(e=>or(/(?:^|[^_])_([^_]+)_$/,Bt.type(e),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:n,start:t})=>n.startsWith("_")?{}:{fullMatch:n.slice(1),start:t+1}}));g(to,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const bi=Ie("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:e=>{const n=e.get(K);return()=>n.call(xi.key)}}});g(bi.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});g(bi.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const Ci=ur("strong");g(Ci,{displayName:"Attr<strong>",group:"Strong"});const wn=lr("strong",e=>({attrs:{marker:{default:e.get(hn).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:n=>n==="bold"},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM:n=>["strong",e.get(Ci.key)(n)],parseMarkdown:{match:n=>n.type==="strong",runner:(n,t,r)=>{n.openMark(r,{marker:t.marker}),n.next(t.children),n.closeMark(r)}},toMarkdown:{match:n=>n.type.name==="strong",runner:(n,t)=>{n.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));g(wn.mark,{displayName:"MarkSchema<strong>",group:"Strong"});g(wn.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Ii=G("ToggleStrong",e=>()=>ni(wn.type(e)));g(Ii,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const no=be(e=>or(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,wn.type(e),{getAttr:n=>({marker:n[0].startsWith("*")?"*":"_"})}));g(no,{displayName:"InputRule<strong>",group:"Strong"});const Si=Ie("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:e=>{const n=e.get(K);return()=>n.call(Ii.key)}}});g(Si.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});g(Si.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const vi=ur("inlineCode");g(vi,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Ue=lr("inlineCode",e=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:n=>["code",e.get(vi.key)(n)],parseMarkdown:{match:n=>n.type==="inlineCode",runner:(n,t,r)=>{n.openMark(r),n.addText(t.value),n.closeMark(r)}},toMarkdown:{match:n=>n.type.name==="inlineCode",runner:(n,t,r)=>{n.withMark(t,"inlineCode",r.text||"")}}}));g(Ue.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});g(Ue.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const Mi=G("ToggleInlineCode",e=>()=>(n,t)=>{const{selection:r,tr:i}=n;if(r.empty)return!1;const{from:a,to:s}=r;return n.doc.rangeHasMark(a,s,Ue.type(e))?(t==null||t(i.removeMark(a,s,Ue.type(e))),!0):(Object.keys(n.schema.marks).filter(l=>l!==Ue.type.name).map(l=>n.schema.marks[l]).forEach(l=>{i.removeMark(a,s,l)}),t==null||t(i.addMark(a,s,Ue.type(e).create())),!0)});g(Mi,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const ro=be(e=>or(/(?:`)([^`]+)(?:`)$/,Ue.type(e)));g(ro,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const _i=Ie("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:e=>{const n=e.get(K);return()=>n.call(Mi.key)}}});g(_i.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});g(_i.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const Ni=ur("link");g(Ni,{displayName:"Attr<link>",group:"Link"});const Lt=lr("link",e=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM:n=>["a",{...e.get(Ni.key)(n),...n.attrs}],parseMarkdown:{match:n=>n.type==="link",runner:(n,t,r)=>{const i=t.url,a=t.title;n.openMark(r,{href:i,title:a}),n.next(t.children),n.closeMark(r)}},toMarkdown:{match:n=>n.type.name==="link",runner:(n,t)=>{n.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));g(Lt.mark,{displayName:"MarkSchema<link>",group:"Link"});const io=G("ToggleLink",e=>(n={})=>ni(Lt.type(e),n));g(io,{displayName:"Command<toggleLinkCommand>",group:"Link"});const ao=G("UpdateLink",e=>(n={})=>(t,r)=>{if(!r)return!1;let i,a=-1;const{selection:s}=t,{from:o,to:u}=s;if(t.doc.nodesBetween(o,o===u?u+1:u,(x,C)=>{if(Lt.type(e).isInSet(x.marks))return i=x,a=C,!1}),!i)return!1;const l=i.marks.find(({type:x})=>x===Lt.type(e));if(!l)return!1;const c=a,h=a+i.nodeSize,{tr:d}=t,p=Lt.type(e).create({...l.attrs,...n});return p?(r(d.removeMark(c,h,l).addMark(c,h,p).setSelection(new ri(d.selection.$anchor)).scrollIntoView()),!0):!1});g(ao,{displayName:"Command<updateLinkCommand>",group:"Link"});const so=yi("doc",()=>({content:"block+",parseMarkdown:{match:({type:e})=>e==="root",runner:(e,n,t)=>{e.injectRoot(n,t)}},toMarkdown:{match:e=>e.type.name==="doc",runner:(e,n)=>{e.openNode("root"),e.next(n.content)}}}));g(so,{displayName:"NodeSchema<doc>",group:"Doc"});function Ap(e){return Is(e,n=>{var t;return n.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((t=n.value)==null?void 0:t.trim())},(n,t)=>{if(!t.length)return;const r=t[t.length-1];if(!r)return;const i=r.children.indexOf(n);i!==-1&&r.children.splice(i,1)},!0)}const cr=zt("remark-preserve-empty-line",()=>()=>Ap);g(cr.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});g(cr.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const Ei=Se("paragraph");g(Ei,{displayName:"Attr<paragraph>",group:"Paragraph"});const mt=Ce("paragraph",e=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:n=>["p",e.get(Ei.key)(n),0],parseMarkdown:{match:n=>n.type==="paragraph",runner:(n,t,r)=>{n.openNode(r),t.children?n.next(t.children):n.addText(t.value||""),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="paragraph",runner:(n,t)=>{var r;const a=(r=e.get(Qe).state)==null?void 0:r.doc.lastChild;n.openNode("paragraph"),(!t.content||t.content.size===0)&&t!==a&&Lp(e)?n.addNode("html",void 0,"<br />"):Xs(n,t),n.closeNode()}}}));function Lp(e){let n=!1;try{e.get(cr.id),n=!0}catch{n=!1}return n}g(mt.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});g(mt.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Ti=G("TurnIntoText",e=>()=>dn(mt.type(e)));g(Ti,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const Ai=Ie("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:e=>{const n=e.get(K);return()=>n.call(Ti.key)}}});g(Ai.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});g(Ai.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const Pp=Array(6).fill(0).map((e,n)=>n+1);function zp(e){return e.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const hr=rt(zp,"headingIdGenerator");g(hr,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Li=Se("heading");g(Li,{displayName:"Attr<heading>",group:"Heading"});const gt=Ce("heading",e=>{const n=e.get(hr.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:Pp.map(t=>({tag:`h${t}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw dt(r);return{level:t,id:r.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...e.get(Li.key)(t),id:t.attrs.id||n(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,r,i)=>{const a=r.depth;t.openNode(i,{level:a}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,r)=>{t.openNode("heading",void 0,{depth:r.attrs.level}),Xs(t,r),t.closeNode()}}}});g(gt.node,{displayName:"NodeSchema<heading>",group:"Heading"});g(gt.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const oo=be(e=>Rs(/^(?<hashes>#+)\s$/,gt.type(e),n=>{var t,r;const i=((r=(t=n.groups)==null?void 0:t.hashes)==null?void 0:r.length)||0,a=e.get(Qe),{$from:s}=a.state.selection,o=s.node();if(o.type.name==="heading"){let u=Number(o.attrs.level)+Number(i);return u>6&&(u=6),{level:u}}return{level:i}}));g(oo,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Ke=G("WrapInHeading",e=>n=>(n??(n=1),n<1?dn(mt.type(e)):dn(gt.type(e),{level:n})));g(Ke,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const Pi=G("DowngradeHeading",e=>()=>(n,t,r)=>{const{$from:i}=n.selection,a=i.node();if(a.type!==gt.type(e)||!n.selection.empty||i.parentOffset!==0)return!1;const s=a.attrs.level-1;return s?(t==null||t(n.tr.setNodeMarkup(n.selection.$from.before(),void 0,{...a.attrs,level:s})),!0):dn(mt.type(e))(n,t,r)});g(Pi,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const zi=Ie("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:e=>{const n=e.get(K);return()=>n.call(Ke.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:e=>{const n=e.get(K);return()=>n.call(Pi.key)}}});g(zi.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});g(zi.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Bi=Se("blockquote");g(Bi,{displayName:"Attr<blockquote>",group:"Blockquote"});const xn=Ce("blockquote",e=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:n=>["blockquote",e.get(Bi.key)(n),0],parseMarkdown:{match:({type:n})=>n==="blockquote",runner:(n,t,r)=>{n.openNode(r).next(t.children).closeNode()}},toMarkdown:{match:n=>n.type.name==="blockquote",runner:(n,t)=>{n.openNode("blockquote").next(t.content).closeNode()}}}));g(xn.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});g(xn.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const lo=be(e=>gi(/^\s*>\s$/,xn.type(e)));g(lo,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Oi=G("WrapInBlockquote",e=>()=>ii(xn.type(e)));g(Oi,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const Fi=Ie("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:e=>{const n=e.get(K);return()=>n.call(Oi.key)}}});g(Fi.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});g(Fi.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const Ri=Se("codeBlock",()=>({pre:{},code:{}}));g(Ri,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const bn=Ce("code_block",e=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{language:n.dataset.language}}}],toDOM:n=>{const t=e.get(Ri.key)(n),r=n.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...t.pre,...i},["code",t.code,0]]},parseMarkdown:{match:({type:n})=>n==="code",runner:(n,t,r)=>{const i=t.lang??"",a=t.value;n.openNode(r,{language:i}),a&&n.addText(a),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="code_block",runner:(n,t)=>{var r;n.addNode("code",void 0,((r=t.content.firstChild)==null?void 0:r.text)||"",{lang:t.attrs.language})}}}));g(bn.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});g(bn.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const uo=be(e=>Rs(/^```(?<language>[a-z]*)?[\s\n]$/,bn.type(e),n=>{var t;return{language:((t=n.groups)==null?void 0:t.language)??""}}));g(uo,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const Di=G("CreateCodeBlock",e=>(n="")=>dn(bn.type(e),{language:n}));g(Di,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const Bp=G("UpdateCodeBlockLanguage",()=>({pos:e,language:n}={pos:-1,language:""})=>(t,r)=>e>=0?(r==null||r(t.tr.setNodeAttribute(e,"language",n)),!0):!1);g(Bp,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const $i=Ie("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:e=>{const n=e.get(K);return()=>n.call(Di.key)}}});g($i.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});g($i.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const Hi=Se("image");g(Hi,{displayName:"Attr<image>",group:"Image"});const Ot=Ce("image",e=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{src:n.getAttribute("src")||"",alt:n.getAttribute("alt")||"",title:n.getAttribute("title")||n.getAttribute("alt")||""}}}],toDOM:n=>["img",{...e.get(Hi.key)(n),...n.attrs}],parseMarkdown:{match:({type:n})=>n==="image",runner:(n,t,r)=>{const i=t.url,a=t.alt,s=t.title;n.addNode(r,{src:i,alt:a,title:s})}},toMarkdown:{match:n=>n.type.name==="image",runner:(n,t)=>{n.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));g(Ot.node,{displayName:"NodeSchema<image>",group:"Image"});g(Ot.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const co=G("InsertImage",e=>(n={})=>(t,r)=>{if(!r)return!0;const{src:i="",alt:a="",title:s=""}=n,o=Ot.type(e).create({src:i,alt:a,title:s});return o&&r(t.tr.replaceSelectionWith(o).scrollIntoView()),!0});g(co,{displayName:"Command<insertImageCommand>",group:"Image"});const ho=G("UpdateImage",e=>(n={})=>(t,r)=>{const i=mp(t.selection,Ot.type(e));if(!i)return!1;const{node:a,pos:s}=i,o={...a.attrs},{src:u,alt:l,title:c}=n;return u!==void 0&&(o.src=u),l!==void 0&&(o.alt=l),c!==void 0&&(o.title=c),r==null||r(t.tr.setNodeMarkup(s,void 0,o).scrollIntoView()),!0});g(ho,{displayName:"Command<updateImageCommand>",group:"Image"});const Op=be(e=>new xe(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(n,t,r,i)=>{const[a,s,o="",u]=t;return a?n.tr.replaceWith(r,i,Ot.type(e).create({src:o,alt:s,title:u})):null}));g(Op,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const rr=Se("hardbreak",e=>({"data-type":"hardbreak","data-is-inline":e.attrs.isInline}));g(rr,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const pt=Ce("hardbreak",e=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:n=>n.attrs.isInline?["span",e.get(rr.key)(n)," "]:["br",e.get(rr.key)(n)],parseMarkdown:{match:({type:n})=>n==="break",runner:(n,t,r)=>{var i;n.addNode(r,{isInline:!!((i=t.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:n=>n.type.name==="hardbreak",runner:(n,t)=>{t.attrs.isInline?n.addNode("text",void 0,`
`):n.addNode("break")}}}));g(pt.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});g(pt.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const Wi=G("InsertHardbreak",e=>()=>(n,t)=>{var r;const{selection:i,tr:a}=n;if(!(i instanceof ri))return!1;if(i.empty){const s=i.$from.node();if(s.childCount>0&&((r=s.lastChild)==null?void 0:r.type.name)==="hardbreak")return t==null||t(a.replaceRangeWith(i.to-1,i.to,n.schema.node("paragraph")).setSelection(Za.near(a.doc.resolve(i.to))).scrollIntoView()),!0}return t==null||t(a.setMeta("hardbreak",!0).replaceSelectionWith(pt.type(e).create()).scrollIntoView()),!0});g(Wi,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const ji=Ie("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:e=>{const n=e.get(K);return()=>n.call(Wi.key)}}});g(ji.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});g(ji.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const qi=Se("hr");g(qi,{displayName:"Attr<hr>",group:"Hr"});const Cn=Ce("hr",e=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:n=>["hr",e.get(qi.key)(n)],parseMarkdown:{match:({type:n})=>n==="thematicBreak",runner:(n,t,r)=>{n.addNode(r)}},toMarkdown:{match:n=>n.type.name==="hr",runner:n=>{n.addNode("thematicBreak")}}}));g(Cn.node,{displayName:"NodeSchema<hr>",group:"Hr"});g(Cn.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const po=be(e=>new xe(/^(?:---|___\s|\*\*\*\s)$/,(n,t,r,i)=>{const{tr:a}=n;return t[0]&&a.replaceWith(r-1,i,Cn.type(e).create()),a}));g(po,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const fo=G("InsertHr",e=>()=>(n,t)=>{if(!t)return!0;const r=mt.node.type(e).create(),{tr:i,selection:a}=n,{from:s}=a,o=Cn.type(e).create();if(!o)return!0;const u=i.replaceSelectionWith(o).insert(s,r),l=Za.findFrom(u.doc.resolve(s),1,!0);return l&&t(u.setSelection(l).scrollIntoView()),!0});g(fo,{displayName:"Command<insertHrCommand>",group:"Hr"});const Vi=Se("bulletList");g(Vi,{displayName:"Attr<bulletList>",group:"BulletList"});const Ft=Ce("bullet_list",e=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{spread:n.dataset.spread==="true"}}}],toDOM:n=>["ul",{...e.get(Vi.key)(n),"data-spread":n.attrs.spread},0],parseMarkdown:{match:({type:n,ordered:t})=>n==="list"&&!t,runner:(n,t,r)=>{const i=t.spread!=null?`${t.spread}`:"false";n.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:n=>n.type.name==="bullet_list",runner:(n,t)=>{n.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread}).next(t.content).closeNode()}}}));g(Ft.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});g(Ft.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const mo=be(e=>gi(/^\s*([-+*])\s$/,Ft.type(e)));g(mo,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const Ki=G("WrapInBulletList",e=>()=>ii(Ft.type(e)));g(Ki,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const Ui=Ie("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:e=>{const n=e.get(K);return()=>n.call(Ki.key)}}});g(Ui.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});g(Ui.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const Qi=Se("orderedList");g(Qi,{displayName:"Attr<orderedList>",group:"OrderedList"});const Rt=Ce("ordered_list",e=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{spread:n.dataset.spread,order:n.hasAttribute("start")?Number(n.getAttribute("start")):1}}}],toDOM:n=>["ol",{...e.get(Qi.key)(n),...n.attrs.order===1?{}:n.attrs.order,"data-spread":n.attrs.spread},0],parseMarkdown:{match:({type:n,ordered:t})=>n==="list"&&!!t,runner:(n,t,r)=>{const i=t.spread!=null?`${t.spread}`:"true";n.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:n=>n.type.name==="ordered_list",runner:(n,t)=>{n.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),n.next(t.content),n.closeNode()}}}));g(Rt.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});g(Rt.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const go=be(e=>gi(/^\s*(\d+)\.\s$/,Rt.type(e),n=>({order:Number(n[1])}),(n,t)=>t.childCount+t.attrs.order===Number(n[1])));g(go,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const Yi=G("WrapInOrderedList",e=>()=>ii(Rt.type(e)));g(Yi,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const Gi=Ie("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:e=>{const n=e.get(K);return()=>n.call(Yi.key)}}});g(Gi.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});g(Gi.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const Ji=Se("listItem");g(Ji,{displayName:"Attr<listItem>",group:"ListItem"});const Fe=Ce("list_item",e=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:n=>{if(!(n instanceof HTMLElement))throw dt(n);return{label:n.dataset.label,listType:n.dataset.listType,spread:n.dataset.spread==="true"}}}],toDOM:n=>["li",{...e.get(Ji.key)(n),"data-label":n.attrs.label,"data-list-type":n.attrs.listType,"data-spread":n.attrs.spread},0],parseMarkdown:{match:({type:n})=>n==="listItem",runner:(n,t,r)=>{const i=t.label!=null?`${t.label}.`:"•",a=t.label!=null?"ordered":"bullet",s=t.spread!=null?`${t.spread}`:"true";n.openNode(r,{label:i,listType:a,spread:s}),n.next(t.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="list_item",runner:(n,t)=>{n.openNode("listItem",void 0,{spread:t.attrs.spread}),n.next(t.content),n.closeNode()}}}));g(Fe.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});g(Fe.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const Zi=G("SinkListItem",e=>()=>tl(Fe.type(e)));g(Zi,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const Xi=G("LiftListItem",e=>()=>Xa(Fe.type(e)));g(Xi,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const ea=G("SplitListItem",e=>()=>nl(Fe.type(e)));g(ea,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function Fp(e){return(n,t,r)=>{const{selection:i}=n;if(!(i instanceof ri))return!1;const{empty:a,$from:s}=i;if(!a||s.parentOffset!==0)return!1;const o=s.node(-1);return o.type!==Fe.type(e)||o.firstChild!==s.node()||s.node(-2).childCount>1?!1:Xa(Fe.type(e))(n,t,r)}}const ta=G("LiftFirstListItem",e=>()=>Fp(e));g(ta,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const na=Ie("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:e=>{const n=e.get(K);return()=>n.call(ea.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:e=>{const n=e.get(K);return()=>n.call(Zi.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:e=>{const n=e.get(K);return()=>n.call(Xi.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:e=>{const n=e.get(K);return()=>n.call(ta.key)}}});g(na.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});g(na.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const ko=yi("text",()=>({group:"inline",parseMarkdown:{match:({type:e})=>e==="text",runner:(e,n)=>{e.addText(n.value)}},toMarkdown:{match:e=>e.type.name==="text",runner:(e,n)=>{e.addNode("text",void 0,n.text)}}}));g(ko,{displayName:"NodeSchema<text>",group:"Text"});const ra=Se("html");g(ra,{displayName:"Attr<html>",group:"Html"});const ia=Ce("html",e=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:n=>{const t=document.createElement("span"),r={...e.get(ra.key)(n),"data-value":n.attrs.value,"data-type":"html"};return t.textContent=n.attrs.value,["span",r,n.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:n=>({value:n.dataset.value??""})}],parseMarkdown:{match:({type:n})=>n==="html",runner:(n,t,r)=>{n.addNode(r,{value:t.value})}},toMarkdown:{match:n=>n.type.name==="html",runner:(n,t)=>{n.addNode("html",void 0,t.attrs.value)}}}));g(ia.node,{displayName:"NodeSchema<html>",group:"Html"});g(ia.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const Rp=[so,Ei,mt,hr,Li,gt,rr,pt,Bi,xn,Ri,bn,qi,Cn,Hi,Ot,Vi,Ft,Qi,Rt,Ji,Fe,wi,Bt,Ci,wn,vi,Ue,Ni,Lt,ra,ia,ko].flat(),Dp=[lo,mo,go,uo,po,oo].flat(),$p=[eo,to,ro,no],Hp=[Ti,Oi,Ke,Pi,Di,Wi,fo,co,ho,Yi,Ki,Zi,ea,Xi,ta,xi,Mi,Ii,io,ao],Wp=[Fi,$i,ji,zi,na,Gi,Ui,Ai,bi,_i,Si].flat(),aa=zt("remarkAddOrderInList",()=>()=>e=>{Pt(e,"list",n=>{if(n.ordered){const t=n.start??1;n.children.forEach((r,i)=>{r.label=i+t})}})});g(aa.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});g(aa.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const sa=zt("remarkLineBreak",()=>()=>e=>{const n=/[\t ]*(?:\r?\n|\r)/g;Pt(e,"text",(t,r,i)=>{if(!t.value||typeof t.value!="string")return;const a=[];let s=0;n.lastIndex=0;let o=n.exec(t.value);for(;o;){const l=o.index;s!==l&&a.push({type:"text",value:t.value.slice(s,l)}),a.push({type:"break",data:{isInline:!0}}),s=l+o[0].length,o=n.exec(t.value)}if(a.length>0&&i&&typeof r=="number")return s<t.value.length&&a.push({type:"text",value:t.value.slice(s)}),i.children.splice(r,1,...a),r+a.length})});g(sa.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});g(sa.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const oa=zt("remarkInlineLink",()=>Tp);g(oa.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});g(oa.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const jp=e=>!!e.children,qp=e=>e.type==="html";function Vp(e,n){return t(e,0,null)[0];function t(r,i,a){if(jp(r)){const s=[];for(let o=0,u=r.children.length;o<u;o++){const l=r.children[o];if(l){const c=t(l,o,r);if(c)for(let h=0,d=c.length;h<d;h++){const p=c[h];p&&s.push(p)}}}r.children=s}return n(r,i,a)}}const la=zt("remarkHTMLTransformer",()=>()=>e=>{Vp(e,(n,t,r)=>qp(n)?((r==null?void 0:r.type)==="root"&&(n.children=[{...n}],delete n.value,n.type="paragraph"),[n]):[n])});g(la.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});g(la.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const ua=zt("remarkMarker",()=>()=>(e,n)=>{const t=r=>n.value.charAt(r.position.start.offset);Pt(e,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=t(r)})});g(ua.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});g(ua.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const yo=yn(()=>{let e=!1;const n=new Xe("MILKDOWN_INLINE_NODES_CURSOR"),t=new Ze({key:n,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,a=i.nodeBefore,s=i.nodeAfter;return!!(a&&s&&a.isInline&&!a.isText&&s.isInline&&!s.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>e?(e=!1,requestAnimationFrame(()=>{if(t.getState(r.state)){const s=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",s))}}),!0):!1,compositionstart:r=>(t.getState(r.state)&&(e=!0),!1),beforeinput:(r,i)=>{if(t.getState(r.state)&&i instanceof InputEvent&&i.data&&!e){const s=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",s)),!0}return!1}},decorations(r){if(t.getState(r)){const s=r.selection.$from.pos,o=document.createElement("span"),u=ga.widget(s,o,{side:-1}),l=document.createElement("span"),c=ga.widget(s,l);return setTimeout(()=>{o.contentEditable="true",l.contentEditable="true"}),ka.create(r.doc,[u,c])}return ka.empty}}});return t});g(yo,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const wo=yn(e=>new Ze({key:new Xe("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(n,t,r)=>{if(!n.length)return;const[i]=n;if(!i)return;const[a]=i.steps;if(i.getMeta("hardbreak")){if(!(a instanceof rl))return;const{from:u}=a;return r.tr.setNodeMarkup(u,pt.type(e),void 0,[])}if(a instanceof il){let u=r.tr;const{from:l,to:c}=a;return r.doc.nodesBetween(l,c,(h,d)=>{h.type===pt.type(e)&&(u=u.setNodeMarkup(d,pt.type(e),void 0,[]))}),u}}}));g(wo,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const ca=rt(["table","code_block"],"hardbreakFilterNodes");g(ca,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const xo=yn(e=>{const n=e.get(ca.key);return new Ze({key:new Xe("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,r)=>{const i=t.getMeta("hardbreak"),[a]=t.steps;if(i&&a){const{from:s}=a,o=r.doc.resolve(s);let u=o.depth,l=!0;for(;u>0;)n.includes(o.node(u).type.name)&&(l=!1),u--;return l}return!0}})});g(xo,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const bo=yn(e=>{const n=new Xe("MILKDOWN_HEADING_ID"),t=r=>{if(r.composing)return;const i=e.get(hr.key),a=r.state.tr.setMeta("addToHistory",!1);let s=!1;const o={};r.state.doc.descendants((u,l)=>{if(u.type===gt.type(e)){if(u.textContent.trim().length===0)return;const c=u.attrs;let h=i(u);o[h]?(o[h]+=1,h+=`-#${o[h]}`):o[h]=1,c.id!==h&&(s=!0,a.setMeta(n,!0).setNodeMarkup(l,void 0,{...c,id:h}))}}),s&&r.dispatch(a)};return new Ze({key:n,view:r=>(t(r),{update:(i,a)=>{i.state.doc.eq(a.doc)||t(i)}})})});g(bo,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const Co=yn(e=>{const n=t=>{if(t.composing||!t.editable)return;const r=Rt.type(e),i=Ft.type(e),a=Fe.type(e),s=t.state,o=(c,h)=>{let d=!1;const p=`${h+1}.`;return c.label!==p&&(c.label=p,d=!0),d};let u=s.tr,l=!1;s.doc.descendants((c,h,d,p)=>{if(c.type===i){const x=c.maybeChild(0);(x==null?void 0:x.type)===a&&x.attrs.listType==="ordered"&&(l=!0,u.setNodeMarkup(h,r,{spread:"true"}),c.descendants((C,A,w,z)=>{if(C.type===a){const I={...C.attrs};o(I,z)&&(u=u.setNodeMarkup(A,void 0,I))}return!1}))}else if(c.type===a&&(d==null?void 0:d.type)===r){const x={...c.attrs};let C=!1;x.listType!=="ordered"&&(x.listType="ordered",C=!0),(d==null?void 0:d.maybeChild(0))&&(C=o(x,p)),C&&(u=u.setNodeMarkup(h,void 0,x),l=!0)}}),l&&t.dispatch(u.setMeta("addToHistory",!1))};return new Ze({key:new Xe("MILKDOWN_KEEP_LIST_ORDER"),view:t=>(n(t),{update:r=>{n(r)}})})});g(Co,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Kp=[wo,ca,xo,yo,aa,oa,sa,la,ua,cr,bo,Co].flat(),Up=[Rp,Dp,$p,Hp,Wp,Kp].flat();function Io(e){var n,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(t=Io(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Qp(){for(var e,n,t=0,r="",i=arguments.length;t<i;t++)(e=arguments[t])&&(n=Io(e))&&(r&&(r+=" "),r+=n);return r}function Yp(e){e.update(Zn,n=>{const t=n.attributes;return{...n,attributes:r=>{const i=typeof t=="function"?t(r):t;return{...i,class:Qp("prose dark:prose-invert",(i==null?void 0:i.class)||"","milkdown-theme-nord")}}}})}const Gp=`# Milkdown Vue Commonmark

> You're scared of a world where you're needed.

This is a demo for using Milkdown with **Vue**.`,Jp=gn({__name:"Editor",setup(e){return ul(n=>Mp.make().config(t=>{t.set(Xn,n),t.set(Gn,Gp)}).config(Yp).use(Up)),(n,t)=>(ti(),Qa(er(ol),{class:"editor"}))}}),Zp=Ro(Jp,[["__scopeId","data-v-e12ba3ac"]]),Xp=gn({__name:"Milkdown",setup(e){return(n,t)=>(ti(),Qa(er(ll),null,{default:Ya(()=>[_t(Zp)]),_:1}))}}),ed={class:"page"},td={class:"page-header"},nd={class:"links"},rd={href:"https://milkdown.dev/",target:"_blank",alt:"docs",rel:"nofollow noopener noreferrer"},id="tabler:external-link",cd=gn({__name:"Milkdown",setup(e){return(n,t)=>(ti(),Do("div",ed,[Sn("div",td,[t[1]||(t[1]=Sn("div",{class:"title"},"Milkdown",-1)),Sn("div",nd,[Sn("a",rd,[_t(Ho,{name:id,size:16}),t[0]||(t[0]=$o(" docs "))])])]),_t(er(Wo),null,{default:Ya(()=>[_t(er(Xp))]),_:1})]))}});export{cd as default};
