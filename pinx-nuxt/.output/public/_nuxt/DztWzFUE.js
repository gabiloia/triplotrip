import{y as Cr,ak as Qn,d as Rt,ac as Sr,a3 as Lr,J as Or,u as nt,s as Yn,al as Ir,am as Pr,ad as Rr,an as Hr,o as rt,c as ct,K as Nr,e as pt,_ as Xn,q as Br,U as Zn,w as tr,a as gt,F as Cn,r as $r,n as _e,g as jr,m as Dr,f as on,V as Fr,a2 as zr,b as Ur}from"./BboPWEKj.js";import{f as Kr,c as an,E as Wr,a as Vr,N as vt,T as _r,P as B,b as D,S as W,k as Gr,d as R,D as qr,e as er,F as J,g as Jr,h as He,w as Qr,i as Yr,j as ln,l as Kt,s as Xr,m as Sn,n as Zr,o as ts,p as es,q as ns,r as rs,A as ss,t as os,u as is,v as as,x as ls,y as cs,z as us,B as ds,C as nr,G as ps,H as fs,I as hs,J as ms,K as gs,L as ys,M as ks,R as bs,O as vs,Q as As,U as ws,V as Ms,W as Es,X as Ts}from"./CnueefAD.js";function Me(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}class Ee{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...d)=>{const u=l(...d)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!t,c=t||o.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(p=>p===!0)),u={...Object.fromEntries(Object.entries(r).map(([p,f])=>[p,(...m)=>{const k=this.buildProps(c,n),y=f(...m)(k);return a.push(y),u}])),run:d};return u}createCan(t){const{rawCommands:n,state:r}=this,s=!1,o=t||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:t,editor:s,view:i,state:Me({state:o,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class xs{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(s=>s.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(s=>s!==n):delete this.callbacks[t]),this}once(t,n){const r=(...s)=>{this.off(t,r),n.apply(this,s)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}}function b(e,t,n){return e.config[t]===void 0&&e.parent?b(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?b(e.parent,t,n):null}):e.config[t]}function Te(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function rr(e){const t=[],{nodeExtensions:n,markExtensions:r}=Te(e),s=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=b(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([p,f])=>{t.push({type:u,name:p,attribute:{...o,...f}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=b(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const p={...o,...u};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,t.push({type:i.name,name:d,attribute:p})})}),t}function P(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function S(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(d=>!l.includes(d));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,p]=d.split(":").map(f=>f.trim());c.set(u,p)}),a.forEach(d=>{const[u,p]=d.split(":").map(f=>f.trim());c.set(u,p)}),r[s]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[s]=o}),r},{})}function Ge(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>S(n,r),{})}function sr(e){return typeof e=="function"}function w(e,t=void 0,...n){return sr(e)?t?e.bind(t)(...n):e(...n):e}function Cs(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Ss(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function Ln(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):Ss(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function On(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&Cs(n)?!1:n!=null))}function Ls(e,t){var n;const r=rr(e),{nodeExtensions:s,markExtensions:o}=Te(e),i=(n=s.find(c=>b(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(s.map(c=>{const d=r.filter(y=>y.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((y,v)=>{const E=b(v,"extendNodeSchema",u);return{...y,...E?E(c):{}}},{}),f=On({...p,content:w(b(c,"content",u)),marks:w(b(c,"marks",u)),group:w(b(c,"group",u)),inline:w(b(c,"inline",u)),atom:w(b(c,"atom",u)),selectable:w(b(c,"selectable",u)),draggable:w(b(c,"draggable",u)),code:w(b(c,"code",u)),whitespace:w(b(c,"whitespace",u)),linebreakReplacement:w(b(c,"linebreakReplacement",u)),defining:w(b(c,"defining",u)),isolating:w(b(c,"isolating",u)),attrs:Object.fromEntries(d.map(y=>{var v;return[y.name,{default:(v=y?.attribute)===null||v===void 0?void 0:v.default}]}))}),h=w(b(c,"parseHTML",u));h&&(f.parseDOM=h.map(y=>Ln(y,d)));const m=b(c,"renderHTML",u);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:Ge(y,d)}));const k=b(c,"renderText",u);return k&&(f.toText=k),[c.name,f]})),l=Object.fromEntries(o.map(c=>{const d=r.filter(k=>k.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:t},p=e.reduce((k,y)=>{const v=b(y,"extendMarkSchema",u);return{...k,...v?v(c):{}}},{}),f=On({...p,inclusive:w(b(c,"inclusive",u)),excludes:w(b(c,"excludes",u)),group:w(b(c,"group",u)),spanning:w(b(c,"spanning",u)),code:w(b(c,"code",u)),attrs:Object.fromEntries(d.map(k=>{var y;return[k.name,{default:(y=k?.attribute)===null||y===void 0?void 0:y.default}]}))}),h=w(b(c,"parseHTML",u));h&&(f.parseDOM=h.map(k=>Ln(k,d)));const m=b(c,"renderHTML",u);return m&&(f.toDOM=k=>m({mark:k,HTMLAttributes:Ge(k,d)})),[c.name,f]}));return new er({topNode:i,nodes:a,marks:l})}function Ne(e,t){return t.nodes[e]||t.marks[e]||null}function In(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function cn(e,t){const n=qr.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const Os=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,o,i,a)=>{var l,c;const d=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?d:d.slice(0,Math.max(0,r-o))}),n};function un(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class xe{constructor(t){this.find=t.find,this.handler=t.handler}}const Is=(e,t)=>{if(un(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nt(e){var t;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(p=>p.type.spec.code))return!1;let d=!1;const u=Os(c)+o;return i.forEach(p=>{if(d)return;const f=Is(u,p.find);if(!f)return;const h=l.state.tr,m=Me({state:l.state,transaction:h}),k={from:r-(f[0].length-o.length),to:s},{commands:y,chain:v,can:E}=new Ee({editor:n,state:m});p.handler({state:m,range:k,match:f,commands:y,chain:v,can:E})===null||!h.steps.length||(h.setMeta(a,{transform:h,from:r,to:s,text:o}),l.dispatch(h),d=!0)}),d}function Ps(e){const{editor:t,rules:n}=e,r=new B({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=cn(J.from(d),i.schema);const{from:u}=l,p=u+d.length;Nt({editor:t,from:u,to:p,text:d,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return Nt({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&Nt({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?Nt({editor:t,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Rs(e){return Object.prototype.toString.call(e).slice(8,-1)}function Bt(e){return Rs(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Ce(e,t){const n={...e};return Bt(e)&&Bt(t)&&Object.keys(t).forEach(r=>{Bt(t[r])&&Bt(e[r])?n[r]=Ce(e[r],t[r]):n[r]=t[r]}),n}class V{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(b(this,"addOptions",{name:this.name}))),this.storage=w(b(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new V(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Ce(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new V(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=w(b(n,"addOptions",{name:n.name})),n.storage=w(b(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>c?.type.name===n.name))return!1;const l=i.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}}function Hs(e){return typeof e=="number"}class Ns{constructor(t){this.find=t.find,this.handler=t.handler}}const Bs=(e,t,n)=>{if(un(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=e,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function $s(e){const{editor:t,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=e,{commands:l,chain:c,can:d}=new Ee({editor:t,state:n}),u=[];return n.doc.nodesBetween(r,s,(f,h)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,h),k=Math.min(s,h+f.content.size),y=f.textBetween(m-h,k-h,void 0,"￼");Bs(y,o.find,i).forEach(E=>{if(E.index===void 0)return;const L=m+E.index+1,M=L+E[0].length,O={from:n.tr.mapping.map(L),to:n.tr.mapping.map(M)},$=o.handler({state:n,range:O,match:E,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});u.push($)})}),u.every(f=>f!==null)}let $t=null;const js=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function Ds(e){const{editor:t,rules:n}=e;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:p,rule:f,pasteEvt:h})=>{const m=d.tr,k=Me({state:d,transaction:m});if(!(!$s({editor:t,state:k,from:Math.max(u-1,0),to:p.b-1,rule:f,pasteEvent:h,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(d=>new B({view(u){const p=h=>{var m;r=!((m=u.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?u.dom.parentElement:null,r&&($t=t)},f=()=>{$t&&($t=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,p)=>{if(o=r===u.dom.parentElement,a=p,!o){const f=$t;f&&setTimeout(()=>{const h=f.state.selection;h&&f.commands.deleteRange({from:h.from,to:h.to})},10)}return!1},paste:(u,p)=>{var f;const h=(f=p.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=p,s=!!h?.includes("data-pm-slice"),!1}}},appendTransaction:(u,p,f)=>{const h=u[0],m=h.getMeta("uiEvent")==="paste"&&!s,k=h.getMeta("uiEvent")==="drop"&&!o,y=h.getMeta("applyPasteRules"),v=!!y;if(!m&&!k&&!v)return;if(v){let{text:M}=y;typeof M=="string"?M=M:M=cn(J.from(M),f.schema);const{from:O}=y,$=O+M.length,F=js(M);return l({rule:d,state:f,from:O,to:{b:$},pasteEvt:F})}const E=p.doc.content.findDiffStart(f.doc.content),L=p.doc.content.findDiffEnd(f.doc.content);if(!(!Hs(E)||!L||E===L.b))return l({rule:d,state:f,from:E,to:L,pasteEvt:i})}}))}function Fs(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}class kt{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=kt.resolve(t),this.schema=Ls(this.extensions,n),this.setupExtensions()}static resolve(t){const n=kt.sort(kt.flatten(t)),r=Fs(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=b(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(t){return t.sort((r,s)=>{const o=b(r,"priority")||100,i=b(s,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ne(n.name,this.schema)},s=b(n,"addCommands",r);return s?{...t,...s()}:t},{})}get plugins(){const{editor:t}=this,n=kt.sort([...this.extensions].reverse()),r=[],s=[],o=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:t,type:Ne(i.name,this.schema)},l=[],c=b(i,"addKeyboardShortcuts",a);let d={};if(i.type==="mark"&&b(i,"exitable",a)&&(d.ArrowRight=()=>V.handleExit({editor:t,mark:i})),c){const m=Object.fromEntries(Object.entries(c()).map(([k,y])=>[k,()=>y({editor:t})]));d={...d,...m}}const u=Gr(d);l.push(u);const p=b(i,"addInputRules",a);In(i,t.options.enableInputRules)&&p&&r.push(...p());const f=b(i,"addPasteRules",a);In(i,t.options.enablePasteRules)&&f&&s.push(...f());const h=b(i,"addProseMirrorPlugins",a);if(h){const m=h();l.push(...m)}return l}).flat();return[Ps({editor:t,rules:r}),...Ds({editor:t,rules:s}),...o]}get attributes(){return rr(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=Te(this.extensions);return Object.fromEntries(n.filter(r=>!!b(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:t,type:P(r.name,this.schema)},i=b(r,"addNodeView",o);if(!i)return[];const a=(l,c,d,u,p)=>{const f=Ge(l,s);return i()({node:l,view:c,getPos:d,decorations:u,innerDecorations:p,editor:t,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Ne(t.name,this.schema)};t.type==="mark"&&(!((n=w(b(t,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(t.name);const s=b(t,"onBeforeCreate",r),o=b(t,"onCreate",r),i=b(t,"onUpdate",r),a=b(t,"onSelectionUpdate",r),l=b(t,"onTransaction",r),c=b(t,"onFocus",r),d=b(t,"onBlur",r),u=b(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class H{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(b(this,"addOptions",{name:this.name}))),this.storage=w(b(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new H(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Ce(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new H({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=w(b(n,"addOptions",{name:n.name})),n.storage=w(b(n,"addStorage",{name:n.name,options:n.options})),n}}function or(e,t,n){const{from:r,to:s}=t,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,s,(l,c,d,u)=>{var p;l.isBlock&&c>r&&(a+=o);const f=i?.[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:t})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,s-c))}),a}function ir(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const zs=H.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new B({key:new D("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s,i=Math.min(...o.map(d=>d.$from.pos)),a=Math.max(...o.map(d=>d.$to.pos)),l=ir(n);return or(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Us=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Ks=(e=!1)=>({commands:t})=>t.setContent("",e),Ws=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=t,u=c.resolve(d.map(l)),p=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(p);if(!f)return;const h=ks(f);if(a.type.isTextblock){const{defaultType:m}=u.parent.contentMatchAt(u.index());t.setNodeMarkup(f.start,m)}(h||h===0)&&t.lift(f,h)})}),!0},Vs=e=>t=>e(t),_s=()=>({state:e,dispatch:t})=>ys(e,t),Gs=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,o.content),r.setSelection(new R(r.doc.resolve(i-1))),!0},qs=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(t){const a=s.before(o),l=s.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1},Js=e=>({tr:t,state:n,dispatch:r})=>{const s=P(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},Qs=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},Ys=()=>({state:e,dispatch:t})=>gs(e,t),Xs=()=>({commands:e})=>e.keyboardShortcut("Enter"),Zs=()=>({state:e,dispatch:t})=>ms(e,t);function Gt(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:un(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function ar(e,t,n={}){return e.find(r=>r.type===t&&Gt(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Pn(e,t,n={}){return!!ar(e,t,n)}function dn(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(d=>d.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(d=>d.type===t)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!ar([...s.node.marks],t,n)))return;let i=s.index,a=e.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&Pn([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&Pn([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function it(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const to=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=it(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(s){const u=dn(l,o,t);if(u&&u.from<=c&&u.to>=d){const p=R.create(i,u.from,u.to);n.setSelection(p)}}return!0},eo=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function lr(e){return e instanceof R}function ut(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function cr(e,t=null){if(!t)return null;const n=W.atStart(e),r=W.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,o=r.to;return t==="all"?R.create(e,ut(0,s,o),ut(e.content.size,s,o)):R.create(e,ut(t,s,o),ut(t,s,o))}function no(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function pn(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ro=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{(pn()||no())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!lr(n.state.selection))return i(),!0;const a=cr(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},so=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),oo=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),ur=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&ur(r)}return e};function jt(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return ur(n)}function qt(e,t,n){if(e instanceof Jr||e instanceof J)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return J.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),qt("",t,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new er({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?He.fromSchema(l).parseSlice(jt(e),n.parseOptions):He.fromSchema(l).parse(jt(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=He.fromSchema(t);return n.slice?o.parseSlice(jt(e),n.parseOptions).content:o.parse(jt(e),n.parseOptions)}return qt("",t,n)}function io(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof bs||s instanceof vs))return;const o=e.mapping.maps[r];let i=0;o.forEach((a,l,c,d)=>{i===0&&(i=d)}),e.setSelection(W.near(e.doc.resolve(i),n))}const ao=e=>!("type"in e),lo=(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=qt(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:o.options.enableContentCheck})}catch(h){return o.emit("contentError",{editor:o,error:h,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},d=!0,u=!0;if((ao(a)?a:[a]).forEach(h=>{h.check(),d=d?h.isText&&h.marks.length===0:!1,u=u?h.isBlock:!1}),l===c&&u){const{parent:h}=r.doc.resolve(l);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(l-=1,c+=1)}let f;if(d){if(Array.isArray(t))f=t.map(h=>h.text||"").join("");else if(t instanceof J){let h="";t.forEach(m=>{m.text&&(h+=m.text)}),f=h}else typeof t=="object"&&t&&t.text?f=t.text:f=t;r.insertText(f,l,c)}else f=a,r.replaceWith(l,c,f);n.updateSelection&&io(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},co=()=>({state:e,dispatch:t})=>cs(e,t),uo=()=>({state:e,dispatch:t})=>fs(e,t),po=()=>({state:e,dispatch:t})=>hs(e,t),fo=()=>({state:e,dispatch:t})=>ps(e,t),ho=()=>({state:e,dispatch:t,tr:n})=>{try{const r=nr(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},mo=()=>({state:e,dispatch:t,tr:n})=>{try{const r=nr(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},go=()=>({state:e,dispatch:t})=>ds(e,t),yo=()=>({state:e,dispatch:t})=>us(e,t);function dr(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function ko(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))pn()||dr()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const bo=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=ko(e).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const d=c.map(r.mapping);d&&s&&r.maybeStep(d)}),!0};function Ot(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?P(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(u,p)=>{if(u.isText)return;const f=Math.max(r,p),h=Math.min(s,p+u.nodeSize);a.push({node:u,from:f,to:h})});const l=s-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Gt(u.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((u,p)=>u+p.to-p.from,0)>=l}const vo=(e,t={})=>({state:n,dispatch:r})=>{const s=P(e,n.schema);return Ot(n,s,t)?ls(n,r):!1},Ao=()=>({state:e,dispatch:t})=>as(e,t),wo=e=>({state:t,dispatch:n})=>{const r=P(e,t.schema);return is(r)(t,n)},Mo=()=>({state:e,dispatch:t})=>os(e,t);function Se(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Rn(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}const Eo=(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Se(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=P(e,r.schema)),a==="mark"&&(i=it(e,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{o&&o===c.type&&n.setNodeMarkup(d,void 0,Rn(c.attrs,t)),i&&c.marks.length&&c.marks.forEach(u=>{i===u.type&&n.addMark(d,d+c.nodeSize,i.create(Rn(u.attrs,t)))})})}),!0):!1},To=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),xo=()=>({tr:e,dispatch:t})=>{if(t){const n=new ss(e.doc);e.setSelection(n)}return!0},Co=()=>({state:e,dispatch:t})=>rs(e,t),So=()=>({state:e,dispatch:t})=>ns(e,t),Lo=()=>({state:e,dispatch:t})=>es(e,t),Oo=()=>({state:e,dispatch:t})=>ts(e,t),Io=()=>({state:e,dispatch:t})=>Zr(e,t);function qe(e,t,n={},r={}){return qt(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Po=(e,t=!1,n={},r={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{var l,c;const{doc:d}=o;if(n.preserveWhitespace!=="full"){const u=qe(e,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return i&&o.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!t),!0}return i&&o.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function pr(e,t){const n=it(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Ro(e,t){const n=new _r(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function Ho(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function No(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function Bo(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function fn(e){return t=>Bo(t.$from,e)}function $o(e,t){const n={from:0,to:e.content.size};return or(e,n,t)}function jo(e,t){const n=P(t,e.schema),{from:r,to:s}=e.selection,o=[];e.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function fr(e,t){const n=Se(typeof t=="string"?t:t.name,e.schema);return n==="node"?jo(e,t):n==="mark"?pr(e,t):{}}function Do(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function Fo(e){const t=Do(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function zo(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(o).map(a,-1),d=t.slice(o).map(l),u=t.invert().map(c,-1),p=t.invert().map(d);r.push({oldRange:{from:u,to:p},newRange:{from:c,to:d}})})}),Fo(r)}function hn(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const o=n.resolve(e),i=dn(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(e,t,(s,o)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function Wt(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function Je(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?it(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(u=>o?o.name===u.type.name:!0).find(u=>Gt(u.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:u,$to:p})=>{const f=u.pos,h=p.pos;e.doc.nodesBetween(f,h,(m,k)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,k),v=Math.min(h,k+m.nodeSize),E=v-y;i+=E,a.push(...m.marks.map(L=>({mark:L,from:y,to:v})))})}),i===0)return!1;const l=a.filter(u=>o?o.name===u.mark.type.name:!0).filter(u=>Gt(u.mark.attrs,n,{strict:!1})).reduce((u,p)=>u+p.to-p.from,0),c=a.filter(u=>o?u.mark.type!==o&&u.mark.type.excludes(o):!0).reduce((u,p)=>u+p.to-p.from,0);return(l>0?l+c:l)>=i}function Uo(e,t,n={}){if(!t)return Ot(e,null,n)||Je(e,null,n);const r=Se(t,e.schema);return r==="node"?Ot(e,t,n):r==="mark"?Je(e,t,n):!1}function Hn(e,t){const{nodeExtensions:n}=Te(t),r=n.find(i=>i.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=w(b(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function mn(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!==null&&r!==void 0?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(o=>{s!==!1&&(mn(o,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function Ko(e){return e instanceof vt}function Wo(e,t,n){var r;const{selection:s}=t;let o=null;if(lr(s)&&(o=s.$cursor),o){const a=(r=e.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(d,u,p)=>{if(c)return!1;if(d.isInline){const f=!p||p.type.allowsMarkType(n),h=!!n.isInSet(d.marks)||!d.marks.some(m=>m.type.excludes(n));c=f&&h}return!c}),c})}const Vo=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=it(e,r.schema);if(s)if(i){const c=pr(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(p,f)=>{const h=Math.max(f,d),m=Math.min(f+p.nodeSize,u);p.marks.find(y=>y.type===l)?p.marks.forEach(y=>{l===y.type&&n.addMark(h,m,l.create({...y.attrs,...t}))}):n.addMark(h,m,l.create(t))})});return Wo(r,n,l)},_o=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Go=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=P(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>Sn(o,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>Sn(o,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qo=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=ut(e,0,r.content.size),o=vt.create(r,s);t.setSelection(o)}return!0},Jo=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}=typeof e=="number"?{from:e,to:e}:e,i=R.atStart(r).from,a=R.atEnd(r).to,l=ut(s,i,a),c=ut(o,i,a),d=R.create(r,l,c);t.setSelection(d)}return!0},Qo=e=>({state:t,dispatch:n})=>{const r=P(e,t.schema);return Xr(r)(t,n)};function Nn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t?.includes(s.type.name));e.tr.ensureMarks(r)}}const Yo=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:l}=o,c=s.extensionManager.attributes,d=Wt(c,a.node().type.name,a.node().attrs);if(o instanceof vt&&o.node.isBlock)return!a.parentOffset||!Kt(i,a.pos)?!1:(r&&(e&&Nn(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:Ho(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&p?[{type:p,attrs:d}]:void 0,h=Kt(t.doc,t.mapping.map(a.pos),1,f);if(!f&&!h&&Kt(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(h=!0,f=p?[{type:p,attrs:d}]:void 0),r){if(h&&(o instanceof R&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,f),p&&!u&&!a.parentOffset&&a.parent.type!==p)){const m=t.mapping.map(a.before()),k=t.doc.resolve(m);a.node(-1).canReplaceWith(k.index(),k.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&Nn(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return h},Xo=(e,t={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=P(e,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const p=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let y=J.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let F=l.depth-v;F>=l.depth-3;F-=1)y=J.from(l.node(F).copy(y));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,L={...Wt(p,l.node().type.name,l.node().attrs),...t},M=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(L))||void 0;y=y.append(J.from(a.createAndFill(null,M)||void 0));const O=l.before(l.depth-(v-1));n.replace(O,l.after(-E),new ln(y,4-v,0));let $=-1;n.doc.nodesBetween(O,n.doc.content.size,(F,Oe)=>{if($>-1)return!1;F.isTextblock&&F.content.size===0&&($=Oe+1)}),$>-1&&n.setSelection(R.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,h={...Wt(p,u.type.name,u.attrs),...t},m={...Wt(p,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const k=f?[{type:a,attrs:h},{type:f,attrs:m}]:[{type:a,attrs:h}];if(!Kt(n.doc,l.pos,2))return!1;if(s){const{selection:y,storedMarks:v}=r,{splittableMarks:E}=o.extensionManager,L=v||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,k).scrollIntoView(),!L||!s)return!0;const M=L.filter(O=>E.includes(O.type.name));n.ensureMarks(M)}return!0},Be=(e,t)=>{const n=fn(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===s?.type&&an(e.doc,n.pos)&&e.join(n.pos),!0},$e=(e,t)=>{const n=fn(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===s?.type&&an(e.doc,r)&&e.join(r),!0},Zo=(e,t,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:p}=s.extensionManager,f=P(e,i.schema),h=P(t,i.schema),{selection:m,storedMarks:k}=i,{$from:y,$to:v}=m,E=y.blockRange(v),L=k||m.$to.parentOffset&&m.$from.marks();if(!E)return!1;const M=fn(O=>Hn(O.type.name,u))(m);if(E.depth>=1&&M&&E.depth-M.depth<=1){if(M.node.type===f)return c.liftListItem(h);if(Hn(M.node.type.name,u)&&f.validContent(M.node.content)&&a)return l().command(()=>(o.setNodeMarkup(M.pos,f),!0)).command(()=>Be(o,f)).command(()=>$e(o,f)).run()}return!n||!L||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Be(o,f)).command(()=>$e(o,f)).run():l().command(()=>{const O=d().wrapInList(f,r),$=L.filter(F=>p.includes(F.type.name));return o.ensureMarks($),O?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Be(o,f)).command(()=>$e(o,f)).run()},ti=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=it(e,r.schema);return Je(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)},ei=(e,t,n={})=>({state:r,commands:s})=>{const o=P(e,r.schema),i=P(t,r.schema),a=Ot(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},ni=(e,t={})=>({state:n,commands:r})=>{const s=P(e,n.schema);return Ot(n,s,t)?r.lift(s):r.wrapIn(s,t)},ri=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},si=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},oi=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=it(e,r.schema),{$from:c,empty:d,ranges:u}=a;if(!s)return!0;if(d&&i){let{from:p,to:f}=a;const h=(o=c.marks().find(k=>k.type===l))===null||o===void 0?void 0:o.attrs,m=dn(c,l,h);m&&(p=m.from,f=m.to),n.removeMark(p,f,l)}else u.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},ii=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Se(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=P(e,r.schema)),a==="mark"&&(i=it(e,r.schema)),s&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,p,f,h;n.selection.empty?r.doc.nodesBetween(c,d,(m,k)=>{o&&o===m.type&&(f=Math.max(k,c),h=Math.min(k+m.nodeSize,d),u=k,p=m)}):r.doc.nodesBetween(c,d,(m,k)=>{k<c&&o&&o===m.type&&(f=Math.max(k,c),h=Math.min(k+m.nodeSize,d),u=k,p=m),k>=c&&k<=d&&(o&&o===m.type&&n.setNodeMarkup(k,void 0,{...m.attrs,...t}),i&&m.marks.length&&m.marks.forEach(y=>{if(i===y.type){const v=Math.max(k,c),E=Math.min(k+m.nodeSize,d);n.addMark(v,E,i.create({...y.attrs,...t}))}}))}),p&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...p.attrs,...t}),i&&p.marks.length&&p.marks.forEach(m=>{i===m.type&&n.addMark(f,h,i.create({...m.attrs,...t}))}))}),!0):!1},ai=(e,t={})=>({state:n,dispatch:r})=>{const s=P(e,n.schema);return Yr(s,t)(n,r)},li=(e,t={})=>({state:n,dispatch:r})=>{const s=P(e,n.schema);return Qr(s,t)(n,r)};var ci=Object.freeze({__proto__:null,blur:Us,clearContent:Ks,clearNodes:Ws,command:Vs,createParagraphNear:_s,cut:Gs,deleteCurrentNode:qs,deleteNode:Js,deleteRange:Qs,deleteSelection:Ys,enter:Xs,exitCode:Zs,extendMarkRange:to,first:eo,focus:ro,forEach:so,insertContent:oo,insertContentAt:lo,joinBackward:po,joinDown:uo,joinForward:fo,joinItemBackward:ho,joinItemForward:mo,joinTextblockBackward:go,joinTextblockForward:yo,joinUp:co,keyboardShortcut:bo,lift:vo,liftEmptyBlock:Ao,liftListItem:wo,newlineInCode:Mo,resetAttributes:Eo,scrollIntoView:To,selectAll:xo,selectNodeBackward:Co,selectNodeForward:So,selectParentNode:Lo,selectTextblockEnd:Oo,selectTextblockStart:Io,setContent:Po,setMark:Vo,setMeta:_o,setNode:Go,setNodeSelection:qo,setTextSelection:Jo,sinkListItem:Qo,splitBlock:Yo,splitListItem:Xo,toggleList:Zo,toggleMark:ti,toggleNode:ei,toggleWrap:ni,undoInputRule:ri,unsetAllMarks:si,unsetMark:oi,updateAttributes:ii,wrapIn:ai,wrapInList:li});const ui=H.create({name:"commands",addCommands(){return{...ci}}}),di=H.create({name:"drop",addProseMirrorPlugins(){return[new B({key:new D("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),pi=H.create({name:"editable",addProseMirrorPlugins(){return[new B({key:new D("editable"),props:{editable:()=>this.editor.options.editable}})]}}),fi=new D("focusEvents"),hi=H.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new B({key:fi,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),mi=H.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:p,parent:f}=u,h=u.parent.isTextblock&&p>0?a.doc.resolve(p-1):u,m=h.parent.type.spec.isolating,k=u.pos-u.parentOffset,y=m&&h.parent.childCount===1?k===u.pos:W.atStart(c).from===p;return!d||!f.type.isTextblock||f.textContent.length||!y||y&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return pn()||dr()?o:s},addProseMirrorPlugins(){return[new B({key:new D("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(m=>m.getMeta("composition")))return;const r=e.some(m=>m.docChanged)&&!t.doc.eq(n.doc),s=e.some(m=>m.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=t.selection,l=W.atStart(t.doc).from,c=W.atEnd(t.doc).to;if(o||!(i===l&&a===c)||!mn(n.doc))return;const p=n.tr,f=Me({state:n,transaction:p}),{commands:h}=new Ee({editor:this.editor,state:f});if(h.clearNodes(),!!p.steps.length)return p}})]}}),gi=H.create({name:"paste",addProseMirrorPlugins(){return[new B({key:new D("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),yi=H.create({name:"tabindex",addProseMirrorPlugins(){return[new B({key:new D("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class lt{get name(){return this.node.type.name}constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new lt(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new lt(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new lt(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new lt(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new lt(a,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===t&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}}const ki=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function bi(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}let vi=class extends xs{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=bi(ki,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=sr(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(t){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(t).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var t,n;const s=[...this.options.enableCoreExtensions?[pi,zs.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),ui,hi,mi,yi,di,gi].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new kt(s,this)}createCommandManager(){this.commandManager=new Ee({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let n;try{n=qe(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=qe(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=cr(n,this.options.autofocus);this.view=new Wr(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Vr.create({doc:n,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=t.getMeta("focus"),o=t.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return fr(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,s=typeof t=="string"?n:t;return Uo(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cn(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return $o(this.state.doc,{blockSeparator:n,textSerializers:{...ir(this.schema),...r}})}get isEmpty(){return mn(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(t,n))||null}$nodes(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new lt(n,this)}get $doc(){return this.$pos(0)}};function ht(e){return new xe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=w(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(hn(n.from,n.to,t.doc).filter(f=>f.mark.type.excluded.find(m=>m===e.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&o.delete(d,n.to),c>n.from&&o.delete(n.from+l,c);const p=n.from+l+i.length;o.addMark(n.from+l,p,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Ai(e){return new xe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=w(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;const l=e.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=i+c;d>a?d=a:a=d+r[1].length;const u=r[0][r[0].length-1];o.insertText(u,i+r[0].length-1),o.replaceWith(d,a,l)}else if(r[0]){const c=e.type.isInline?i:i-1;o.insert(c,e.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()}})}function Qe(e){return new xe({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=w(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function bt(e){return new xe({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const o=w(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&Kr(l,e.type,o);if(!c)return null;if(i.wrap(l,c),e.keepMarks&&e.editor){const{selection:u,storedMarks:p}=t,{splittableMarks:f}=e.editor.extensionManager,h=p||u.$to.parentOffset&&u.$from.marks();if(h){const m=h.filter(k=>f.includes(k.type.name));i.ensureMarks(m)}}if(e.keepAttributes){const u=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(u,o).run()}const d=i.doc.resolve(n.from-1).nodeBefore;d&&d.type===e.type&&an(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,d))&&i.join(n.from-1)}})}class N{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(b(this,"addOptions",{name:this.name}))),this.storage=w(b(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new N(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>Ce(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new N(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=w(b(n,"addOptions",{name:n.name})),n.storage=w(b(n,"addStorage",{name:n.name,options:n.options})),n}}function ot(e){return new Ns({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const o=w(e.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),p=u+a.length;if(hn(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(k=>k===e.type&&k!==h.mark.type)).filter(h=>h.to>u).length)return null;p<n.to&&i.delete(p,n.to),u>n.from&&i.delete(n.from+d,u),c=n.from+d+a.length,i.addMark(n.from+d,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}const wi=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Mi=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Ei=V.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[ht({find:wi,type:this.type})]},addPasteRules(){return[ot({find:Mi,type:this.type})]}}),Ti="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xi="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Ye="numeric",Xe="ascii",Ze="alpha",Et="asciinumeric",Mt="alphanumeric",tn="domain",hr="emoji",Ci="scheme",Si="slashscheme",je="whitespace";function Li(e,t){return e in t||(t[e]=[]),t[e]}function dt(e,t,n){t[Ye]&&(t[Et]=!0,t[Mt]=!0),t[Xe]&&(t[Et]=!0,t[Ze]=!0),t[Et]&&(t[Mt]=!0),t[Ze]&&(t[Mt]=!0),t[Mt]&&(t[tn]=!0),t[hr]&&(t[tn]=!0);for(const r in t){const s=Li(r,n);s.indexOf(e)<0&&s.push(e)}}function Oi(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function j(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}j.groups={};j.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],o=t.jr[r][1];if(o&&s.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||j.groups;let s;return t&&t.j?s=t:(s=new j(t),n&&r&&dt(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const o=e.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(e[i]);return s.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||j.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const o=t;let i,a=s.go(e);if(a?(i=new j,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new j,o){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(Oi(i.t,r),n);dt(o,l,r)}else n&&dt(o,n,r);i.t=o}return s.j[e]=i,i}};const A=(e,t,n,r,s)=>e.ta(t,n,r,s),x=(e,t,n,r,s)=>e.tr(t,n,r,s),Bn=(e,t,n,r,s)=>e.ts(t,n,r,s),g=(e,t,n,r,s)=>e.tt(t,n,r,s),X="WORD",en="UWORD",mr="ASCIINUMERICAL",gr="ALPHANUMERICAL",It="LOCALHOST",nn="TLD",rn="UTLD",Vt="SCHEME",yt="SLASH_SCHEME",gn="NUM",sn="WS",yn="NL",Tt="OPENBRACE",xt="CLOSEBRACE",Jt="OPENBRACKET",Qt="CLOSEBRACKET",Yt="OPENPAREN",Xt="CLOSEPAREN",Zt="OPENANGLEBRACKET",te="CLOSEANGLEBRACKET",ee="FULLWIDTHLEFTPAREN",ne="FULLWIDTHRIGHTPAREN",re="LEFTCORNERBRACKET",se="RIGHTCORNERBRACKET",oe="LEFTWHITECORNERBRACKET",ie="RIGHTWHITECORNERBRACKET",ae="FULLWIDTHLESSTHAN",le="FULLWIDTHGREATERTHAN",ce="AMPERSAND",ue="APOSTROPHE",de="ASTERISK",tt="AT",pe="BACKSLASH",fe="BACKTICK",he="CARET",st="COLON",kn="COMMA",me="DOLLAR",_="DOT",ge="EQUALS",bn="EXCLAMATION",U="HYPHEN",Ct="PERCENT",ye="PIPE",ke="PLUS",be="POUND",St="QUERY",vn="QUOTE",yr="FULLWIDTHMIDDLEDOT",An="SEMI",G="SLASH",Lt="TILDE",ve="UNDERSCORE",kr="EMOJI",Ae="SYM";var br=Object.freeze({__proto__:null,ALPHANUMERICAL:gr,AMPERSAND:ce,APOSTROPHE:ue,ASCIINUMERICAL:mr,ASTERISK:de,AT:tt,BACKSLASH:pe,BACKTICK:fe,CARET:he,CLOSEANGLEBRACKET:te,CLOSEBRACE:xt,CLOSEBRACKET:Qt,CLOSEPAREN:Xt,COLON:st,COMMA:kn,DOLLAR:me,DOT:_,EMOJI:kr,EQUALS:ge,EXCLAMATION:bn,FULLWIDTHGREATERTHAN:le,FULLWIDTHLEFTPAREN:ee,FULLWIDTHLESSTHAN:ae,FULLWIDTHMIDDLEDOT:yr,FULLWIDTHRIGHTPAREN:ne,HYPHEN:U,LEFTCORNERBRACKET:re,LEFTWHITECORNERBRACKET:oe,LOCALHOST:It,NL:yn,NUM:gn,OPENANGLEBRACKET:Zt,OPENBRACE:Tt,OPENBRACKET:Jt,OPENPAREN:Yt,PERCENT:Ct,PIPE:ye,PLUS:ke,POUND:be,QUERY:St,QUOTE:vn,RIGHTCORNERBRACKET:se,RIGHTWHITECORNERBRACKET:ie,SCHEME:Vt,SEMI:An,SLASH:G,SLASH_SCHEME:yt,SYM:Ae,TILDE:Lt,TLD:nn,UNDERSCORE:ve,UTLD:rn,UWORD:en,WORD:X,WS:sn});const Q=/[a-z]/,wt=new RegExp("\\p{L}","u"),De=new RegExp("\\p{Emoji}","u"),Y=/\d/,Fe=/\s/,$n="\r",ze=`
`,Ii="️",Pi="‍",Ue="￼";let Dt=null,Ft=null;function Ri(e=[]){const t={};j.groups=t;const n=new j;Dt==null&&(Dt=jn(Ti)),Ft==null&&(Ft=jn(xi)),g(n,"'",ue),g(n,"{",Tt),g(n,"}",xt),g(n,"[",Jt),g(n,"]",Qt),g(n,"(",Yt),g(n,")",Xt),g(n,"<",Zt),g(n,">",te),g(n,"（",ee),g(n,"）",ne),g(n,"「",re),g(n,"」",se),g(n,"『",oe),g(n,"』",ie),g(n,"＜",ae),g(n,"＞",le),g(n,"&",ce),g(n,"*",de),g(n,"@",tt),g(n,"`",fe),g(n,"^",he),g(n,":",st),g(n,",",kn),g(n,"$",me),g(n,".",_),g(n,"=",ge),g(n,"!",bn),g(n,"-",U),g(n,"%",Ct),g(n,"|",ye),g(n,"+",ke),g(n,"#",be),g(n,"?",St),g(n,'"',vn),g(n,"/",G),g(n,";",An),g(n,"~",Lt),g(n,"_",ve),g(n,"\\",pe),g(n,"・",yr);const r=x(n,Y,gn,{[Ye]:!0});x(r,Y,r);const s=x(r,Q,mr,{[Et]:!0}),o=x(r,wt,gr,{[Mt]:!0}),i=x(n,Q,X,{[Xe]:!0});x(i,Y,s),x(i,Q,i),x(s,Y,s),x(s,Q,s);const a=x(n,wt,en,{[Ze]:!0});x(a,Q),x(a,Y,o),x(a,wt,a),x(o,Y,o),x(o,Q),x(o,wt,o);const l=g(n,ze,yn,{[je]:!0}),c=g(n,$n,sn,{[je]:!0}),d=x(n,Fe,sn,{[je]:!0});g(n,Ue,d),g(c,ze,l),g(c,Ue,d),x(c,Fe,d),g(d,$n),g(d,ze),x(d,Fe,d),g(d,Ue,d);const u=x(n,De,kr,{[hr]:!0});g(u,"#"),x(u,De,u),g(u,Ii,u);const p=g(u,Pi);g(p,"#"),x(p,De,u);const f=[[Q,i],[Y,s]],h=[[Q,null],[wt,a],[Y,o]];for(let m=0;m<Dt.length;m++)Z(n,Dt[m],nn,X,f);for(let m=0;m<Ft.length;m++)Z(n,Ft[m],rn,en,h);dt(nn,{tld:!0,ascii:!0},t),dt(rn,{utld:!0,alpha:!0},t),Z(n,"file",Vt,X,f),Z(n,"mailto",Vt,X,f),Z(n,"http",yt,X,f),Z(n,"https",yt,X,f),Z(n,"ftp",yt,X,f),Z(n,"ftps",yt,X,f),dt(Vt,{scheme:!0,ascii:!0},t),dt(yt,{slashscheme:!0,ascii:!0},t),e=e.sort((m,k)=>m[0]>k[0]?1:-1);for(let m=0;m<e.length;m++){const k=e[m][0],v=e[m][1]?{[Ci]:!0}:{[Si]:!0};k.indexOf("-")>=0?v[tn]=!0:Q.test(k)?Y.test(k)?v[Et]=!0:v[Xe]=!0:v[Ye]=!0,Bn(n,k,k,v)}return Bn(n,"localhost",It,{ascii:!0}),n.jd=new j(Ae),{start:n,tokens:Object.assign({groups:t},br)}}function vr(e,t){const n=Hi(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=e,l=null,c=0,d=null,u=-1,p=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(u=0,p=0,d=a):u>=0&&(u+=n[i].length,p++),c+=n[i].length,o+=n[i].length,i++;o-=u,i-=p,c-=u,s.push({t:d.t,v:t.slice(o-c,o),s:o-c,e:o})}return s}function Hi(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function Z(e,t,n,r,s){let o;const i=t.length;for(let a=0;a<i-1;a++){const l=t[a];e.j[l]?o=e.j[l]:(o=new j(r),o.jr=s.slice(),e.j[l]=o),e=o}return o=new j(n),o.jr=s.slice(),e.j[t[i-1]]=o,o}function jn(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let o=0;for(;s.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}const Pt={defaultProtocol:"http",events:null,format:Dn,formatHref:Dn,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wn(e,t=null){let n=Object.assign({},Pt);e&&(n=Object.assign(n,e instanceof wn?e.o:e));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}wn.prototype={o:Pt,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Pt[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Dn(e){return e}function Ar(e,t){this.t="token",this.v=e,this.tk=t}Ar.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Pt.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),o=this.toFormattedString(e),i={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),d=e.getObj("attributes",n,t),u=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Object.assign(i,d),{tagName:s,attributes:i,content:o,eventListeners:u}}};function Le(e,t){class n extends Ar{constructor(s,o){super(s,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const Fn=Le("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),zn=Le("text"),Ni=Le("nl"),zt=Le("url",{isLink:!0,toHref(e=Pt.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==It&&e[1].t===st}}),z=e=>new j(e);function Bi({groups:e}){const t=e.domain.concat([ce,de,tt,pe,fe,he,me,ge,U,gn,Ct,ye,ke,be,G,Ae,Lt,ve]),n=[ue,st,kn,_,bn,Ct,St,vn,An,Zt,te,Tt,xt,Qt,Jt,Yt,Xt,ee,ne,re,se,oe,ie,ae,le],r=[ce,ue,de,pe,fe,he,me,ge,U,Tt,xt,Ct,ye,ke,be,St,G,Ae,Lt,ve],s=z(),o=g(s,Lt);A(o,r,o),A(o,e.domain,o);const i=z(),a=z(),l=z();A(s,e.domain,i),A(s,e.scheme,a),A(s,e.slashscheme,l),A(i,r,o),A(i,e.domain,i);const c=g(i,tt);g(o,tt,c),g(a,tt,c),g(l,tt,c);const d=g(o,_);A(d,r,o),A(d,e.domain,o);const u=z();A(c,e.domain,u),A(u,e.domain,u);const p=g(u,_);A(p,e.domain,u);const f=z(Fn);A(p,e.tld,f),A(p,e.utld,f),g(c,It,f);const h=g(u,U);g(h,U,h),A(h,e.domain,u),A(f,e.domain,u),g(f,_,p),g(f,U,h);const m=g(f,st);A(m,e.numeric,Fn);const k=g(i,U),y=g(i,_);g(k,U,k),A(k,e.domain,i),A(y,r,o),A(y,e.domain,i);const v=z(zt);A(y,e.tld,v),A(y,e.utld,v),A(v,e.domain,i),A(v,r,o),g(v,_,y),g(v,U,k),g(v,tt,c);const E=g(v,st),L=z(zt);A(E,e.numeric,L);const M=z(zt),O=z();A(M,t,M),A(M,n,O),A(O,t,M),A(O,n,O),g(v,G,M),g(L,G,M);const $=g(a,st),F=g(l,st),Oe=g(F,G),Ie=g(Oe,G);A(a,e.domain,i),g(a,_,y),g(a,U,k),A(l,e.domain,i),g(l,_,y),g(l,U,k),A($,e.domain,M),g($,G,M),g($,St,M),A(Ie,e.domain,M),A(Ie,t,M),g(Ie,G,M);const Tn=[[Tt,xt],[Jt,Qt],[Yt,Xt],[Zt,te],[ee,ne],[re,se],[oe,ie],[ae,le]];for(let Pe=0;Pe<Tn.length;Pe++){const[xn,Re]=Tn[Pe],Ht=g(M,xn);g(O,xn,Ht),g(Ht,Re,M);const mt=z(zt);A(Ht,t,mt);const At=z();A(Ht,n),A(mt,t,mt),A(mt,n,At),A(At,t,mt),A(At,n,At),g(mt,Re,M),g(At,Re,M)}return g(s,It,v),g(s,yn,Ni),{start:s,tokens:br}}function $i(e,t,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=e,l=null,c=null,d=0,u=null,p=-1;for(;s<r&&!(l=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(p=0,u=a):p>=0&&p++,s++,d++;if(p<0)s-=d,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(Ke(zn,t,i)),i=[]),s-=p,d-=p;const f=u.t,h=n.slice(s-d,s);o.push(Ke(f,t,h))}}return i.length>0&&o.push(Ke(zn,t,i)),o}function Ke(e,t,n){const r=n[0].s,s=n[n.length-1].e,o=t.slice(r,s);return new e(o,n)}const ji=typeof console<"u"&&console&&console.warn||(()=>{}),Di="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",T={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Fi(){return j.groups={},T.scanner=null,T.parser=null,T.tokenQueue=[],T.pluginQueue=[],T.customSchemes=[],T.initialized=!1,T}function Un(e,t=!1){if(T.initialized&&ji(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Di}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);T.customSchemes.push([e,t])}function zi(){T.scanner=Ri(T.customSchemes);for(let e=0;e<T.tokenQueue.length;e++)T.tokenQueue[e][1]({scanner:T.scanner});T.parser=Bi(T.scanner.tokens);for(let e=0;e<T.pluginQueue.length;e++)T.pluginQueue[e][1]({scanner:T.scanner,parser:T.parser});return T.initialized=!0,T}function Mn(e){return T.initialized||zi(),$i(T.parser.start,e,vr(T.scanner.start,e))}Mn.scan=vr;function wr(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new wn(n),s=Mn(e),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!t||a.t===t)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function Ui(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Ki(e){return new B({key:new D("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=t.some(c=>c.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=Ro(n.doc,[...t]);if(zo(a).forEach(({newRange:c})=>{const d=No(r.doc,c,f=>f.isTextblock);let u,p;if(d.length>1?(u=d[0],p=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=d[0],p=r.doc.textBetween(u.pos,c.to,void 0," ")),u&&p){const f=p.split(" ").filter(y=>y!=="");if(f.length<=0)return!1;const h=f[f.length-1],m=u.pos+p.lastIndexOf(h);if(!h)return!1;const k=Mn(h).map(y=>y.toObject(e.defaultProtocol));if(!Ui(k))return!1;k.filter(y=>y.isLink).map(y=>({...y,from:m+y.start+1,to:m+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>e.validate(y.value)).filter(y=>e.shouldAutoLink(y.value)).forEach(y=>{hn(y.from,y.to,r.doc).some(v=>v.mark.type===e.type)||i.addMark(y.from,y.to,e.type.create({href:y.href}))})}}),!!i.steps.length)return i}})}function Wi(e){return new B({key:new D("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,o;if(r.button!==0||!t.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=fr(t.state,e.type.name),c=r.target,d=(s=c?.href)!==null&&s!==void 0?s:l.href,u=(o=c?.target)!==null&&o!==void 0?o:l.target;return c&&d?(window.open(d,u),!0):!1}}})}function Vi(e){return new B({key:new D("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:s}=t,{selection:o}=s,{empty:i}=o;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=wr(a,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}const _i=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function at(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(_i,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Gi=V.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){Un(e);return}Un(e.scheme,e.optionalSlashes)})},onDestroy(){Fi()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!at(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!at(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!at(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",S(this.options.HTMLAttributes,e),0]:["a",S(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!at(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!at(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ot({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=wr(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!at(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>t.push({text:o.value,data:{href:o.href},index:o.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Ki({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!at(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(Wi({type:this.type})),this.options.linkOnPaste&&e.push(Vi({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),qi=/^\s*(\[([( |x])?\])\s$/,Ji=N.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",S(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",c=>c.preventDefault()),a.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:u})=>{const p=n();if(typeof p!="number")return!1;const f=u.doc.nodeAt(p);return u.setNodeMarkup(p,void 0,{...f?.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{s.setAttribute(c,d)}),s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,o.append(a,i),s.append(o,l),Object.entries(t).forEach(([c,d])=>{s.setAttribute(c,d)}),{dom:s,contentDOM:l,update:c=>c.type!==this.type?!1:(s.dataset.checked=c.attrs.checked,a.checked=c.attrs.checked,!0)}}},addInputRules(){return[bt({find:qi,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Qi=N.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",S(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Yi=H.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Xi=V.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Zi=/^\s*>\s$/,ta=N.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[bt({find:Zi,type:this.type})]}}),ea=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,na=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ra=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,sa=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,oa=V.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ht({find:ea,type:this.type}),ht({find:ra,type:this.type})]},addPasteRules(){return[ot({find:na,type:this.type}),ot({find:sa,type:this.type})]}}),ia="listItem",Kn="textStyle",Wn=/^\s*([-+*])\s$/,aa=N.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",S(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ia,this.editor.getAttributes(Kn)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=bt({find:Wn,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bt({find:Wn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Kn),editor:this.editor})),[e]}}),la=/(^|[^`])`([^`]+)`(?!`)/,ca=/(^|[^`])`([^`]+)`(?!`)/g,ua=V.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ht({find:la,type:this.type})]},addPasteRules(){return[ot({find:ca,type:this.type})]}}),da=/^```([a-z]+)?[\s\n]$/,pa=/^~~~([a-z]+)?[\s\n]$/,fa=N.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,o=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",S(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(W.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[Qe({find:da,type:this.type,getAttributes:e=>({language:e[1]})}),Qe({find:pa,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new B({key:new D("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s?.mode;if(!n||!o)return!1;const{tr:i,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(R.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),ha=N.create({name:"doc",topNode:!0,content:"block+"});function ma(e={}){return new B({view(t){return new ga(t,e)}})}class ga{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),i=o.width/s.offsetWidth,a=o.height/s.offsetHeight;if(n){let u=t.nodeBefore,p=t.nodeAfter;if(u||p){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let h=f.getBoundingClientRect(),m=u?h.bottom:h.top;u&&p&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*a;r={left:h.left,right:h.right,top:m-k,bottom:m+k}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*i;r={left:u.left-p,right:u.left+p,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),p=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*p,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=As(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const ya=H.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ma(this.options)]}});class C extends W{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return C.valid(r)?new C(r):W.near(r)}content(){return ln.empty}eq(t){return t instanceof C&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new C(t.resolve(n.pos))}getBookmark(){return new En(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!ka(t)||!ba(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){t:for(;;){if(!r&&C.valid(t))return t;let s=t.pos,o=null;for(let i=t.depth;;i--){let a=t.node(i);if(n>0?t.indexAfter(i)<a.childCount:t.index(i)>0){o=a.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(C.valid(l))return l}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!vt.isSelectable(o)){t=t.doc.resolve(s+o.nodeSize*n),r=!1;continue t}break}o=i,s+=n;let a=t.doc.resolve(s);if(C.valid(a))return a}return null}}}C.prototype.visible=!1;C.findFrom=C.findGapCursorFrom;W.jsonID("gapcursor",C);class En{constructor(t){this.pos=t}map(t){return new En(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return C.valid(n)?new C(n):W.near(n)}}function ka(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function ba(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function va(){return new B({props:{decorations:Ea,createSelectionBetween(e,t,n){return t.pos==n.pos&&C.valid(n)?new C(n):null},handleClick:wa,handleKeyDown:Aa,handleDOMEvents:{beforeinput:Ma}}})}const Aa=ws({ArrowLeft:Ut("horiz",-1),ArrowRight:Ut("horiz",1),ArrowUp:Ut("vert",-1),ArrowDown:Ut("vert",1)});function Ut(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){let i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof R){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=C.findGapCursorFrom(a,t,l);return c?(s&&s(r.tr.setSelection(new C(c))),!0):!1}}function wa(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!C.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&vt.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new C(r))),!0)}function Ma(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof C))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=J.empty;for(let i=r.length-1;i>=0;i--)s=J.from(r[i].createAndFill(null,s));let o=e.state.tr.replace(n.pos,n.pos,new ln(s,0,0));return o.setSelection(R.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function Ea(e){if(!(e.selection instanceof C))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ms.create(e.doc,[Es.widget(e.selection.head,t,{key:"gapcursor"})])}const Ta=H.create({name:"gapCursor",addProseMirrorPlugins(){return[va()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=w(b(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),xa=N.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",S(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&i){const u=l.filter(p=>a.includes(p.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ca=N.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,S(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Qe({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var we=200,I=function(){};I.prototype.append=function(t){return t.length?(t=I.from(t),!this.length&&t||t.length<we&&this.leafAppend(t)||this.length<we&&t.leafPrepend(this)||this.appendInner(t)):this};I.prototype.prepend=function(t){return t.length?I.from(t).append(this):this};I.prototype.appendInner=function(t){return new Sa(this,t)};I.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?I.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};I.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};I.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};I.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s};I.from=function(t){return t instanceof I?t:t&&t.length?new Mr(t):I.empty};var Mr=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=we)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=we)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(I);I.empty=new Mr([]);var Sa=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(I);const La=500;class K{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=t.tr,a,l,c=[],d=[];return this.items.forEach((u,p)=>{if(!u.step){s||(s=this.remapping(r,p+1),o=s.maps.length),o--,d.push(u);return}if(s){d.push(new q(u.map));let f=u.step.map(s.slice(o)),h;f&&i.maybeStep(f).doc&&(h=i.mapping.maps[i.mapping.maps.length-1],c.push(new q(h,void 0,void 0,c.length+d.length))),o--,h&&s.appendMap(h,o)}else i.maybeStep(u.step);if(u.selection)return a=s?u.selection.map(s.slice(o)):u.selection,l=new K(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(t,n,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let d=0;d<t.steps.length;d++){let u=t.steps[d].invert(t.docs[d]),p=new q(t.mapping.maps[d],u,n),f;(f=l&&l.merge(p))&&(p=f,d?o.pop():a=a.slice(0,a.length-1)),o.push(p),n&&(i++,n=void 0),s||(l=p)}let c=i-r.depth;return c>Ia&&(a=Oa(a,c),i-=c),new K(a.append(o),i)}remapping(t,n){let r=new Ts;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new K(this.items.append(t.map(n=>new q(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},s);let l=n;this.items.forEach(p=>{let f=o.getMirror(--l);if(f==null)return;i=Math.min(i,f);let h=o.maps[f];if(p.step){let m=t.steps[f].invert(t.docs[f]),k=p.selection&&p.selection.map(o.slice(l+1,f));k&&a++,r.push(new q(h,m,k))}else r.push(new q(h))},s);let c=[];for(let p=n;p<i;p++)c.push(new q(o.maps[p]));let d=this.items.slice(0,s).append(c).append(r),u=new K(d,a);return u.emptyItemCount()>La&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=t)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&o++;let u=new q(c.invert(),l,d),p,f=s.length-1;(p=s.length&&s[f].merge(u))?s[f]=p:s.push(u)}}else i.map&&r--},this.items.length,0),new K(I.from(s.reverse()),o)}}K.empty=new K(I.empty,0);function Oa(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class q{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new q(n.getMap().invert(),n,this.selection)}}}class et{constructor(t,n,r,s,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const Ia=20;function Pa(e,t,n,r){let s=n.getMeta(ft),o;if(s)return s.historyState;n.getMeta(Na)&&(e=new et(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(ft))return i.getMeta(ft).redo?new et(e.done.addTransform(n,void 0,r,_t(t)),e.undone,Vn(n.mapping.maps),e.prevTime,e.prevComposition):new et(e.done,e.undone.addTransform(n,void 0,r,_t(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Ra(n,e.prevRanges)),c=i?We(e.prevRanges,n.mapping):Vn(n.mapping.maps);return new et(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,_t(t)),K.empty,c,n.time,a??e.prevComposition)}else return(o=n.getMeta("rebased"))?new et(e.done.rebased(n,o),e.undone.rebased(n,o),We(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new et(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),We(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Ra(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}function Vn(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,o,i)=>t.push(o,i));return t}function We(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function Ha(e,t,n){let r=_t(t),s=ft.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),l=new et(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(ft,{redo:n,historyState:l})}let Ve=!1,_n=null;function _t(e){let t=e.plugins;if(_n!=t){Ve=!1,_n=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ve=!0;break}}return Ve}const ft=new D("history"),Na=new D("closeHistory");function Ba(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new B({key:ft,state:{init(){return new et(K.empty,K.empty,null,0,-1)},apply(t,n,r){return Pa(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?Tr:r=="historyRedo"?xr:null;return s?(n.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function Er(e,t){return(n,r)=>{let s=ft.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let o=Ha(s,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const Tr=Er(!1,!0),xr=Er(!0,!0),$a=H.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Tr(e,t),redo:()=>({state:e,dispatch:t})=>xr(e,t)}},addProseMirrorPlugins(){return[Ba(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),ja=N.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",S(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{selection:n}=t,{$from:r,$to:s}=n,o=e();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):Ko(n)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(R.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(vt.create(i.doc,c.pos)):i.setSelection(R.create(i.doc,c.pos));else{const u=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();u&&(i.insert(d,u),i.setSelection(R.create(i.doc,d+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ai({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Da=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Fa=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,za=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Ua=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Ka=V.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ht({find:Da,type:this.type}),ht({find:za,type:this.type})]},addPasteRules(){return[ot({find:Fa,type:this.type}),ot({find:Ua,type:this.type})]}}),Wa=N.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",S(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Va="listItem",Gn="textStyle",qn=/^(\d+)\.\s$/,_a=N.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",S(this.options.HTMLAttributes,n),0]:["ol",S(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Va,this.editor.getAttributes(Gn)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=bt({find:qn,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bt({find:qn,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Gn)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Ga=N.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),qa=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ja=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Qa=V.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",S(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ht({find:qa,type:this.type})]},addPasteRules(){return[ot({find:Ja,type:this.type})]}}),Ya=N.create({name:"text",group:"inline"}),Xa=H.create({name:"starterKit",addExtensions(){const e=[];return this.options.bold!==!1&&e.push(oa.configure(this.options.bold)),this.options.blockquote!==!1&&e.push(ta.configure(this.options.blockquote)),this.options.bulletList!==!1&&e.push(aa.configure(this.options.bulletList)),this.options.code!==!1&&e.push(ua.configure(this.options.code)),this.options.codeBlock!==!1&&e.push(fa.configure(this.options.codeBlock)),this.options.document!==!1&&e.push(ha.configure(this.options.document)),this.options.dropcursor!==!1&&e.push(ya.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push(Ta.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&e.push(xa.configure(this.options.hardBreak)),this.options.heading!==!1&&e.push(Ca.configure(this.options.heading)),this.options.history!==!1&&e.push($a.configure(this.options.history)),this.options.horizontalRule!==!1&&e.push(ja.configure(this.options.horizontalRule)),this.options.italic!==!1&&e.push(Ka.configure(this.options.italic)),this.options.listItem!==!1&&e.push(Wa.configure(this.options.listItem)),this.options.orderedList!==!1&&e.push(_a.configure(this.options.orderedList)),this.options.paragraph!==!1&&e.push(Ga.configure(this.options.paragraph)),this.options.strike!==!1&&e.push(Qa.configure(this.options.strike)),this.options.text!==!1&&e.push(Ya.configure(this.options.text)),e}});function Jn(e){return Hr((t,n)=>({get(){return t(),e},set(r){e=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Za extends vi{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=Jn(this.view.state),this.reactiveExtensionStorage=Jn(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),Pr(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){const r=super.registerPlugin(t,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(t){const n=super.unregisterPlugin(t);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const tl=Rt({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=Yn(),n=Ir();return Lr(()=>{const r=e.editor;r&&r.options.element&&t.value&&Or(()=>{if(!t.value||!r.options.element.firstChild)return;const s=nt(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:s}),r.createNodeViews()})}),Qn(()=>{const r=e.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:t}},render(){return Sr("div",{ref:e=>{this.rootEl=e}})}}),el=(e={})=>{const t=Rr();return Cr(()=>{t.value=new Za(e)}),Qn(()=>{var n,r,s;const o=(n=t.value)===null||n===void 0?void 0:n.options.element,i=o?.cloneNode(!0);(r=o?.parentNode)===null||r===void 0||r.replaceChild(i,o),(s=t.value)===null||s===void 0||s.destroy()}),t},nl=["title"],rl="fluent:text-bold-16-regular",sl="fluent:text-italic-16-filled",ol="fluent:text-strikethrough-16-filled",il="fluent:text-underline-16-filled",al="tabler:code",ll="fluent:highlight-24-regular",cl="fluent:text-header-1-24-filled",ul="fluent:text-header-2-24-filled",dl="carbon:paragraph",pl="fluent:apps-list-24-regular",fl="fluent:text-number-list-ltr-24-regular",hl="fluent:task-list-ltr-24-regular",ml="tabler:file-code",gl="fluent:text-quote-24-regular",yl="tabler:separator",kl="fluent:text-wrap-24-regular",bl="tabler:clear-formatting",vl="fluent:arrow-hook-up-left-24-regular",Al="fluent:arrow-hook-up-right-24-regular",wl="fluent:text-align-left-24-regular",Ml="fluent:text-align-center-24-regular",El="fluent:text-align-right-24-regular",Tl="fluent:text-align-justify-24-regular",xl="fluent:link-24-regular",Cl=Rt({__name:"MenuItem",props:{type:{},icon:{},title:{},action:{type:Function},isActive:{type:Function}},setup(e){const t={bold:rl,italic:sl,strikethrough:ol,underline:il,"code-view":al,"mark-pen-line":ll,"h-1":cl,"h-2":ul,paragraph:dl,"list-unordered":pl,"list-ordered":fl,"list-check":hl,"code-box-line":ml,"double-quotes":gl,separator:yl,"text-wrap":kl,"format-clear":bl,"arrow-go-back-line":vl,"arrow-go-forward-line":Al,"text-align-left":wl,"text-align-center":Ml,"text-align-right":El,"text-align-justify":Tl,link:xl},n=Br(()=>t[e.icon]);return(r,s)=>(rt(),ct("button",{class:Nr(["menu-item",{"is-active":e.isActive?e.isActive():null}]),title:e.title,onClick:s[0]||(s[0]=(...o)=>e.action&&e.action(...o))},[pt(Xn,{size:22,name:n.value},null,8,["name"])],10,nl))}}),Sl={class:"menu-bar"},Ll={class:"menu-bar-scroll"},Ol=Rt({__name:"MenuBar",props:{editor:{}},setup(e){const t=[{icon:"bold",title:"Bold",action:()=>e.editor.chain().focus().toggleBold().run(),isActive:()=>e.editor.isActive("bold")},{icon:"italic",title:"Italic",action:()=>e.editor.chain().focus().toggleItalic().run(),isActive:()=>e.editor.isActive("italic")},{icon:"underline",title:"Underline",action:()=>e.editor.chain().focus().toggleUnderline().run(),isActive:()=>e.editor.isActive("underline")},{icon:"strikethrough",title:"Strike",action:()=>e.editor.chain().focus().toggleStrike().run(),isActive:()=>e.editor.isActive("strike")},{icon:"code-view",title:"Code",action:()=>e.editor.chain().focus().toggleCode().run(),isActive:()=>e.editor.isActive("code")},{icon:"mark-pen-line",title:"Highlight",action:()=>e.editor.chain().focus().toggleHighlight().run(),isActive:()=>e.editor.isActive("highlight")},{type:"divider",icon:""},{icon:"h-1",title:"Heading 1",action:()=>e.editor.chain().focus().toggleHeading({level:1}).run(),isActive:()=>e.editor.isActive("heading",{level:1})},{icon:"h-2",title:"Heading 2",action:()=>e.editor.chain().focus().toggleHeading({level:2}).run(),isActive:()=>e.editor.isActive("heading",{level:2})},{icon:"paragraph",title:"Paragraph",action:()=>e.editor.chain().focus().setParagraph().run(),isActive:()=>e.editor.isActive("paragraph")},{icon:"list-unordered",title:"Bullet List",action:()=>e.editor.chain().focus().toggleBulletList().run(),isActive:()=>e.editor.isActive("bulletList")},{icon:"list-ordered",title:"Ordered List",action:()=>e.editor.chain().focus().toggleOrderedList().run(),isActive:()=>e.editor.isActive("orderedList")},{icon:"list-check",title:"Task List",action:()=>e.editor.chain().focus().toggleTaskList().run(),isActive:()=>e.editor.isActive("taskList")},{icon:"code-box-line",title:"Code Block",action:()=>e.editor.chain().focus().toggleCodeBlock().run(),isActive:()=>e.editor.isActive("codeBlock")},{type:"divider",icon:""},{icon:"text-align-left",title:"Text align left",action:()=>e.editor.chain().focus().setTextAlign("left").run(),isActive:()=>e.editor.isActive({textAlign:"left"})},{icon:"text-align-center",title:"Text align center",action:()=>e.editor.chain().focus().setTextAlign("center").run(),isActive:()=>e.editor.isActive({textAlign:"center"})},{icon:"text-align-right",title:"Text align right",action:()=>e.editor.chain().focus().setTextAlign("right").run(),isActive:()=>e.editor.isActive({textAlign:"right"})},{icon:"text-align-justify",title:"Text align justify",action:()=>e.editor.chain().focus().setTextAlign("justify").run(),isActive:()=>e.editor.isActive({textAlign:"justify"})},{type:"divider",icon:""},{icon:"link",title:"Link",action:n,isActive:()=>e.editor.isActive("link")},{icon:"double-quotes",title:"Blockquote",action:()=>e.editor.chain().focus().toggleBlockquote().run(),isActive:()=>e.editor.isActive("blockquote")},{icon:"separator",title:"Horizontal Rule",action:()=>e.editor.chain().focus().setHorizontalRule().run()},{type:"divider",icon:""},{icon:"text-wrap",title:"Hard Break",action:()=>e.editor.chain().focus().setHardBreak().run()},{icon:"format-clear",title:"Clear Format",action:()=>e.editor.chain().focus().clearNodes().unsetAllMarks().run()},{type:"divider",icon:""},{icon:"arrow-go-back-line",title:"Undo",action:()=>e.editor.chain().focus().undo().run()},{icon:"arrow-go-forward-line",title:"Redo",action:()=>e.editor.chain().focus().redo().run()}];function n(){if(e.editor.isActive("link")){e.editor.chain().focus().extendMarkRange("link").unsetLink().run();return}const r=e.editor.getAttributes("link").href,s=window.prompt("URL",r);if(s!==null){if(s===""){e.editor.chain().focus().extendMarkRange("link").unsetLink().run();return}e.editor.chain().focus().extendMarkRange("link").setLink({href:s}).run()}}return(r,s)=>(rt(),ct("div",Sl,[pt(nt(Zn),{"x-scrollable":""},{default:tr(()=>[gt("div",Ll,[(rt(),ct(Cn,null,$r(t,(o,i)=>(rt(),ct(Cn,null,[o.type==="divider"?(rt(),ct("div",{key:`divider${i}`,class:"divider"})):_e("",!0),o.type?_e("",!0):(rt(),jr(Cl,Dr({key:i},{ref_for:!0},o),null,16))],64))),64))])]),_:1})]))}}),Il=on(Ol,[["__scopeId","data-v-426d6b65"]]),Pl={key:0,class:"editor"},Rl=Rt({__name:"Tiptap",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Fr(e,"modelValue"),n=el({content:t.value,extensions:[Xa.configure({}),Ei,Qi,Ji,Xi,Gi.configure({openOnClick:!1}),Yi.configure({types:["heading","paragraph"]})],onUpdate:()=>{t.value=n.value?.getHTML()||""},onBlur(){window.scrollTo(0,0)}});return zr(t,r=>{n.value?.getHTML()!==r&&n.value?.commands.setContent(r,!1)}),(r,s)=>nt(n)?(rt(),ct("div",Pl,[pt(Il,{class:"editor__header",editor:nt(n)},null,8,["editor"]),pt(nt(Zn),{trigger:"none"},{default:tr(()=>[pt(nt(tl),{class:"editor__content",editor:nt(n)},null,8,["editor"])]),_:1})])):_e("",!0)}}),Hl=on(Rl,[["__scopeId","data-v-be77866a"]]),Nl={class:"page page-wrapped flex flex-col"},Bl={class:"page-header"},$l={class:"links"},jl={href:"https://tiptap.dev/installation/vue3",target:"_blank",alt:"docs",rel:"nofollow noopener noreferrer"},Dl={class:"editor-wrap grow overflow-hidden"},Fl="tabler:external-link",zl=Rt({__name:"Tiptap",setup(e){const t=Yn("<p>I’m running Tiptap with Vue.js. 🎉</p>");return(n,r)=>(rt(),ct("div",Nl,[gt("div",Bl,[r[2]||(r[2]=gt("div",{class:"title"},"Tiptap",-1)),gt("div",$l,[gt("a",jl,[pt(Xn,{name:Fl,size:16}),r[1]||(r[1]=Ur(" docs ",-1))])])]),gt("div",Dl,[pt(nt(Hl),{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=s=>t.value=s),class:"h-full"},null,8,["modelValue"])])]))}}),Vl=on(zl,[["__scopeId","data-v-edcd0b2b"]]);export{Vl as default};
