import{_ as g}from"./BLzEf9tb.js";import{N as c}from"./CV6rs4kW.js";import{y,o as N,g as T,w as o,e as r,u as i,B as l,b as p,s as m}from"./BboPWEKj.js";import{N as h}from"./DuzCq68b.js";import"./BmSAZQUJ.js";import"./BoIEE7Tp.js";import"./Bk_rJcZu.js";import"./B5ctO347.js";import"./CZYn2eUS.js";import"./BT9BDkx6.js";import"./CgiM6lMv.js";import"./VUHNlTpz.js";import"./CBN863Oo.js";import"./BuIxUXC0.js";import"./jzGJE7Cf.js";import"./DawznoV1.js";import"./DqYVDO9Y.js";import"./DnnAk1_e.js";import"./DxB_AnUS.js";import"./C6MRmTaG.js";import"./DqhOMRwD.js";import"./ChA4gcHA.js";import"./DgobSdsA.js";import"./BY5EArDQ.js";import"./CYlOExxq.js";import"./CGgGx79d.js";import"./BjyUHhTu.js";import"./C2161hUv.js";const Y={__name:"Sorting",setup(v){const n=m(null),u=m([]),d=m({pageSize:10}),f=[{title:"Título",key:"title"},{title:"Inicio",key:"start"},{title:"Fin",key:"end"},{title:"Excursión",key:"excursion"}];function _(){n.value.sort("title","ascend")}function k(){n.value.filter(null)}function x(){n.value.sort(null)}return y(async()=>{try{const e=localStorage.getItem("auth_token");if(!e)throw new Error("No autenticado");const t=await $fetch("https://admin.triplotrip.com/api/users/me",{headers:{Authorization:`Bearer ${e}`}}),s=await $fetch(`https://admin.triplotrip.com/api/events?filters[user][documentId][$eq]=${t.documentId}&populate=*`,{headers:{Authorization:`Bearer ${e}`}});u.value=(s.data||[]).map(a=>({key:a.id,title:a.Title,start:a.Start,end:a.End,excursion:a.excursion?.Nombre||"Sin info"}))}catch(e){console.error("Error al cargar eventos:",e)}}),(e,t)=>{const s=g;return N(),T(s,{title:"Próximas Reservas"},{default:o(()=>[r(i(c),{vertical:"",size:12},{default:o(()=>[r(i(c),null,{default:o(()=>[r(i(l),{onClick:_},{default:o(()=>[...t[0]||(t[0]=[p("Ordenar por Título (Ascendente)",-1)])]),_:1}),r(i(l),{onClick:k},{default:o(()=>[...t[1]||(t[1]=[p("Limpiar Filtros",-1)])]),_:1}),r(i(l),{onClick:x},{default:o(()=>[...t[2]||(t[2]=[p("Limpiar Ordenamiento",-1)])]),_:1})]),_:1}),r(i(h),{ref_key:"dataTableInst",ref:n,columns:f,data:u.value,pagination:d.value},null,8,["data","pagination"])]),_:1})]),_:1})}}};export{Y as default};
