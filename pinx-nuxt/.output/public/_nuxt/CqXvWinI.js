import{aw as E,ax as N,d as O,a7 as w,aE as $,bh as P,r as s,s as n,o as A,af as L,bv as M,b8 as k}from"./G6QKWTEq.js";import{u as F}from"./CJbG4D_o.js";const H=E("affix",[N("affixed",{position:"fixed"},[N("absolute-positioned",{position:"absolute"})])]);function j(t){return t instanceof HTMLElement?t.scrollTop:window.scrollY}function K(t){return t instanceof HTMLElement?t.getBoundingClientRect():{top:0,bottom:window.innerHeight}}const S={listenTo:[String,Object,Function],top:Number,bottom:Number,triggerTop:Number,triggerBottom:Number,position:{type:String,default:"fixed"},offsetTop:{type:Number,validator:()=>!0,default:void 0},offsetBottom:{type:Number,validator:()=>!0,default:void 0},target:{type:Function,validator:()=>!0,default:void 0}},q=k(S),z=O({name:"Affix",props:S,setup(t){const{mergedClsPrefixRef:v}=$(t);P("-affix",H,v);let l=null;const f=s(!1),i=s(!1),a=s(null),r=s(null),m=n(()=>i.value||f.value),g=n(()=>{var e,o;return(o=(e=t.triggerTop)!==null&&e!==void 0?e:t.offsetTop)!==null&&o!==void 0?o:t.top}),x=n(()=>{var e,o;return(o=(e=t.top)!==null&&e!==void 0?e:t.triggerTop)!==null&&o!==void 0?o:t.offsetTop}),b=n(()=>{var e,o;return(o=(e=t.bottom)!==null&&e!==void 0?e:t.triggerBottom)!==null&&o!==void 0?o:t.offsetBottom}),T=n(()=>{var e,o;return(o=(e=t.triggerBottom)!==null&&e!==void 0?e:t.offsetBottom)!==null&&o!==void 0?o:t.bottom}),p=s(null),_=()=>{const{target:e,listenTo:o}=t;e?l=e():o?l=F(o):l=document,l&&(l.addEventListener("scroll",u),u())};function u(){M(C)}function C(){const{value:e}=p;if(!l||!e)return;const o=j(l);if(m.value){r.value!==null&&o<r.value&&(f.value=!1,r.value=null),a.value!==null&&o>a.value&&(i.value=!1,a.value=null);return}const R=K(l),B=e.getBoundingClientRect(),y=B.top-R.top,h=R.bottom-B.bottom,c=g.value,d=T.value;c!==void 0&&y<=c?(f.value=!0,r.value=o-(c-y)):(f.value=!1,r.value=null),d!==void 0&&h<=d?(i.value=!0,a.value=o+d-h):(i.value=!1,a.value=null)}return A(()=>{_()}),L(()=>{l&&l.removeEventListener("scroll",u)}),{selfRef:p,affixed:m,mergedClsPrefix:v,mergedstyle:n(()=>{const e={};return f.value&&g.value!==void 0&&x.value!==void 0&&(e.top=`${x.value}px`),i.value&&T.value!==void 0&&b.value!==void 0&&(e.bottom=`${b.value}px`),e})}},render(){const{mergedClsPrefix:t}=this;return w("div",{ref:"selfRef",class:[`${t}-affix`,{[`${t}-affix--affixed`]:this.affixed,[`${t}-affix--absolute-positioned`]:this.position==="absolute"}],style:this.mergedstyle},this.$slots)}});export{z as N,q as a,S as b};
