import{_ as ce}from"./BfzzecIy.js";import{ay as fe,aw as q,bq as pe,aZ as he,d as G,a7 as g,c6 as me,c7 as ge,c8 as ve,c9 as O,bc as be,cb as ye,aE as we,aF as Q,b4 as xe,r as x,s as L,ce as Se,aJ as Ie,aH as Re,aN as Te,bu as Ce,ed as _e,C as Y,aS as P,b1 as Me,c as ke,a as Ne,b as B,g as E,f as H,h as Be,w as A,u as J,t as U,y as Ee}from"./CFnCIwgc.js";import{N as Fe}from"./ukkJLpdT.js";import"./uLUuACJr.js";import"./Bg-0ZsXF.js";import"./blwfaMt5.js";import"./D2atxefA.js";const ze=fe([q("mention","width: 100%; z-index: auto; position: relative;"),q("mention-menu",`
 box-shadow: var(--n-menu-box-shadow);
 `,[pe({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]);function Ve(t,i={debug:!1,useSelectionEnd:!1,checkWidthOverflow:!0}){const y=t.selectionStart!==null?t.selectionStart:0,m=t.selectionEnd!==null?t.selectionEnd:0,l=i.useSelectionEnd?m:y,S=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],h=navigator.userAgent.toLowerCase().includes("firefox");if(!he)throw new Error("textarea-caret-position#getCaretPosition should only be called in a browser");const s=i==null?void 0:i.debug;if(s){const d=document.querySelector("#input-textarea-caret-position-mirror-div");d!=null&&d.parentNode&&d.parentNode.removeChild(d)}const f=document.createElement("div");f.id="input-textarea-caret-position-mirror-div",document.body.appendChild(f);const u=f.style,a=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,I=t.nodeName==="INPUT";u.whiteSpace=I?"nowrap":"pre-wrap",I||(u.wordWrap="break-word"),u.position="absolute",s||(u.visibility="hidden"),S.forEach(d=>{if(I&&d==="lineHeight")if(a.boxSizing==="border-box"){const _=Number.parseInt(a.height),F=Number.parseInt(a.paddingTop)+Number.parseInt(a.paddingBottom)+Number.parseInt(a.borderTopWidth)+Number.parseInt(a.borderBottomWidth),M=F+Number.parseInt(a.lineHeight);_>M?u.lineHeight=`${_-F}px`:_===M?u.lineHeight=a.lineHeight:u.lineHeight="0"}else u.lineHeight=a.height;else u[d]=a[d]}),h?t.scrollHeight>Number.parseInt(a.height)&&(u.overflowY="scroll"):u.overflow="hidden",f.textContent=t.value.substring(0,l),I&&f.textContent&&(f.textContent=f.textContent.replace(/\s/g,"Â "));const c=document.createElement("span");c.textContent=t.value.substring(l)||".",c.style.position="relative",c.style.left=`${-t.scrollLeft}px`,c.style.top=`${-t.scrollTop}px`,f.appendChild(c);const v={top:c.offsetTop+Number.parseInt(a.borderTopWidth),left:c.offsetLeft+Number.parseInt(a.borderLeftWidth),absolute:!1,height:Number.parseInt(a.fontSize)*1.5};return s?c.style.backgroundColor="#aaa":document.body.removeChild(f),v.left>=t.clientWidth&&i.checkWidthOverflow&&(v.left=t.clientWidth),v}const Pe=Object.assign(Object.assign({},Q.props),{to:O.propTo,autosize:[Boolean,Object],options:{type:Array,default:[]},filter:{type:Function,default:(t,i)=>t?typeof i.label=="string"?i.label.startsWith(t):typeof i.value=="string"?i.value.startsWith(t):!1:!0},type:{type:String,default:"text"},separator:{type:String,validator:t=>t.length!==1?(Me("mention","`separator`'s length must be 1."),!1):!0,default:" "},bordered:{type:Boolean,default:void 0},disabled:Boolean,value:String,defaultValue:{type:String,default:""},loading:Boolean,prefix:{type:[String,Array],default:"@"},placeholder:{type:String,default:""},placement:{type:String,default:"bottom-start"},size:String,renderLabel:Function,status:String,"onUpdate:show":[Array,Function],onUpdateShow:[Array,Function],"onUpdate:value":[Array,Function],onUpdateValue:[Array,Function],onSearch:Function,onSelect:Function,onFocus:Function,onBlur:Function,internalDebug:Boolean}),Z=G({name:"Mention",props:Pe,slots:Object,setup(t){const{namespaceRef:i,mergedClsPrefixRef:y,mergedBorderedRef:m,inlineThemeDisabled:l}=we(t),S=Q("Mention","-mention",ze,_e,t,y),h=xe(t),s=x(null),f=x(null),u=x(null),a=x(null),I=x("");let c=null,v=null,d=null;const _=L(()=>{const{value:e}=I;return t.options.filter(n=>t.filter(e,n))}),F=L(()=>Se(_.value,{getKey:e=>e.value})),M=x(null),z=x(!1),D=x(t.defaultValue),ee=Ie(t,"value"),te=Re(ee,D),$=L(()=>{const{self:{menuBoxShadow:e}}=S.value;return{"--n-menu-box-shadow":e}}),T=l?Te("mention",void 0,$,t):void 0;function R(e){if(t.disabled)return;const{onUpdateShow:n,"onUpdate:show":o}=t;n&&P(n,e),o&&P(o,e),e||(c=null,v=null,d=null),z.value=e}function j(e){const{onUpdateValue:n,"onUpdate:value":o}=t,{nTriggerFormChange:r,nTriggerFormInput:p}=h;o&&P(o,e),n&&P(n,e),p(),r(),D.value=e}function W(){return t.type==="text"?s.value.inputElRef:s.value.textareaElRef}function K(){var e;const n=W();if(document.activeElement!==n){R(!1);return}const{selectionEnd:o}=n;if(o===null){R(!1);return}const r=n.value,{separator:p}=t,{prefix:C}=t,V=typeof C=="string"?[C]:C;for(let w=o-1;w>=0;--w){const b=r[w];if(b===p||b===`
`||b==="\r"){R(!1);return}if(V.includes(b)){const N=r.slice(w+1,o);R(!0),(e=t.onSearch)===null||e===void 0||e.call(t,N,b),I.value=N,c=b,v=w+1,d=o;return}}R(!1)}function ne(){const{value:e}=f;if(!e)return;const n=W(),o=Ve(n),r=n.getBoundingClientRect(),p=a.value.getBoundingClientRect();e.style.left=`${o.left+r.left-p.left}px`,e.style.top=`${o.top+r.top-p.top}px`,e.style.height=`${o.height}px`}function oe(){var e;z.value&&((e=u.value)===null||e===void 0||e.syncPosition())}function ie(e){j(e),k()}function k(){setTimeout(()=>{ne(),K(),Y().then(oe)},0)}function ae(e){var n,o;if(e.key==="ArrowLeft"||e.key==="ArrowRight"){if(!((n=s.value)===null||n===void 0)&&n.isCompositing)return;k()}else if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="Enter"){if(!((o=s.value)===null||o===void 0)&&o.isCompositing)return;const{value:r}=M;if(z.value){if(r)if(e.preventDefault(),e.key==="ArrowUp")r.prev();else if(e.key==="ArrowDown")r.next();else{const p=r.getPendingTmNode();p?X(p):R(!1)}}else k()}}function re(e){const{onFocus:n}=t;n==null||n(e);const{nTriggerFormFocus:o}=h;o(),k()}function se(){var e;(e=s.value)===null||e===void 0||e.focus()}function le(){var e;(e=s.value)===null||e===void 0||e.blur()}function ue(e){const{onBlur:n}=t;n==null||n(e);const{nTriggerFormBlur:o}=h;o(),R(!1)}function X(e){var n;if(c===null||v===null||d===null)return;const{rawNode:{value:o=""}}=e,r=W(),p=r.value,{separator:C}=t,V=p.slice(d),w=V.startsWith(C),b=`${o}${w?"":C}`;j(p.slice(0,v)+b+V),(n=t.onSelect)===null||n===void 0||n.call(t,e.rawNode,c);const N=v+b.length+(w?1:0);Y().then(()=>{r.selectionStart=N,r.selectionEnd=N,K()})}function de(){t.disabled||k()}return{namespace:i,mergedClsPrefix:y,mergedBordered:m,mergedSize:h.mergedSizeRef,mergedStatus:h.mergedStatusRef,mergedTheme:S,treeMate:F,selectMenuInstRef:M,inputInstRef:s,cursorRef:f,followerRef:u,wrapperElRef:a,showMenu:z,adjustedTo:O(t),isMounted:Ce(),mergedValue:te,handleInputFocus:re,handleInputBlur:ue,handleInputUpdateValue:ie,handleInputKeyDown:ae,handleSelect:X,handleInputMouseDown:de,focus:se,blur:le,cssVars:l?void 0:$,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender}},render(){const{mergedTheme:t,mergedClsPrefix:i,$slots:y}=this;return g("div",{class:`${i}-mention`,ref:"wrapperElRef"},g(Fe,{status:this.mergedStatus,themeOverrides:t.peerOverrides.Input,theme:t.peers.Input,size:this.mergedSize,autosize:this.autosize,type:this.type,ref:"inputInstRef",placeholder:this.placeholder,onMousedown:this.handleInputMouseDown,onUpdateValue:this.handleInputUpdateValue,onKeydown:this.handleInputKeyDown,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,bordered:this.mergedBordered,disabled:this.disabled,value:this.mergedValue}),g(me,null,{default:()=>[g(ge,null,{default:()=>g("div",{style:{position:"absolute",width:0},ref:"cursorRef"})}),g(ve,{ref:"followerRef",placement:this.placement,show:this.showMenu,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===O.tdkey},{default:()=>g(be,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{const{mergedTheme:m,onRender:l}=this;return l==null||l(),this.showMenu?g(ye,{clsPrefix:i,theme:m.peers.InternalSelectMenu,themeOverrides:m.peerOverrides.InternalSelectMenu,autoPending:!0,ref:"selectMenuInstRef",class:[`${i}-mention-menu`,this.themeClass],loading:this.loading,treeMate:this.treeMate,virtualScroll:!1,style:this.cssVars,onToggle:this.handleSelect,renderLabel:this.renderLabel},y):null}})})]}))}}),Ae={class:"page"},Ue={class:"page-header"},We={class:"links"},Le={href:"https://www.naiveui.com/en-US/light/components/mention",target:"_blank",alt:"docs",rel:"nofollow noopener noreferrer"},He={class:"components-list"},Oe="tabler:external-link",Je=G({__name:"Mention",setup(t){const i=[{label:"07akioni",value:"07akioni"},{label:"star-kirby",value:"star-kirby"},{label:"amadeus711",value:"amadeus711"}];function y(m){return g("div",{style:"display: flex; align-items: center; gap:8px"},[g(Ee,{size:24,round:!0,src:"https://picsum.photos/seed/FsNXmz/460/460"}),m.value])}return(m,l)=>{const S=ce;return Ne(),ke("div",Ae,[B("div",Ue,[l[1]||(l[1]=B("div",{class:"title"},"Mention",-1)),B("div",We,[B("a",Le,[E(Be,{name:Oe,size:16}),l[0]||(l[0]=H(" docs "))])])]),B("div",He,[E(S,{title:"Basic"},{code:A(({html:h,js:s})=>[H(U(h(`
					<n-mention :options :render-label="renderLabel" placeholder="Type '@'" :prefix="['@']" />
					`))+" "+U(s(`
						const options = [
							{
								label: "07akioni",
								value: "07akioni"
							},
							{
								label: "star-kirby",
								value: "star-kirby"
							},
							{
								label: "amadeus711",
								value: "amadeus711"
							}
						]
						const renderLabel = (option: MentionOption): VNodeChild =>
							h("div", { style: "display: flex; align-items: center;" }, [
								h(NAvatar, {
									style: "margin-right: 8px;",
									size: 24,
									round: true,
									src: "https://picsum.photos/seed/FsNXmz/460/460"
								}),
								option.value
							])
						`)),1)]),default:A(()=>[E(J(Z),{options:i,"render-label":y,placeholder:"Type '@'",prefix:["@"]})]),_:1}),E(S,{title:"Textarea"},{code:A(({html:h,js:s})=>[H(U(h(`
					<n-mention type="textarea" :options :autosize="{ minRows: 3 }" />
					`))+" "+U(s(`
						const options = [
							{
								label: "07akioni",
								value: "07akioni"
							},
							{
								label: "star-kirby",
								value: "star-kirby"
							},
							{
								label: "amadeus711",
								value: "amadeus711"
							}
						]
						`)),1)]),default:A(()=>[E(J(Z),{type:"textarea",options:i,autosize:{minRows:3}})]),_:1})])])}}});export{Je as default};
